{"ast":null,"code":"import _objectSpread from\"/Users/denielleoliva/Downloads/fcp_unr/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{Download,Play,Trash2,Square,Circle,Pen,Move,Save}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function VectorDrawTTS(){const[tool,setTool]=useState('pen');const[mode,setMode]=useState('draw');const[color,setColor]=useState('#000000');const[paths,setPaths]=useState([]);const[currentPath,setCurrentPath]=useState(null);const[isDrawing,setIsDrawing]=useState(false);const[text,setText]=useState('');const[isAnimating,setIsAnimating]=useState(false);const[mouthOpenAmount,setMouthOpenAmount]=useState(0);const[blinkAmount,setBlinkAmount]=useState(0);// 0 = open, 1 = closed\nconst[pupilOffsetX,setPupilOffsetX]=useState(0);const[pupilOffsetY,setPupilOffsetY]=useState(0);const svgRef=useRef(null);const[controlPoints,setControlPoints]=useState({leftEye:{x:300,y:200},rightEye:{x:500,y:200},leftEyebrow:{x:300,y:150},rightEyebrow:{x:500,y:150},mouthLeft:{x:350,y:350},mouthRight:{x:450,y:350},mouthTop:{x:400,y:330},mouthBottom:{x:400,y:370}});const[draggingPoint,setDraggingPoint]=useState(null);// Force re-render when mouthOpenAmount changes\nuseEffect(()=>{if(isAnimating){// Force component update\n}},[mouthOpenAmount,isAnimating]);const getMousePos=e=>{const rect=svgRef.current.getBoundingClientRect();const scaleX=800/rect.width;const scaleY=600/rect.height;return{x:(e.clientX-rect.left)*scaleX,y:(e.clientY-rect.top)*scaleY};};const handleMouseDown=e=>{const pos=getMousePos(e);if(mode==='rig'){for(const[key,point]of Object.entries(controlPoints)){const dx=pos.x-point.x;const dy=pos.y-point.y;const dist=Math.sqrt(dx*dx+dy*dy);if(dist<15){setDraggingPoint(key);return;}}}if(mode!=='draw')return;setIsDrawing(true);if(tool==='pen'){setCurrentPath({type:'path',d:\"M \".concat(pos.x,\" \").concat(pos.y),color:color,fill:'none',stroke:color,strokeWidth:3});}else if(tool==='rect'){setCurrentPath({type:'rect',x:pos.x,y:pos.y,startX:pos.x,startY:pos.y,width:0,height:0,color:color,fill:color,stroke:color,strokeWidth:2});}else if(tool==='circle'){setCurrentPath({type:'circle',cx:pos.x,cy:pos.y,startX:pos.x,startY:pos.y,r:0,color:color,fill:color,stroke:color,strokeWidth:2});}};const handleMouseMove=e=>{const pos=getMousePos(e);if(draggingPoint){setControlPoints(prev=>_objectSpread(_objectSpread({},prev),{},{[draggingPoint]:{x:pos.x,y:pos.y}}));return;}if(!isDrawing||!currentPath||mode!=='draw')return;if(tool==='pen'){setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{d:\"\".concat(prev.d,\" L \").concat(pos.x,\" \").concat(pos.y)}));}else if(tool==='rect'){const width=pos.x-currentPath.startX;const height=pos.y-currentPath.startY;setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{x:width<0?pos.x:prev.startX,y:height<0?pos.y:prev.startY,width:Math.abs(width),height:Math.abs(height)}));}else if(tool==='circle'){const dx=pos.x-currentPath.startX;const dy=pos.y-currentPath.startY;const radius=Math.sqrt(dx*dx+dy*dy);setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{r:radius}));}};const handleMouseUp=()=>{if(currentPath){setPaths([...paths,currentPath]);setCurrentPath(null);}setIsDrawing(false);setDraggingPoint(null);};const exportSVG=()=>{const svg=svgRef.current;const serializer=new XMLSerializer();const svgString=serializer.serializeToString(svg);const blob=new Blob([svgString],{type:'image/svg+xml'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='drawing.svg';a.click();URL.revokeObjectURL(url);};const exportJSON=()=>{const data={paths:paths,controlPoints:controlPoints};const json=JSON.stringify(data,null,2);const blob=new Blob([json],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='face-rigging.json';a.click();URL.revokeObjectURL(url);};const animateMouth=()=>{const amplitude=0.5+Math.random()*0.5;setMouthOpenAmount(amplitude);setTimeout(()=>{setMouthOpenAmount(0);},80+Math.random()*120);};const animateBlink=()=>{// Quick blink\nsetBlinkAmount(1);setTimeout(()=>{setBlinkAmount(0);},150);};const animatePupils=()=>{// Random subtle eye movement\nconst maxOffset=3;// pixels\nsetPupilOffsetX((Math.random()-0.5)*maxOffset);setPupilOffsetY((Math.random()-0.5)*maxOffset);};const animateWithTTS=async()=>{if(!text.trim()){alert('Please enter text to speak');return;}setIsAnimating(true);setMouthOpenAmount(0);setBlinkAmount(0);setPupilOffsetX(0);setPupilOffsetY(0);setMode('animate');const utterance=new SpeechSynthesisUtterance(text);utterance.rate=0.9;utterance.pitch=1;let mouthIntervalId,blinkIntervalId,pupilIntervalId;utterance.onstart=()=>{// Mouth animation\nmouthIntervalId=setInterval(()=>{animateMouth();},150);// Random blinking (every 2-4 seconds)\nblinkIntervalId=setInterval(()=>{animateBlink();},2000+Math.random()*2000);// Pupil movement (every 1-2 seconds)\npupilIntervalId=setInterval(()=>{animatePupils();},1000+Math.random()*1000);};utterance.onend=()=>{clearInterval(mouthIntervalId);clearInterval(blinkIntervalId);clearInterval(pupilIntervalId);setIsAnimating(false);setMouthOpenAmount(0);setBlinkAmount(0);setPupilOffsetX(0);setPupilOffsetY(0);};window.speechSynthesis.speak(utterance);};const clearCanvas=()=>{setPaths([]);setCurrentPath(null);};const resetControlPoints=()=>{setControlPoints({leftEye:{x:300,y:200},rightEye:{x:500,y:200},leftEyebrow:{x:300,y:150},rightEyebrow:{x:500,y:150},mouthLeft:{x:350,y:350},mouthRight:{x:450,y:350},mouthTop:{x:400,y:330},mouthBottom:{x:400,y:370}});};const getPathAnimationType=path=>{const cp=controlPoints;let pathCenterX,pathCenterY;if(path.type==='circle'){pathCenterX=path.cx;pathCenterY=path.cy;}else if(path.type==='rect'){pathCenterX=path.x+path.width/2;pathCenterY=path.y+path.height/2;}else if(path.type==='path'){// For pen paths, calculate center from all points\nconst points=[];const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){commands.forEach(cmd=>{const match=cmd.match(/([\\d.]+)\\s+([\\d.]+)/);if(match){points.push({x:parseFloat(match[1]),y:parseFloat(match[2])});}});}if(points.length===0)return null;// Calculate bounding box center\nconst minX=Math.min(...points.map(p=>p.x));const maxX=Math.max(...points.map(p=>p.x));const minY=Math.min(...points.map(p=>p.y));const maxY=Math.max(...points.map(p=>p.y));pathCenterX=(minX+maxX)/2;pathCenterY=(minY+maxY)/2;}else{return null;}const distanceToPoint=(px,py)=>{const dx=pathCenterX-px;const dy=pathCenterY-py;return Math.sqrt(dx*dx+dy*dy);};// Check for pupils (inner circle, closer to eye center)\nconst distToLeftEye=distanceToPoint(cp.leftEye.x,cp.leftEye.y);const distToRightEye=distanceToPoint(cp.rightEye.x,cp.rightEye.y);if(distToLeftEye<15){return{type:'leftPupil',eyeX:cp.leftEye.x,eyeY:cp.leftEye.y};}if(distToRightEye<15){return{type:'rightPupil',eyeX:cp.rightEye.x,eyeY:cp.rightEye.y};}// Check for eye shapes (outer circle, near eye but not pupil)\nif(distToLeftEye<40){return{type:'leftEye',eyeX:cp.leftEye.x,eyeY:cp.leftEye.y};}if(distToRightEye<40){return{type:'rightEye',eyeX:cp.rightEye.x,eyeY:cp.rightEye.y};}const mouthCenterX=(cp.mouthLeft.x+cp.mouthRight.x)/2;const mouthCenterY=(cp.mouthTop.y+cp.mouthBottom.y)/2;const distToMouth=distanceToPoint(mouthCenterX,mouthCenterY);if(distToMouth<120){return{type:'mouth',centerX:pathCenterX,centerY:pathCenterY};}const distToLeftBrow=distanceToPoint(cp.leftEyebrow.x,cp.leftEyebrow.y);const distToRightBrow=distanceToPoint(cp.rightEyebrow.x,cp.rightEyebrow.y);if(distToLeftBrow<60||distToRightBrow<60){return{type:'eyebrow'};}return null;};const renderPath=(path,index)=>{const animInfo=getPathAnimationType(path);// Calculate animated properties directly\nlet animatedPath=_objectSpread({},path);let isAnimated=false;if(animInfo&&isAnimating&&(mouthOpenAmount>0||blinkAmount>0||pupilOffsetX!==0||pupilOffsetY!==0)){isAnimated=true;if(animInfo.type==='mouth'){// For mouth animation, scale the shape\nconst scaleY=1+mouthOpenAmount*0.8;if(path.type==='circle'){const newR=path.r*scaleY;animatedPath=_objectSpread(_objectSpread({},path),{},{r:newR});}else if(path.type==='rect'){const newHeight=path.height*scaleY;const heightDiff=newHeight-path.height;animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y-heightDiff/2,height:newHeight});}else if(path.type==='path'){const centerY=animInfo.centerY;const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3]);const scaledY=centerY+(y-centerY)*scaleY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(scaledY,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='eyebrow'){const translateY=-5*mouthOpenAmount;if(path.type==='circle'){animatedPath=_objectSpread(_objectSpread({},path),{},{cy:path.cy+translateY});}else if(path.type==='rect'){animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y+translateY});}else if(path.type==='path'){const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3])+translateY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(y,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='leftEye'||animInfo.type==='rightEye'){// Blink animation - squash eye vertically\nconst scaleY=1-blinkAmount*0.9;// Almost close completely\nif(path.type==='circle'){const centerY=path.cy;const newCy=centerY;const newR=path.r*scaleY;animatedPath=_objectSpread(_objectSpread({},path),{},{cy:newCy,r:newR});}else if(path.type==='rect'){const newHeight=path.height*scaleY;const heightDiff=path.height-newHeight;animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y+heightDiff/2,height:newHeight});}else if(path.type==='path'){const centerY=animInfo.eyeY;const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3]);const scaledY=centerY+(y-centerY)*scaleY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(scaledY,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='leftPupil'||animInfo.type==='rightPupil'){// Pupil movement\nif(path.type==='circle'){animatedPath=_objectSpread(_objectSpread({},path),{},{cx:path.cx+pupilOffsetX,cy:path.cy+pupilOffsetY});}else if(path.type==='rect'){animatedPath=_objectSpread(_objectSpread({},path),{},{x:path.x+pupilOffsetX,y:path.y+pupilOffsetY});}else if(path.type==='path'){const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2])+pupilOffsetX;const y=parseFloat(match[3])+pupilOffsetY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(y,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}}// Add highlight for shapes that are being animated (debug)\nconst debugHighlight=animInfo&&mode==='animate'?{filter:isAnimated?'drop-shadow(0 0 8px rgba(255, 0, 0, 0.8))':'drop-shadow(0 0 4px rgba(0, 255, 0, 0.5))'}:{};const transitionStyle=_objectSpread({transition:'all 0.1s ease-out'},debugHighlight);if(animatedPath.type==='path'){return/*#__PURE__*/_jsx(\"path\",{d:animatedPath.d,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,strokeLinecap:\"round\",strokeLinejoin:\"round\",style:transitionStyle},index);}else if(animatedPath.type==='rect'){return/*#__PURE__*/_jsx(\"rect\",{x:animatedPath.x,y:animatedPath.y,width:animatedPath.width,height:animatedPath.height,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,style:transitionStyle},index);}else if(animatedPath.type==='circle'){return/*#__PURE__*/_jsx(\"circle\",{cx:animatedPath.cx,cy:animatedPath.cy,r:animatedPath.r,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,style:transitionStyle},index);}};const renderControlPoint=(key,point,color,label)=>{return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"circle\",{cx:point.x,cy:point.y,r:\"12\",fill:\"white\",stroke:color,strokeWidth:\"3\",style:{cursor:mode==='rig'?'grab':'default',filter:'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'}}),/*#__PURE__*/_jsx(\"circle\",{cx:point.x,cy:point.y,r:\"6\",fill:color,opacity:\"0.8\"}),/*#__PURE__*/_jsx(\"text\",{x:point.x,y:point.y-20,textAnchor:\"middle\",fill:color,fontSize:\"11\",fontWeight:\"bold\",style:{pointerEvents:'none'},children:label})]},key);};const renderSkeleton=()=>{if(mode!=='rig')return null;const cp=controlPoints;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsxs(\"g\",{stroke:\"#64748b\",strokeWidth:\"2\",strokeDasharray:\"5,5\",opacity:\"0.5\",children:[/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyebrow.x,y1:cp.leftEyebrow.y,x2:cp.leftEye.x,y2:cp.leftEye.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyebrow.x,y1:cp.rightEyebrow.y,x2:cp.rightEye.x,y2:cp.rightEye.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthLeft.x,y1:cp.mouthLeft.y,x2:cp.mouthTop.x,y2:cp.mouthTop.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthTop.x,y1:cp.mouthTop.y,x2:cp.mouthRight.x,y2:cp.mouthRight.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthRight.x,y1:cp.mouthRight.y,x2:cp.mouthBottom.x,y2:cp.mouthBottom.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthBottom.x,y1:cp.mouthBottom.y,x2:cp.mouthLeft.x,y2:cp.mouthLeft.y}),/*#__PURE__*/_jsx(\"line\",{x1:(cp.leftEye.x+cp.rightEye.x)/2,y1:cp.leftEye.y,x2:(cp.mouthLeft.x+cp.mouthRight.x)/2,y2:cp.mouthTop.y})]}),renderControlPoint('leftEye',cp.leftEye,'#3b82f6','L EYE'),renderControlPoint('rightEye',cp.rightEye,'#3b82f6','R EYE'),renderControlPoint('leftEyebrow',cp.leftEyebrow,'#8b5cf6','L BROW'),renderControlPoint('rightEyebrow',cp.rightEyebrow,'#8b5cf6','R BROW'),renderControlPoint('mouthLeft',cp.mouthLeft,'#ec4899','M LEFT'),renderControlPoint('mouthRight',cp.mouthRight,'#ec4899','M RIGHT'),renderControlPoint('mouthTop',cp.mouthTop,'#ec4899','M TOP'),renderControlPoint('mouthBottom',cp.mouthBottom,'#ec4899','M BOT')]});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-800 mb-2\",children:\"Face Rigging Studio\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Draw, rig with control points, and animate with speech\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setMode('draw');setDraggingPoint(null);},className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='draw'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Pen,{className:\"inline mr-2\",size:18}),\"Draw\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMode('rig'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='rig'?'bg-blue-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Move,{className:\"inline mr-2\",size:18}),\"Rig Points\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMode('animate'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='animate'?'bg-green-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Play,{className:\"inline mr-2\",size:18}),\"Animate\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-50 rounded-lg text-sm\",children:[mode==='draw'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Draw Mode:\"}),\" Use the tools below to draw your face\"]}),mode==='rig'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rig Mode:\"}),\" Drag the control points to position them on your drawing\"]}),mode==='animate'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Animate Mode:\"}),\" Enter text and click \\\"Animate with Speech\\\"!\"]})]}),mode==='draw'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-4 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('pen'),className:\"p-3 rounded-lg transition-all \".concat(tool==='pen'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Pen,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('rect'),className:\"p-3 rounded-lg transition-all \".concat(tool==='rect'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Square,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('circle'),className:\"p-3 rounded-lg transition-all \".concat(tool==='circle'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Circle,{size:20})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color,onChange:e=>setColor(e.target.value),className:\"w-12 h-12 rounded cursor-pointer border-2 border-gray-300\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCanvas,className:\"p-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all\",children:/*#__PURE__*/_jsx(Trash2,{size:20})})]}),mode==='rig'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4 mb-4 flex-wrap\",children:/*#__PURE__*/_jsx(\"button\",{onClick:resetControlPoints,className:\"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-all\",children:\"Reset Points\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-4 border-gray-300 rounded-lg overflow-hidden bg-white relative\",children:[mode==='rig'&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-lg z-10\",children:\"Adjust by dragging the points\"}),/*#__PURE__*/_jsxs(\"svg\",{ref:svgRef,width:\"800\",height:\"600\",viewBox:\"0 0 800 600\",className:\"w-full h-auto \".concat(mode==='draw'?'cursor-crosshair':mode==='rig'?'cursor-grab':'cursor-default'),onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,style:{touchAction:'none'},children:[/*#__PURE__*/_jsx(\"rect\",{width:\"800\",height:\"600\",fill:\"white\"}),paths.map((path,index)=>renderPath(path,index)),currentPath&&renderPath(currentPath,-1),renderSkeleton()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:exportSVG,className:\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all\",children:[/*#__PURE__*/_jsx(Download,{size:18}),\"Export SVG\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportJSON,className:\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\"Save Rigging\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Speech Animation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Speech Text\"}),/*#__PURE__*/_jsx(\"textarea\",{value:text,onChange:e=>setText(e.target.value),placeholder:\"Enter text to speak...\",className:\"w-full h-32 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:animateWithTTS,disabled:isAnimating,className:\"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all \".concat(isAnimating?'bg-gray-300 text-gray-500 cursor-not-allowed':'bg-purple-600 text-white hover:bg-purple-700 shadow-md hover:shadow-lg'),children:isAnimating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin\"}),\"Speaking...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Play,{size:20}),\"Animate with Speech\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-purple-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:\"How to use:\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"text-sm text-gray-600 space-y-2 list-decimal list-inside\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Draw:\"}),\" Create your face\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rig:\"}),\" Drag mouth points to your drawn mouth area\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Animate:\"}),\" Click animate and watch!\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800 font-medium\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug Info:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Mouth open: \",(mouthOpenAmount*100).toFixed(0),\"%\",/*#__PURE__*/_jsx(\"br\",{}),\"Blink: \",(blinkAmount*100).toFixed(0),\"%\",/*#__PURE__*/_jsx(\"br\",{}),\"Animating: \",isAnimating?'YES':'NO',/*#__PURE__*/_jsx(\"br\",{}),\"Total shapes: \",paths.length,/*#__PURE__*/_jsx(\"br\",{}),\"Mouth: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&info.type==='mouth';}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Eyes: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&(info.type==='leftEye'||info.type==='rightEye');}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Pupils: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&(info.type==='leftPupil'||info.type==='rightPupil');}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Eyebrows: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&info.type==='eyebrow';}).length]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-yellow-700 mt-2\",children:\"Green glow = detected, Red glow = animating\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700 mb-2 text-sm\",children:\"Animation Zones:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-pink-600\",children:\"Mouth:\"}),\" 120px from center\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-600\",children:\"Eyebrows:\"}),\" 60px radius\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"Eyes:\"}),\" 40px from eye points\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-600\",children:\"Pupils:\"}),\" 15px from eye center\"]})]})]})]})]})]})});}","map":{"version":3,"names":["React","useState","useRef","useEffect","Download","Play","Trash2","Square","Circle","Pen","Move","Save","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VectorDrawTTS","tool","setTool","mode","setMode","color","setColor","paths","setPaths","currentPath","setCurrentPath","isDrawing","setIsDrawing","text","setText","isAnimating","setIsAnimating","mouthOpenAmount","setMouthOpenAmount","blinkAmount","setBlinkAmount","pupilOffsetX","setPupilOffsetX","pupilOffsetY","setPupilOffsetY","svgRef","controlPoints","setControlPoints","leftEye","x","y","rightEye","leftEyebrow","rightEyebrow","mouthLeft","mouthRight","mouthTop","mouthBottom","draggingPoint","setDraggingPoint","getMousePos","e","rect","current","getBoundingClientRect","scaleX","width","scaleY","height","clientX","left","clientY","top","handleMouseDown","pos","key","point","Object","entries","dx","dy","dist","Math","sqrt","type","d","concat","fill","stroke","strokeWidth","startX","startY","cx","cy","r","handleMouseMove","prev","_objectSpread","abs","radius","handleMouseUp","exportSVG","svg","serializer","XMLSerializer","svgString","serializeToString","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","exportJSON","data","json","JSON","stringify","animateMouth","amplitude","random","setTimeout","animateBlink","animatePupils","maxOffset","animateWithTTS","trim","alert","utterance","SpeechSynthesisUtterance","rate","pitch","mouthIntervalId","blinkIntervalId","pupilIntervalId","onstart","setInterval","onend","clearInterval","window","speechSynthesis","speak","clearCanvas","resetControlPoints","getPathAnimationType","path","cp","pathCenterX","pathCenterY","points","commands","match","forEach","cmd","push","parseFloat","length","minX","min","map","p","maxX","max","minY","maxY","distanceToPoint","px","py","distToLeftEye","distToRightEye","eyeX","eyeY","mouthCenterX","mouthCenterY","distToMouth","centerX","centerY","distToLeftBrow","distToRightBrow","renderPath","index","animInfo","animatedPath","isAnimated","newR","newHeight","heightDiff","newD","command","scaledY","translateY","newCy","debugHighlight","filter","transitionStyle","transition","strokeLinecap","strokeLinejoin","style","renderControlPoint","label","children","cursor","opacity","textAnchor","fontSize","fontWeight","pointerEvents","renderSkeleton","strokeDasharray","x1","y1","x2","y2","className","onClick","size","value","onChange","target","ref","viewBox","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","touchAction","placeholder","disabled","toFixed","info"],"sources":["/Users/denielleoliva/Downloads/fcp_unr/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Download, Play, Trash2, Square, Circle, Pen, Move, Save } from 'lucide-react';\n\nexport default function VectorDrawTTS() {\n  const [tool, setTool] = useState('pen');\n  const [mode, setMode] = useState('draw');\n  const [color, setColor] = useState('#000000');\n  const [paths, setPaths] = useState([]);\n  const [currentPath, setCurrentPath] = useState(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [text, setText] = useState('');\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [mouthOpenAmount, setMouthOpenAmount] = useState(0);\n  const [blinkAmount, setBlinkAmount] = useState(0); // 0 = open, 1 = closed\n  const [pupilOffsetX, setPupilOffsetX] = useState(0);\n  const [pupilOffsetY, setPupilOffsetY] = useState(0);\n  const svgRef = useRef(null);\n\n  const [controlPoints, setControlPoints] = useState({\n    leftEye: { x: 300, y: 200 },\n    rightEye: { x: 500, y: 200 },\n    leftEyebrow: { x: 300, y: 150 },\n    rightEyebrow: { x: 500, y: 150 },\n    mouthLeft: { x: 350, y: 350 },\n    mouthRight: { x: 450, y: 350 },\n    mouthTop: { x: 400, y: 330 },\n    mouthBottom: { x: 400, y: 370 }\n  });\n\n  const [draggingPoint, setDraggingPoint] = useState(null);\n\n  // Force re-render when mouthOpenAmount changes\n  useEffect(() => {\n    if (isAnimating) {\n      // Force component update\n    }\n  }, [mouthOpenAmount, isAnimating]);\n\n  const getMousePos = (e) => {\n    const rect = svgRef.current.getBoundingClientRect();\n    const scaleX = 800 / rect.width;\n    const scaleY = 600 / rect.height;\n    return {\n      x: (e.clientX - rect.left) * scaleX,\n      y: (e.clientY - rect.top) * scaleY\n    };\n  };\n\n  const handleMouseDown = (e) => {\n    const pos = getMousePos(e);\n\n    if (mode === 'rig') {\n      for (const [key, point] of Object.entries(controlPoints)) {\n        const dx = pos.x - point.x;\n        const dy = pos.y - point.y;\n        const dist = Math.sqrt(dx * dx + dy * dy);\n        if (dist < 15) {\n          setDraggingPoint(key);\n          return;\n        }\n      }\n    }\n\n    if (mode !== 'draw') return;\n\n    setIsDrawing(true);\n    \n    if (tool === 'pen') {\n      setCurrentPath({\n        type: 'path',\n        d: `M ${pos.x} ${pos.y}`,\n        color: color,\n        fill: 'none',\n        stroke: color,\n        strokeWidth: 3\n      });\n    } else if (tool === 'rect') {\n      setCurrentPath({\n        type: 'rect',\n        x: pos.x,\n        y: pos.y,\n        startX: pos.x,\n        startY: pos.y,\n        width: 0,\n        height: 0,\n        color: color,\n        fill: color,\n        stroke: color,\n        strokeWidth: 2\n      });\n    } else if (tool === 'circle') {\n      setCurrentPath({\n        type: 'circle',\n        cx: pos.x,\n        cy: pos.y,\n        startX: pos.x,\n        startY: pos.y,\n        r: 0,\n        color: color,\n        fill: color,\n        stroke: color,\n        strokeWidth: 2\n      });\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    const pos = getMousePos(e);\n\n    if (draggingPoint) {\n      setControlPoints(prev => ({\n        ...prev,\n        [draggingPoint]: { x: pos.x, y: pos.y }\n      }));\n      return;\n    }\n\n    if (!isDrawing || !currentPath || mode !== 'draw') return;\n\n    if (tool === 'pen') {\n      setCurrentPath(prev => ({\n        ...prev,\n        d: `${prev.d} L ${pos.x} ${pos.y}`\n      }));\n    } else if (tool === 'rect') {\n      const width = pos.x - currentPath.startX;\n      const height = pos.y - currentPath.startY;\n      setCurrentPath(prev => ({\n        ...prev,\n        x: width < 0 ? pos.x : prev.startX,\n        y: height < 0 ? pos.y : prev.startY,\n        width: Math.abs(width),\n        height: Math.abs(height)\n      }));\n    } else if (tool === 'circle') {\n      const dx = pos.x - currentPath.startX;\n      const dy = pos.y - currentPath.startY;\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      setCurrentPath(prev => ({\n        ...prev,\n        r: radius\n      }));\n    }\n  };\n\n  const handleMouseUp = () => {\n    if (currentPath) {\n      setPaths([...paths, currentPath]);\n      setCurrentPath(null);\n    }\n    setIsDrawing(false);\n    setDraggingPoint(null);\n  };\n\n  const exportSVG = () => {\n    const svg = svgRef.current;\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], { type: 'image/svg+xml' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'drawing.svg';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const exportJSON = () => {\n    const data = {\n      paths: paths,\n      controlPoints: controlPoints\n    };\n    const json = JSON.stringify(data, null, 2);\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'face-rigging.json';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const animateMouth = () => {\n    const amplitude = 0.5 + Math.random() * 0.5;\n    setMouthOpenAmount(amplitude);\n    \n    setTimeout(() => {\n      setMouthOpenAmount(0);\n    }, 80 + Math.random() * 120);\n  };\n\n  const animateBlink = () => {\n    // Quick blink\n    setBlinkAmount(1);\n    setTimeout(() => {\n      setBlinkAmount(0);\n    }, 150);\n  };\n\n  const animatePupils = () => {\n    // Random subtle eye movement\n    const maxOffset = 3; // pixels\n    setPupilOffsetX((Math.random() - 0.5) * maxOffset);\n    setPupilOffsetY((Math.random() - 0.5) * maxOffset);\n  };\n\n  const animateWithTTS = async () => {\n    if (!text.trim()) {\n      alert('Please enter text to speak');\n      return;\n    }\n\n    setIsAnimating(true);\n    setMouthOpenAmount(0);\n    setBlinkAmount(0);\n    setPupilOffsetX(0);\n    setPupilOffsetY(0);\n    setMode('animate');\n\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.rate = 0.9;\n    utterance.pitch = 1;\n\n    let mouthIntervalId, blinkIntervalId, pupilIntervalId;\n    \n    utterance.onstart = () => {\n      // Mouth animation\n      mouthIntervalId = setInterval(() => {\n        animateMouth();\n      }, 150);\n      \n      // Random blinking (every 2-4 seconds)\n      blinkIntervalId = setInterval(() => {\n        animateBlink();\n      }, 2000 + Math.random() * 2000);\n      \n      // Pupil movement (every 1-2 seconds)\n      pupilIntervalId = setInterval(() => {\n        animatePupils();\n      }, 1000 + Math.random() * 1000);\n    };\n\n    utterance.onend = () => {\n      clearInterval(mouthIntervalId);\n      clearInterval(blinkIntervalId);\n      clearInterval(pupilIntervalId);\n      setIsAnimating(false);\n      setMouthOpenAmount(0);\n      setBlinkAmount(0);\n      setPupilOffsetX(0);\n      setPupilOffsetY(0);\n    };\n\n    window.speechSynthesis.speak(utterance);\n  };\n\n  const clearCanvas = () => {\n    setPaths([]);\n    setCurrentPath(null);\n  };\n\n  const resetControlPoints = () => {\n    setControlPoints({\n      leftEye: { x: 300, y: 200 },\n      rightEye: { x: 500, y: 200 },\n      leftEyebrow: { x: 300, y: 150 },\n      rightEyebrow: { x: 500, y: 150 },\n      mouthLeft: { x: 350, y: 350 },\n      mouthRight: { x: 450, y: 350 },\n      mouthTop: { x: 400, y: 330 },\n      mouthBottom: { x: 400, y: 370 }\n    });\n  };\n\n  const getPathAnimationType = (path) => {\n    const cp = controlPoints;\n    \n    let pathCenterX, pathCenterY;\n    if (path.type === 'circle') {\n      pathCenterX = path.cx;\n      pathCenterY = path.cy;\n    } else if (path.type === 'rect') {\n      pathCenterX = path.x + path.width / 2;\n      pathCenterY = path.y + path.height / 2;\n    } else if (path.type === 'path') {\n      // For pen paths, calculate center from all points\n      const points = [];\n      const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n      \n      if (commands) {\n        commands.forEach(cmd => {\n          const match = cmd.match(/([\\d.]+)\\s+([\\d.]+)/);\n          if (match) {\n            points.push({\n              x: parseFloat(match[1]),\n              y: parseFloat(match[2])\n            });\n          }\n        });\n      }\n      \n      if (points.length === 0) return null;\n      \n      // Calculate bounding box center\n      const minX = Math.min(...points.map(p => p.x));\n      const maxX = Math.max(...points.map(p => p.x));\n      const minY = Math.min(...points.map(p => p.y));\n      const maxY = Math.max(...points.map(p => p.y));\n      \n      pathCenterX = (minX + maxX) / 2;\n      pathCenterY = (minY + maxY) / 2;\n    } else {\n      return null;\n    }\n\n    const distanceToPoint = (px, py) => {\n      const dx = pathCenterX - px;\n      const dy = pathCenterY - py;\n      return Math.sqrt(dx * dx + dy * dy);\n    };\n\n    // Check for pupils (inner circle, closer to eye center)\n    const distToLeftEye = distanceToPoint(cp.leftEye.x, cp.leftEye.y);\n    const distToRightEye = distanceToPoint(cp.rightEye.x, cp.rightEye.y);\n    \n    if (distToLeftEye < 15) {\n      return { type: 'leftPupil', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\n    }\n    if (distToRightEye < 15) {\n      return { type: 'rightPupil', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\n    }\n\n    // Check for eye shapes (outer circle, near eye but not pupil)\n    if (distToLeftEye < 40) {\n      return { type: 'leftEye', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\n    }\n    if (distToRightEye < 40) {\n      return { type: 'rightEye', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\n    }\n\n    const mouthCenterX = (cp.mouthLeft.x + cp.mouthRight.x) / 2;\n    const mouthCenterY = (cp.mouthTop.y + cp.mouthBottom.y) / 2;\n    const distToMouth = distanceToPoint(mouthCenterX, mouthCenterY);\n    \n    if (distToMouth < 120) {\n      return { type: 'mouth', centerX: pathCenterX, centerY: pathCenterY };\n    }\n\n    const distToLeftBrow = distanceToPoint(cp.leftEyebrow.x, cp.leftEyebrow.y);\n    const distToRightBrow = distanceToPoint(cp.rightEyebrow.x, cp.rightEyebrow.y);\n    \n    if (distToLeftBrow < 60 || distToRightBrow < 60) {\n      return { type: 'eyebrow' };\n    }\n\n    return null;\n  };\n\n  const renderPath = (path, index) => {\n    const animInfo = getPathAnimationType(path);\n    \n    // Calculate animated properties directly\n    let animatedPath = { ...path };\n    let isAnimated = false;\n    \n    if (animInfo && isAnimating && (mouthOpenAmount > 0 || blinkAmount > 0 || pupilOffsetX !== 0 || pupilOffsetY !== 0)) {\n      isAnimated = true;\n      \n      if (animInfo.type === 'mouth') {\n        // For mouth animation, scale the shape\n        const scaleY = 1 + (mouthOpenAmount * 0.8);\n        \n        if (path.type === 'circle') {\n          const newR = path.r * scaleY;\n          animatedPath = { ...path, r: newR };\n        } else if (path.type === 'rect') {\n          const newHeight = path.height * scaleY;\n          const heightDiff = newHeight - path.height;\n          animatedPath = { ...path, y: path.y - heightDiff / 2, height: newHeight };\n        } else if (path.type === 'path') {\n          const centerY = animInfo.centerY;\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]);\n                const scaledY = centerY + (y - centerY) * scaleY;\n                newD += `${command} ${x} ${scaledY} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'eyebrow') {\n        const translateY = -5 * mouthOpenAmount;\n        \n        if (path.type === 'circle') {\n          animatedPath = { ...path, cy: path.cy + translateY };\n        } else if (path.type === 'rect') {\n          animatedPath = { ...path, y: path.y + translateY };\n        } else if (path.type === 'path') {\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]) + translateY;\n                newD += `${command} ${x} ${y} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'leftEye' || animInfo.type === 'rightEye') {\n        // Blink animation - squash eye vertically\n        const scaleY = 1 - (blinkAmount * 0.9); // Almost close completely\n        \n        if (path.type === 'circle') {\n          const centerY = path.cy;\n          const newCy = centerY;\n          const newR = path.r * scaleY;\n          animatedPath = { ...path, cy: newCy, r: newR };\n        } else if (path.type === 'rect') {\n          const newHeight = path.height * scaleY;\n          const heightDiff = path.height - newHeight;\n          animatedPath = { ...path, y: path.y + heightDiff / 2, height: newHeight };\n        } else if (path.type === 'path') {\n          const centerY = animInfo.eyeY;\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]);\n                const scaledY = centerY + (y - centerY) * scaleY;\n                newD += `${command} ${x} ${scaledY} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'leftPupil' || animInfo.type === 'rightPupil') {\n        // Pupil movement\n        if (path.type === 'circle') {\n          animatedPath = { \n            ...path, \n            cx: path.cx + pupilOffsetX,\n            cy: path.cy + pupilOffsetY\n          };\n        } else if (path.type === 'rect') {\n          animatedPath = { \n            ...path, \n            x: path.x + pupilOffsetX,\n            y: path.y + pupilOffsetY\n          };\n        } else if (path.type === 'path') {\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]) + pupilOffsetX;\n                const y = parseFloat(match[3]) + pupilOffsetY;\n                newD += `${command} ${x} ${y} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      }\n    }\n\n    // Add highlight for shapes that are being animated (debug)\n    const debugHighlight = animInfo && mode === 'animate' ? {\n      filter: isAnimated ? 'drop-shadow(0 0 8px rgba(255, 0, 0, 0.8))' : 'drop-shadow(0 0 4px rgba(0, 255, 0, 0.5))'\n    } : {};\n\n    const transitionStyle = {\n      transition: 'all 0.1s ease-out',\n      ...debugHighlight\n    };\n\n    if (animatedPath.type === 'path') {\n      return (\n        <path\n          key={index}\n          d={animatedPath.d}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          style={transitionStyle}\n        />\n      );\n    } else if (animatedPath.type === 'rect') {\n      return (\n        <rect\n          key={index}\n          x={animatedPath.x}\n          y={animatedPath.y}\n          width={animatedPath.width}\n          height={animatedPath.height}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          style={transitionStyle}\n        />\n      );\n    } else if (animatedPath.type === 'circle') {\n      return (\n        <circle\n          key={index}\n          cx={animatedPath.cx}\n          cy={animatedPath.cy}\n          r={animatedPath.r}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          style={transitionStyle}\n        />\n      );\n    }\n  };\n\n  const renderControlPoint = (key, point, color, label) => {\n    return (\n      <g key={key}>\n        <circle\n          cx={point.x}\n          cy={point.y}\n          r=\"12\"\n          fill=\"white\"\n          stroke={color}\n          strokeWidth=\"3\"\n          style={{\n            cursor: mode === 'rig' ? 'grab' : 'default',\n            filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'\n          }}\n        />\n        <circle\n          cx={point.x}\n          cy={point.y}\n          r=\"6\"\n          fill={color}\n          opacity=\"0.8\"\n        />\n        <text\n          x={point.x}\n          y={point.y - 20}\n          textAnchor=\"middle\"\n          fill={color}\n          fontSize=\"11\"\n          fontWeight=\"bold\"\n          style={{ pointerEvents: 'none' }}\n        >\n          {label}\n        </text>\n      </g>\n    );\n  };\n\n  const renderSkeleton = () => {\n    if (mode !== 'rig') return null;\n\n    const cp = controlPoints;\n    \n    return (\n      <g>\n        <g stroke=\"#64748b\" strokeWidth=\"2\" strokeDasharray=\"5,5\" opacity=\"0.5\">\n          <line x1={cp.leftEyebrow.x} y1={cp.leftEyebrow.y} x2={cp.leftEye.x} y2={cp.leftEye.y} />\n          <line x1={cp.rightEyebrow.x} y1={cp.rightEyebrow.y} x2={cp.rightEye.x} y2={cp.rightEye.y} />\n          <line x1={cp.mouthLeft.x} y1={cp.mouthLeft.y} x2={cp.mouthTop.x} y2={cp.mouthTop.y} />\n          <line x1={cp.mouthTop.x} y1={cp.mouthTop.y} x2={cp.mouthRight.x} y2={cp.mouthRight.y} />\n          <line x1={cp.mouthRight.x} y1={cp.mouthRight.y} x2={cp.mouthBottom.x} y2={cp.mouthBottom.y} />\n          <line x1={cp.mouthBottom.x} y1={cp.mouthBottom.y} x2={cp.mouthLeft.x} y2={cp.mouthLeft.y} />\n          <line x1={(cp.leftEye.x + cp.rightEye.x) / 2} y1={cp.leftEye.y} \n                x2={(cp.mouthLeft.x + cp.mouthRight.x) / 2} y2={cp.mouthTop.y} />\n        </g>\n\n        {renderControlPoint('leftEye', cp.leftEye, '#3b82f6', 'L EYE')}\n        {renderControlPoint('rightEye', cp.rightEye, '#3b82f6', 'R EYE')}\n        {renderControlPoint('leftEyebrow', cp.leftEyebrow, '#8b5cf6', 'L BROW')}\n        {renderControlPoint('rightEyebrow', cp.rightEyebrow, '#8b5cf6', 'R BROW')}\n        {renderControlPoint('mouthLeft', cp.mouthLeft, '#ec4899', 'M LEFT')}\n        {renderControlPoint('mouthRight', cp.mouthRight, '#ec4899', 'M RIGHT')}\n        {renderControlPoint('mouthTop', cp.mouthTop, '#ec4899', 'M TOP')}\n        {renderControlPoint('mouthBottom', cp.mouthBottom, '#ec4899', 'M BOT')}\n      </g>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">Face Rigging Studio</h1>\n        <p className=\"text-gray-600 mb-6\">Draw, rig with control points, and animate with speech</p>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex gap-2 mb-4\">\n              <button\n                onClick={() => {\n                  setMode('draw');\n                  setDraggingPoint(null);\n                }}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'draw'\n                    ? 'bg-purple-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Pen className=\"inline mr-2\" size={18} />\n                Draw\n              </button>\n              <button\n                onClick={() => setMode('rig')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'rig'\n                    ? 'bg-blue-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Move className=\"inline mr-2\" size={18} />\n                Rig Points\n              </button>\n              <button\n                onClick={() => setMode('animate')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'animate'\n                    ? 'bg-green-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Play className=\"inline mr-2\" size={18} />\n                Animate\n              </button>\n            </div>\n\n            <div className=\"mb-4 p-3 bg-blue-50 rounded-lg text-sm\">\n              {mode === 'draw' && (\n                <p className=\"text-blue-800\"><strong>Draw Mode:</strong> Use the tools below to draw your face</p>\n              )}\n              {mode === 'rig' && (\n                <p className=\"text-blue-800\"><strong>Rig Mode:</strong> Drag the control points to position them on your drawing</p>\n              )}\n              {mode === 'animate' && (\n                <p className=\"text-blue-800\"><strong>Animate Mode:</strong> Enter text and click \"Animate with Speech\"!</p>\n              )}\n            </div>\n\n            {mode === 'draw' && (\n              <div className=\"flex items-center gap-4 mb-4 flex-wrap\">\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => setTool('pen')}\n                    className={`p-3 rounded-lg transition-all ${\n                      tool === 'pen' \n                        ? 'bg-purple-600 text-white shadow-md' \n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Pen size={20} />\n                  </button>\n                  <button\n                    onClick={() => setTool('rect')}\n                    className={`p-3 rounded-lg transition-all ${\n                      tool === 'rect' \n                        ? 'bg-purple-600 text-white shadow-md' \n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Square size={20} />\n                  </button>\n                  <button\n                    onClick={() => setTool('circle')}\n                    className={`p-3 rounded-lg transition-all ${\n                      tool === 'circle' \n                        ? 'bg-purple-600 text-white shadow-md' \n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Circle size={20} />\n                  </button>\n                </div>\n\n                <input\n                  type=\"color\"\n                  value={color}\n                  onChange={(e) => setColor(e.target.value)}\n                  className=\"w-12 h-12 rounded cursor-pointer border-2 border-gray-300\"\n                />\n\n                <button\n                  onClick={clearCanvas}\n                  className=\"p-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all\"\n                >\n                  <Trash2 size={20} />\n                </button>\n              </div>\n            )}\n\n            {mode === 'rig' && (\n              <div className=\"flex items-center gap-4 mb-4 flex-wrap\">\n                <button\n                  onClick={resetControlPoints}\n                  className=\"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-all\"\n                >\n                  Reset Points\n                </button>\n              </div>\n            )}\n\n            <div className=\"border-4 border-gray-300 rounded-lg overflow-hidden bg-white relative\">\n              {mode === 'rig' && (\n                <div className=\"absolute top-2 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-lg z-10\">\n                  Adjust by dragging the points\n                </div>\n              )}\n              \n              <svg\n                ref={svgRef}\n                width=\"800\"\n                height=\"600\"\n                viewBox=\"0 0 800 600\"\n                className={`w-full h-auto ${\n                  mode === 'draw' ? 'cursor-crosshair' : \n                  mode === 'rig' ? 'cursor-grab' : \n                  'cursor-default'\n                }`}\n                onMouseDown={handleMouseDown}\n                onMouseMove={handleMouseMove}\n                onMouseUp={handleMouseUp}\n                onMouseLeave={handleMouseUp}\n                style={{ touchAction: 'none' }}\n              >\n                <rect width=\"800\" height=\"600\" fill=\"white\" />\n                \n                {paths.map((path, index) => renderPath(path, index))}\n                {currentPath && renderPath(currentPath, -1)}\n                \n                {renderSkeleton()}\n              </svg>\n            </div>\n\n            <div className=\"flex gap-3 mt-4\">\n              <button\n                onClick={exportSVG}\n                className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all\"\n              >\n                <Download size={18} />\n                Export SVG\n              </button>\n              <button\n                onClick={exportJSON}\n                className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all\"\n              >\n                <Save size={18} />\n                Save Rigging\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Speech Animation</h2>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Speech Text\n              </label>\n              <textarea\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                placeholder=\"Enter text to speak...\"\n                className=\"w-full h-32 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none\"\n              />\n            </div>\n\n            <button\n              onClick={animateWithTTS}\n              disabled={isAnimating}\n              className={`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${\n                isAnimating\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  : 'bg-purple-600 text-white hover:bg-purple-700 shadow-md hover:shadow-lg'\n              }`}\n            >\n              {isAnimating ? (\n                <>\n                  <div className=\"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin\" />\n                  Speaking...\n                </>\n              ) : (\n                <>\n                  <Play size={20} />\n                  Animate with Speech\n                </>\n              )}\n            </button>\n\n            <div className=\"mt-6 p-4 bg-purple-50 rounded-lg\">\n              <h3 className=\"font-semibold text-gray-800 mb-2\">How to use:</h3>\n              <ol className=\"text-sm text-gray-600 space-y-2 list-decimal list-inside\">\n                <li><strong>Draw:</strong> Create your face</li>\n                <li><strong>Rig:</strong> Drag mouth points to your drawn mouth area</li>\n                <li><strong>Animate:</strong> Click animate and watch!</li>\n              </ol>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg\">\n              <p className=\"text-sm text-yellow-800 font-medium\">\n                <strong>Debug Info:</strong><br/>\n                Mouth open: {(mouthOpenAmount * 100).toFixed(0)}%<br/>\n                Blink: {(blinkAmount * 100).toFixed(0)}%<br/>\n                Animating: {isAnimating ? 'YES' : 'NO'}<br/>\n                Total shapes: {paths.length}<br/>\n                Mouth: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && info.type === 'mouth';\n                }).length}<br/>\n                Eyes: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && (info.type === 'leftEye' || info.type === 'rightEye');\n                }).length}<br/>\n                Pupils: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && (info.type === 'leftPupil' || info.type === 'rightPupil');\n                }).length}<br/>\n                Eyebrows: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && info.type === 'eyebrow';\n                }).length}\n              </p>\n              <p className=\"text-xs text-yellow-700 mt-2\">\n                Green glow = detected, Red glow = animating\n              </p>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n              <h4 className=\"font-semibold text-gray-700 mb-2 text-sm\">Animation Zones:</h4>\n              <div className=\"text-xs text-gray-600 space-y-1\">\n                <div> <span className=\"text-pink-600\">Mouth:</span> 120px from center</div>\n                <div> <span className=\"text-purple-600\">Eyebrows:</span> 60px radius</div>\n                <div> <span className=\"text-blue-600\">Eyes:</span> 40px from eye points</div>\n                <div> <span className=\"text-cyan-600\">Pupils:</span> 15px from eye center</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}