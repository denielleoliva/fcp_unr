{"ast":null,"code":"import _objectSpread from\"/Users/denielleoliva/Downloads/fcp_unr/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{Download,Play,Trash2,Square,Circle,Pen,Move,Save,Undo}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function VectorDrawTTS(){const[tool,setTool]=useState('pen');const[mode,setMode]=useState('draw');const[color,setColor]=useState('#000000');const[penSize,setPenSize]=useState(3);const[brushStyle,setBrushStyle]=useState('solid');// 'solid', 'dashed', 'dotted', 'sketch'\nconst[paths,setPaths]=useState([]);const[pathHistory,setPathHistory]=useState([]);// For undo functionality\nconst[currentPath,setCurrentPath]=useState(null);const[isDrawing,setIsDrawing]=useState(false);const[text,setText]=useState('');const[isAnimating,setIsAnimating]=useState(false);const[mouthOpenAmount,setMouthOpenAmount]=useState(0);const[blinkAmount,setBlinkAmount]=useState(0);// 0 = open, 1 = closed\nconst[pupilOffsetX,setPupilOffsetX]=useState(0);const[pupilOffsetY,setPupilOffsetY]=useState(0);const svgRef=useRef(null);const[controlPoints,setControlPoints]=useState({// Eyes (5 points each - center + 4 corners for detailed eye shape)\nleftEyeCenter:{x:250,y:200},leftEyeTop:{x:250,y:185},leftEyeBottom:{x:250,y:215},leftEyeInner:{x:235,y:200},leftEyeOuter:{x:265,y:200},rightEyeCenter:{x:550,y:200},rightEyeTop:{x:550,y:185},rightEyeBottom:{x:550,y:215},rightEyeInner:{x:535,y:200},rightEyeOuter:{x:565,y:200},// Eyebrows (3 points each for curved brows)\nleftEyebrowInner:{x:235,y:150},leftEyebrowMiddle:{x:250,y:145},leftEyebrowOuter:{x:265,y:150},rightEyebrowInner:{x:535,y:150},rightEyebrowMiddle:{x:550,y:145},rightEyebrowOuter:{x:565,y:150},// Mouth (8 points for detailed mouth control)\nmouthLeftCorner:{x:330,y:360},mouthRightCorner:{x:470,y:360},mouthTopLeft:{x:360,y:340},mouthTopCenter:{x:400,y:335},mouthTopRight:{x:440,y:340},mouthBottomLeft:{x:360,y:380},mouthBottomCenter:{x:400,y:385},mouthBottomRight:{x:440,y:380}});const[draggingPoint,setDraggingPoint]=useState(null);// Force re-render when mouthOpenAmount changes\nuseEffect(()=>{if(isAnimating){// Force component update\n}},[mouthOpenAmount,isAnimating]);const getMousePos=e=>{const rect=svgRef.current.getBoundingClientRect();const scaleX=800/rect.width;const scaleY=600/rect.height;// Handle touch events\nlet clientX,clientY;if(e.touches&&e.touches.length>0){clientX=e.touches[0].clientX;clientY=e.touches[0].clientY;}else if(e.changedTouches&&e.changedTouches.length>0){clientX=e.changedTouches[0].clientX;clientY=e.changedTouches[0].clientY;}else{clientX=e.clientX;clientY=e.clientY;}return{x:(clientX-rect.left)*scaleX,y:(clientY-rect.top)*scaleY};};const handleMouseDown=e=>{// Prevent default touch behavior (scrolling)\nif(e.touches){e.preventDefault();}const pos=getMousePos(e);if(mode==='rig'){for(const[key,point]of Object.entries(controlPoints)){const dx=pos.x-point.x;const dy=pos.y-point.y;const dist=Math.sqrt(dx*dx+dy*dy);if(dist<15){setDraggingPoint(key);return;}}}if(mode!=='draw')return;// Handle eraser\nif(tool==='eraser'){handleEraser(pos);return;}setIsDrawing(true);if(tool==='pen'){setCurrentPath({type:'path',d:\"M \".concat(pos.x,\" \").concat(pos.y),color:color,fill:'none',stroke:color,strokeWidth:penSize,brushStyle:brushStyle});}else if(tool==='rect'){setCurrentPath({type:'rect',x:pos.x,y:pos.y,startX:pos.x,startY:pos.y,width:0,height:0,color:color,fill:color,stroke:color,strokeWidth:penSize});}else if(tool==='circle'){setCurrentPath({type:'circle',cx:pos.x,cy:pos.y,startX:pos.x,startY:pos.y,r:0,color:color,fill:color,stroke:color,strokeWidth:penSize});}};const handleMouseMove=e=>{// Prevent default touch behavior (scrolling)\nif(e.touches){e.preventDefault();}const pos=getMousePos(e);if(draggingPoint){setControlPoints(prev=>_objectSpread(_objectSpread({},prev),{},{[draggingPoint]:{x:pos.x,y:pos.y}}));return;}if(!isDrawing||!currentPath||mode!=='draw')return;if(tool==='pen'){setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{d:\"\".concat(prev.d,\" L \").concat(pos.x,\" \").concat(pos.y)}));}else if(tool==='rect'){const width=pos.x-currentPath.startX;const height=pos.y-currentPath.startY;setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{x:width<0?pos.x:prev.startX,y:height<0?pos.y:prev.startY,width:Math.abs(width),height:Math.abs(height)}));}else if(tool==='circle'){const dx=pos.x-currentPath.startX;const dy=pos.y-currentPath.startY;const radius=Math.sqrt(dx*dx+dy*dy);setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{r:radius}));}};const handleMouseUp=()=>{if(currentPath){const newPaths=[...paths,currentPath];setPaths(newPaths);setPathHistory([...pathHistory,paths]);// Save current state before adding\nsetCurrentPath(null);}setIsDrawing(false);setDraggingPoint(null);};const exportSVG=()=>{const svg=svgRef.current;const serializer=new XMLSerializer();const svgString=serializer.serializeToString(svg);const blob=new Blob([svgString],{type:'image/svg+xml'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='drawing.svg';a.click();URL.revokeObjectURL(url);};const exportJSON=()=>{const data={paths:paths,controlPoints:controlPoints};const json=JSON.stringify(data,null,2);const blob=new Blob([json],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='face-rigging.json';a.click();URL.revokeObjectURL(url);};const exportAnimationHTML=()=>{// Create standalone HTML file with animation\nconst htmlContent=\"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>Animated Face</title>\\n    <style>\\n        * {\\n            margin: 0;\\n            padding: 0;\\n            box-sizing: border-box;\\n        }\\n        body {\\n            background: #f0f0f0;\\n            display: flex;\\n            justify-content: center;\\n            align-items: center;\\n            min-height: 100vh;\\n            font-family: Arial, sans-serif;\\n        }\\n        #container {\\n            background: white;\\n            border-radius: 12px;\\n            box-shadow: 0 4px 6px rgba(0,0,0,0.1);\\n            padding: 20px;\\n        }\\n        svg {\\n            display: block;\\n            max-width: 100%;\\n            height: auto;\\n        }\\n        #controls {\\n            margin-top: 20px;\\n            text-align: center;\\n        }\\n        textarea {\\n            width: 100%;\\n            max-width: 600px;\\n            padding: 10px;\\n            border: 2px solid #ddd;\\n            border-radius: 8px;\\n            font-size: 16px;\\n            resize: vertical;\\n        }\\n        button {\\n            margin-top: 10px;\\n            padding: 12px 24px;\\n            background: #8b5cf6;\\n            color: white;\\n            border: none;\\n            border-radius: 8px;\\n            font-size: 16px;\\n            cursor: pointer;\\n            font-weight: bold;\\n        }\\n        button:hover {\\n            background: #7c3aed;\\n        }\\n        button:disabled {\\n            background: #ccc;\\n            cursor: not-allowed;\\n        }\\n    </style>\\n</head>\\n<body>\\n    <div id=\\\"container\\\">\\n        <svg id=\\\"faceSVG\\\" width=\\\"800\\\" height=\\\"600\\\" viewBox=\\\"0 0 800 600\\\">\\n            <rect width=\\\"800\\\" height=\\\"600\\\" fill=\\\"white\\\" />\\n        </svg>\\n        <div id=\\\"controls\\\">\\n            <textarea id=\\\"textInput\\\" rows=\\\"3\\\" placeholder=\\\"Enter text to speak...\\\">Hello! I am an animated face.</textarea>\\n            <br>\\n            <button id=\\\"animateBtn\\\">Animate with Speech</button>\\n        </div>\\n    </div>\\n\\n    <script>\\n        // Face data\\n        const paths = \".concat(JSON.stringify(paths),\";\\n        const controlPoints = \").concat(JSON.stringify(controlPoints),\";\\n        \\n        // Animation state\\n        let isAnimating = false;\\n        let mouthOpenAmount = 0;\\n        let blinkAmount = 0;\\n        let pupilOffsetX = 0;\\n        let pupilOffsetY = 0;\\n\\n        // Get path animation type\\n        function getPathAnimationType(path) {\\n            const cp = controlPoints;\\n            let pathCenterX, pathCenterY;\\n            \\n            if (path.type === 'circle') {\\n                pathCenterX = path.cx;\\n                pathCenterY = path.cy;\\n            } else if (path.type === 'rect') {\\n                pathCenterX = path.x + path.width / 2;\\n                pathCenterY = path.y + path.height / 2;\\n            } else if (path.type === 'path') {\\n                const points = [];\\n                const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\\n                if (commands) {\\n                    commands.forEach(cmd => {\\n                        const match = cmd.match(/([\\\\d.]+)\\\\s+([\\\\d.]+)/);\\n                        if (match) {\\n                            points.push({ x: parseFloat(match[1]), y: parseFloat(match[2]) });\\n                        }\\n                    });\\n                }\\n                if (points.length === 0) return null;\\n                const minX = Math.min(...points.map(p => p.x));\\n                const maxX = Math.max(...points.map(p => p.x));\\n                const minY = Math.min(...points.map(p => p.y));\\n                const maxY = Math.max(...points.map(p => p.y));\\n                pathCenterX = (minX + maxX) / 2;\\n                pathCenterY = (minY + maxY) / 2;\\n            } else {\\n                return null;\\n            }\\n\\n            const distanceToPoint = (px, py) => {\\n                const dx = pathCenterX - px;\\n                const dy = pathCenterY - py;\\n                return Math.sqrt(dx * dx + dy * dy);\\n            };\\n\\n            const distToLeftEye = distanceToPoint(cp.leftEye.x, cp.leftEye.y);\\n            const distToRightEye = distanceToPoint(cp.rightEye.x, cp.rightEye.y);\\n            \\n            if (distToLeftEye < 15) return { type: 'leftPupil', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\\n            if (distToRightEye < 15) return { type: 'rightPupil', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\\n            if (distToLeftEye < 40) return { type: 'leftEye', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\\n            if (distToRightEye < 40) return { type: 'rightEye', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\\n\\n            const mouthCenterX = (cp.mouthLeft.x + cp.mouthRight.x) / 2;\\n            const mouthCenterY = (cp.mouthTop.y + cp.mouthBottom.y) / 2;\\n            const distToMouth = distanceToPoint(mouthCenterX, mouthCenterY);\\n            \\n            if (distToMouth < 120) return { type: 'mouth', centerX: pathCenterX, centerY: pathCenterY };\\n\\n            const distToLeftBrow = distanceToPoint(cp.leftEyebrow.x, cp.leftEyebrow.y);\\n            const distToRightBrow = distanceToPoint(cp.rightEyebrow.x, cp.rightEyebrow.y);\\n            \\n            if (distToLeftBrow < 60 || distToRightBrow < 60) return { type: 'eyebrow' };\\n\\n            return null;\\n        }\\n\\n        // Render animated path\\n        function renderAnimatedPath(path, svg) {\\n            const animInfo = getPathAnimationType(path);\\n            let animatedPath = { ...path };\\n            \\n            if (animInfo && isAnimating) {\\n                if (animInfo.type === 'mouth' && mouthOpenAmount > 0) {\\n                    const scaleY = 1 + (mouthOpenAmount * 0.8);\\n                    if (path.type === 'circle') {\\n                        animatedPath.r = path.r * scaleY;\\n                    } else if (path.type === 'rect') {\\n                        const newHeight = path.height * scaleY;\\n                        const heightDiff = newHeight - path.height;\\n                        animatedPath.y = path.y - heightDiff / 2;\\n                        animatedPath.height = newHeight;\\n                    } else if (path.type === 'path') {\\n                        const centerY = animInfo.centerY;\\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\\n                        if (commands) {\\n                            let newD = '';\\n                            commands.forEach(cmd => {\\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\\n                                if (match) {\\n                                    const command = match[1];\\n                                    const x = parseFloat(match[2]);\\n                                    const y = parseFloat(match[3]);\\n                                    const scaledY = centerY + (y - centerY) * scaleY;\\n                                    newD += command + ' ' + x + ' ' + scaledY + ' ';\\n                                }\\n                            });\\n                            animatedPath.d = newD.trim();\\n                        }\\n                    }\\n                } else if (animInfo.type === 'eyebrow' && mouthOpenAmount > 0) {\\n                    const translateY = -5 * mouthOpenAmount;\\n                    if (path.type === 'circle') {\\n                        animatedPath.cy = path.cy + translateY;\\n                    } else if (path.type === 'rect') {\\n                        animatedPath.y = path.y + translateY;\\n                    } else if (path.type === 'path') {\\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\\n                        if (commands) {\\n                            let newD = '';\\n                            commands.forEach(cmd => {\\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\\n                                if (match) {\\n                                    const command = match[1];\\n                                    const x = parseFloat(match[2]);\\n                                    const y = parseFloat(match[3]) + translateY;\\n                                    newD += command + ' ' + x + ' ' + y + ' ';\\n                                }\\n                            });\\n                            animatedPath.d = newD.trim();\\n                        }\\n                    }\\n                } else if ((animInfo.type === 'leftEye' || animInfo.type === 'rightEye') && blinkAmount > 0) {\\n                    const scaleY = 1 - (blinkAmount * 0.9);\\n                    if (path.type === 'circle') {\\n                        animatedPath.r = path.r * scaleY;\\n                    } else if (path.type === 'rect') {\\n                        const newHeight = path.height * scaleY;\\n                        const heightDiff = path.height - newHeight;\\n                        animatedPath.y = path.y + heightDiff / 2;\\n                        animatedPath.height = newHeight;\\n                    } else if (path.type === 'path') {\\n                        const centerY = animInfo.eyeY;\\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\\n                        if (commands) {\\n                            let newD = '';\\n                            commands.forEach(cmd => {\\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\\n                                if (match) {\\n                                    const command = match[1];\\n                                    const x = parseFloat(match[2]);\\n                                    const y = parseFloat(match[3]);\\n                                    const scaledY = centerY + (y - centerY) * scaleY;\\n                                    newD += command + ' ' + x + ' ' + scaledY + ' ';\\n                                }\\n                            });\\n                            animatedPath.d = newD.trim();\\n                        }\\n                    }\\n                } else if ((animInfo.type === 'leftPupil' || animInfo.type === 'rightPupil') && (pupilOffsetX !== 0 || pupilOffsetY !== 0)) {\\n                    if (path.type === 'circle') {\\n                        animatedPath.cx = path.cx + pupilOffsetX;\\n                        animatedPath.cy = path.cy + pupilOffsetY;\\n                    } else if (path.type === 'rect') {\\n                        animatedPath.x = path.x + pupilOffsetX;\\n                        animatedPath.y = path.y + pupilOffsetY;\\n                    } else if (path.type === 'path') {\\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\\n                        if (commands) {\\n                            let newD = '';\\n                            commands.forEach(cmd => {\\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\\n                                if (match) {\\n                                    const command = match[1];\\n                                    const x = parseFloat(match[2]) + pupilOffsetX;\\n                                    const y = parseFloat(match[3]) + pupilOffsetY;\\n                                    newD += command + ' ' + x + ' ' + y + ' ';\\n                                }\\n                            });\\n                            animatedPath.d = newD.trim();\\n                        }\\n                    }\\n                }\\n            }\\n\\n            let element;\\n            if (animatedPath.type === 'path') {\\n                element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\\n                element.setAttribute('d', animatedPath.d);\\n                element.setAttribute('fill', animatedPath.fill);\\n                element.setAttribute('stroke', animatedPath.stroke);\\n                element.setAttribute('stroke-width', animatedPath.strokeWidth);\\n                element.setAttribute('stroke-linecap', 'round');\\n                element.setAttribute('stroke-linejoin', 'round');\\n            } else if (animatedPath.type === 'rect') {\\n                element = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\\n                element.setAttribute('x', animatedPath.x);\\n                element.setAttribute('y', animatedPath.y);\\n                element.setAttribute('width', animatedPath.width);\\n                element.setAttribute('height', animatedPath.height);\\n                element.setAttribute('fill', animatedPath.fill);\\n                element.setAttribute('stroke', animatedPath.stroke);\\n                element.setAttribute('stroke-width', animatedPath.strokeWidth);\\n            } else if (animatedPath.type === 'circle') {\\n                element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\\n                element.setAttribute('cx', animatedPath.cx);\\n                element.setAttribute('cy', animatedPath.cy);\\n                element.setAttribute('r', animatedPath.r);\\n                element.setAttribute('fill', animatedPath.fill);\\n                element.setAttribute('stroke', animatedPath.stroke);\\n                element.setAttribute('stroke-width', animatedPath.strokeWidth);\\n            }\\n            \\n            element.style.transition = 'all 0.1s ease-out';\\n            return element;\\n        }\\n\\n        // Render all paths\\n        function render() {\\n            const svg = document.getElementById('faceSVG');\\n            // Clear previous paths (keep background rect)\\n            while (svg.children.length > 1) {\\n                svg.removeChild(svg.lastChild);\\n            }\\n            \\n            paths.forEach(path => {\\n                const element = renderAnimatedPath(path, svg);\\n                svg.appendChild(element);\\n            });\\n        }\\n\\n        // Animation functions\\n        function animateMouth() {\\n            const amplitude = 0.5 + Math.random() * 0.5;\\n            mouthOpenAmount = amplitude;\\n            render();\\n            setTimeout(() => {\\n                mouthOpenAmount = 0;\\n                render();\\n            }, 80 + Math.random() * 120);\\n        }\\n\\n        function animateBlink() {\\n            blinkAmount = 1;\\n            render();\\n            setTimeout(() => {\\n                blinkAmount = 0;\\n                render();\\n            }, 150);\\n        }\\n\\n        function animatePupils() {\\n            const maxOffset = 3;\\n            pupilOffsetX = (Math.random() - 0.5) * maxOffset;\\n            pupilOffsetY = (Math.random() - 0.5) * maxOffset;\\n            render();\\n        }\\n\\n        // Animate with TTS\\n        function animateWithTTS() {\\n            const text = document.getElementById('textInput').value;\\n            if (!text.trim()) {\\n                alert('Please enter text to speak');\\n                return;\\n            }\\n\\n            isAnimating = true;\\n            mouthOpenAmount = 0;\\n            blinkAmount = 0;\\n            pupilOffsetX = 0;\\n            pupilOffsetY = 0;\\n            \\n            const btn = document.getElementById('animateBtn');\\n            btn.disabled = true;\\n            btn.textContent = 'Speaking...';\\n\\n            const utterance = new SpeechSynthesisUtterance(text);\\n            utterance.rate = 0.9;\\n            utterance.pitch = 1;\\n\\n            let mouthInterval, blinkInterval, pupilInterval;\\n            \\n            utterance.onstart = () => {\\n                mouthInterval = setInterval(animateMouth, 150);\\n                blinkInterval = setInterval(animateBlink, 2000 + Math.random() * 2000);\\n                pupilInterval = setInterval(animatePupils, 1000 + Math.random() * 1000);\\n            };\\n\\n            utterance.onend = () => {\\n                clearInterval(mouthInterval);\\n                clearInterval(blinkInterval);\\n                clearInterval(pupilInterval);\\n                isAnimating = false;\\n                mouthOpenAmount = 0;\\n                blinkAmount = 0;\\n                pupilOffsetX = 0;\\n                pupilOffsetY = 0;\\n                render();\\n                btn.disabled = false;\\n                btn.textContent = 'Animate with Speech';\\n            };\\n\\n            window.speechSynthesis.speak(utterance);\\n        }\\n\\n        // Initial render\\n        render();\\n\\n        // Event listener\\n        document.getElementById('animateBtn').addEventListener('click', animateWithTTS);\\n    </script>\\n</body>\\n</html>\");const blob=new Blob([htmlContent],{type:'text/html'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='animated-face.html';a.click();URL.revokeObjectURL(url);};const animateMouth=()=>{const amplitude=0.5+Math.random()*0.5;setMouthOpenAmount(amplitude);setTimeout(()=>{setMouthOpenAmount(0);},80+Math.random()*120);};const animateBlink=()=>{// Quick blink\nsetBlinkAmount(1);setTimeout(()=>{setBlinkAmount(0);},150);};const animatePupils=()=>{// Random subtle eye movement\nconst maxOffset=3;// pixels\nsetPupilOffsetX((Math.random()-0.5)*maxOffset);setPupilOffsetY((Math.random()-0.5)*maxOffset);};const animateWithTTS=async()=>{if(!text.trim()){alert('Please enter text to speak');return;}setIsAnimating(true);setMouthOpenAmount(0);setBlinkAmount(0);setPupilOffsetX(0);setPupilOffsetY(0);setMode('animate');const utterance=new SpeechSynthesisUtterance(text);utterance.rate=0.9;utterance.pitch=1;let mouthIntervalId,blinkIntervalId,pupilIntervalId;utterance.onstart=()=>{// Mouth animation\nmouthIntervalId=setInterval(()=>{animateMouth();},150);// Random blinking (every 2-4 seconds)\nblinkIntervalId=setInterval(()=>{animateBlink();},2000+Math.random()*2000);// Pupil movement (every 1-2 seconds)\npupilIntervalId=setInterval(()=>{animatePupils();},1000+Math.random()*1000);};utterance.onend=()=>{clearInterval(mouthIntervalId);clearInterval(blinkIntervalId);clearInterval(pupilIntervalId);setIsAnimating(false);setMouthOpenAmount(0);setBlinkAmount(0);setPupilOffsetX(0);setPupilOffsetY(0);};window.speechSynthesis.speak(utterance);};const clearCanvas=()=>{setPathHistory([...pathHistory,paths]);// Save before clearing\nsetPaths([]);setCurrentPath(null);};const undo=()=>{if(pathHistory.length>0){const previousState=pathHistory[pathHistory.length-1];setPaths(previousState);setPathHistory(pathHistory.slice(0,-1));}};const handleEraser=pos=>{// Find and remove path at position\nconst clickRadius=20;// Detection radius for eraser\nfor(let i=paths.length-1;i>=0;i--){const path=paths[i];let shouldDelete=false;if(path.type==='circle'){const dx=pos.x-path.cx;const dy=pos.y-path.cy;const dist=Math.sqrt(dx*dx+dy*dy);if(dist<=path.r+clickRadius)shouldDelete=true;}else if(path.type==='rect'){if(pos.x>=path.x-clickRadius&&pos.x<=path.x+path.width+clickRadius&&pos.y>=path.y-clickRadius&&pos.y<=path.y+path.height+clickRadius){shouldDelete=true;}}else if(path.type==='path'){// For paths, check if click is near any point\nconst commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){for(const cmd of commands){const match=cmd.match(/([\\d.]+)\\s+([\\d.]+)/);if(match){const px=parseFloat(match[1]);const py=parseFloat(match[2]);const dx=pos.x-px;const dy=pos.y-py;const dist=Math.sqrt(dx*dx+dy*dy);if(dist<=clickRadius){shouldDelete=true;break;}}}}}if(shouldDelete){setPathHistory([...pathHistory,paths]);// Save before erasing\nconst newPaths=[...paths];newPaths.splice(i,1);setPaths(newPaths);break;// Only erase one path at a time\n}}};const resetControlPoints=()=>{setControlPoints({// Eyes (5 points each)\nleftEyeCenter:{x:250,y:200},leftEyeTop:{x:250,y:185},leftEyeBottom:{x:250,y:215},leftEyeInner:{x:235,y:200},leftEyeOuter:{x:265,y:200},rightEyeCenter:{x:550,y:200},rightEyeTop:{x:550,y:185},rightEyeBottom:{x:550,y:215},rightEyeInner:{x:535,y:200},rightEyeOuter:{x:565,y:200},// Eyebrows (3 points each)\nleftEyebrowInner:{x:235,y:150},leftEyebrowMiddle:{x:250,y:145},leftEyebrowOuter:{x:265,y:150},rightEyebrowInner:{x:535,y:150},rightEyebrowMiddle:{x:550,y:145},rightEyebrowOuter:{x:565,y:150},// Mouth (8 points)\nmouthLeftCorner:{x:330,y:360},mouthRightCorner:{x:470,y:360},mouthTopLeft:{x:360,y:340},mouthTopCenter:{x:400,y:335},mouthTopRight:{x:440,y:340},mouthBottomLeft:{x:360,y:380},mouthBottomCenter:{x:400,y:385},mouthBottomRight:{x:440,y:380}});};const autoDetectLandmarks=()=>{if(paths.length===0){alert('Please draw something first!');return;}// Analyze all paths to find bounding boxes and centroids\nconst pathData=paths.map(path=>{let minX=Infinity,maxX=-Infinity;let minY=Infinity,maxY=-Infinity;let points=[];if(path.type==='circle'){minX=path.cx-path.r;maxX=path.cx+path.r;minY=path.cy-path.r;maxY=path.cy+path.r;points=[{x:path.cx,y:path.cy}];}else if(path.type==='rect'){minX=path.x;maxX=path.x+path.width;minY=path.y;maxY=path.y+path.height;points=[{x:path.x+path.width/2,y:path.y+path.height/2}];}else if(path.type==='path'){const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){commands.forEach(cmd=>{const match=cmd.match(/([\\d.]+)\\s+([\\d.]+)/);if(match){const x=parseFloat(match[1]);const y=parseFloat(match[2]);points.push({x,y});minX=Math.min(minX,x);maxX=Math.max(maxX,x);minY=Math.min(minY,y);maxY=Math.max(maxY,y);}});}}const centerX=(minX+maxX)/2;const centerY=(minY+maxY)/2;const width=maxX-minX;const height=maxY-minY;return{path,centerX,centerY,minX,maxX,minY,maxY,width,height,points};});// Find overall bounding box\nconst allMinX=Math.min(...pathData.map(p=>p.minX));const allMaxX=Math.max(...pathData.map(p=>p.maxX));const allMinY=Math.min(...pathData.map(p=>p.minY));const allMaxY=Math.max(...pathData.map(p=>p.maxY));const faceWidth=allMaxX-allMinX;const faceHeight=allMaxY-allMinY;const faceCenterX=(allMinX+allMaxX)/2;const faceCenterY=(allMinY+allMaxY)/2;// Divide face into regions\nconst topThird=allMinY+faceHeight*0.33;const middleThird=allMinY+faceHeight*0.66;// Find potential eyes (upper half, circular/oval shapes)\nconst potentialEyes=pathData.filter(p=>p.centerY<topThird+faceHeight*0.2&&p.centerY>allMinY&&(p.path.type==='circle'||p.width>10&&p.height>10)).sort((a,b)=>a.centerX-b.centerX);// Find potential eyebrows (above eyes, horizontal shapes)\nconst potentialEyebrows=pathData.filter(p=>p.centerY<topThird&&p.centerY>allMinY-50&&p.width>p.height).sort((a,b)=>a.centerX-b.centerX);// Find potential mouth (lower third, larger horizontal shape)\nconst potentialMouths=pathData.filter(p=>p.centerY>middleThird&&p.width>30).sort((a,b)=>b.width-a.width);const newControlPoints=_objectSpread({},controlPoints);// Set eyes\nif(potentialEyes.length>=2){const leftEye=potentialEyes[0];const rightEye=potentialEyes[potentialEyes.length>=2?1:0];// Left eye\nnewControlPoints.leftEyeCenter={x:leftEye.centerX,y:leftEye.centerY};newControlPoints.leftEyeTop={x:leftEye.centerX,y:leftEye.minY};newControlPoints.leftEyeBottom={x:leftEye.centerX,y:leftEye.maxY};newControlPoints.leftEyeInner={x:leftEye.minX,y:leftEye.centerY};newControlPoints.leftEyeOuter={x:leftEye.maxX,y:leftEye.centerY};// Right eye\nnewControlPoints.rightEyeCenter={x:rightEye.centerX,y:rightEye.centerY};newControlPoints.rightEyeTop={x:rightEye.centerX,y:rightEye.minY};newControlPoints.rightEyeBottom={x:rightEye.centerX,y:rightEye.maxY};newControlPoints.rightEyeInner={x:rightEye.minX,y:rightEye.centerY};newControlPoints.rightEyeOuter={x:rightEye.maxX,y:rightEye.centerY};}else if(potentialEyes.length===1){// Only one eye found - use it as reference\nconst eye=potentialEyes[0];if(eye.centerX<faceCenterX){// It's the left eye\nnewControlPoints.leftEyeCenter={x:eye.centerX,y:eye.centerY};newControlPoints.leftEyeTop={x:eye.centerX,y:eye.minY};newControlPoints.leftEyeBottom={x:eye.centerX,y:eye.maxY};newControlPoints.leftEyeInner={x:eye.minX,y:eye.centerY};newControlPoints.leftEyeOuter={x:eye.maxX,y:eye.centerY};}else{// It's the right eye\nnewControlPoints.rightEyeCenter={x:eye.centerX,y:eye.centerY};newControlPoints.rightEyeTop={x:eye.centerX,y:eye.minY};newControlPoints.rightEyeBottom={x:eye.centerX,y:eye.maxY};newControlPoints.rightEyeInner={x:eye.minX,y:eye.centerY};newControlPoints.rightEyeOuter={x:eye.maxX,y:eye.centerY};}}// Set eyebrows\nif(potentialEyebrows.length>=2){const leftBrow=potentialEyebrows[0];const rightBrow=potentialEyebrows[1];// Left eyebrow\nnewControlPoints.leftEyebrowInner={x:leftBrow.minX,y:leftBrow.centerY};newControlPoints.leftEyebrowMiddle={x:leftBrow.centerX,y:leftBrow.minY};newControlPoints.leftEyebrowOuter={x:leftBrow.maxX,y:leftBrow.centerY};// Right eyebrow\nnewControlPoints.rightEyebrowInner={x:rightBrow.minX,y:rightBrow.centerY};newControlPoints.rightEyebrowMiddle={x:rightBrow.centerX,y:rightBrow.minY};newControlPoints.rightEyebrowOuter={x:rightBrow.maxX,y:rightBrow.centerY};}else if(potentialEyebrows.length===1){const brow=potentialEyebrows[0];if(brow.centerX<faceCenterX){// Left eyebrow\nnewControlPoints.leftEyebrowInner={x:brow.minX,y:brow.centerY};newControlPoints.leftEyebrowMiddle={x:brow.centerX,y:brow.minY};newControlPoints.leftEyebrowOuter={x:brow.maxX,y:brow.centerY};}else{// Right eyebrow\nnewControlPoints.rightEyebrowInner={x:brow.minX,y:brow.centerY};newControlPoints.rightEyebrowMiddle={x:brow.centerX,y:brow.minY};newControlPoints.rightEyebrowOuter={x:brow.maxX,y:brow.centerY};}}// Set mouth\nif(potentialMouths.length>0){const mouth=potentialMouths[0];newControlPoints.mouthLeftCorner={x:mouth.minX,y:mouth.centerY};newControlPoints.mouthRightCorner={x:mouth.maxX,y:mouth.centerY};const mouthThirdWidth=mouth.width/3;newControlPoints.mouthTopLeft={x:mouth.minX+mouthThirdWidth,y:mouth.minY};newControlPoints.mouthTopCenter={x:mouth.centerX,y:mouth.minY};newControlPoints.mouthTopRight={x:mouth.maxX-mouthThirdWidth,y:mouth.minY};newControlPoints.mouthBottomLeft={x:mouth.minX+mouthThirdWidth,y:mouth.maxY};newControlPoints.mouthBottomCenter={x:mouth.centerX,y:mouth.maxY};newControlPoints.mouthBottomRight={x:mouth.maxX-mouthThirdWidth,y:mouth.maxY};}setControlPoints(newControlPoints);setMode('rig');// Switch to rig mode to show results\nalert('Landmarks detected! Switch to Rig Points mode to adjust if needed.');};const getBrushStyle=brushStyle=>{switch(brushStyle){case'dashed':return'10,5';case'dotted':return'2,4';case'sketch':return'8,3,2,3';default:return'none';}};const getPathAnimationType=path=>{const cp=controlPoints;let pathCenterX,pathCenterY;if(path.type==='circle'){pathCenterX=path.cx;pathCenterY=path.cy;}else if(path.type==='rect'){pathCenterX=path.x+path.width/2;pathCenterY=path.y+path.height/2;}else if(path.type==='path'){const points=[];const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){commands.forEach(cmd=>{const match=cmd.match(/([\\d.]+)\\s+([\\d.]+)/);if(match){points.push({x:parseFloat(match[1]),y:parseFloat(match[2])});}});}if(points.length===0)return null;const minX=Math.min(...points.map(p=>p.x));const maxX=Math.max(...points.map(p=>p.x));const minY=Math.min(...points.map(p=>p.y));const maxY=Math.max(...points.map(p=>p.y));pathCenterX=(minX+maxX)/2;pathCenterY=(minY+maxY)/2;}else{return null;}const distanceToPoint=(px,py)=>{const dx=pathCenterX-px;const dy=pathCenterY-py;return Math.sqrt(dx*dx+dy*dy);};// Check for pupils (very close to eye center)\nconst distToLeftEyeCenter=distanceToPoint(cp.leftEyeCenter.x,cp.leftEyeCenter.y);const distToRightEyeCenter=distanceToPoint(cp.rightEyeCenter.x,cp.rightEyeCenter.y);if(distToLeftEyeCenter<15){return{type:'leftPupil',eyeX:cp.leftEyeCenter.x,eyeY:cp.leftEyeCenter.y};}if(distToRightEyeCenter<15){return{type:'rightPupil',eyeX:cp.rightEyeCenter.x,eyeY:cp.rightEyeCenter.y};}// Check for eye shapes (near any of the 5 eye points)\nconst leftEyePoints=[cp.leftEyeCenter,cp.leftEyeTop,cp.leftEyeBottom,cp.leftEyeInner,cp.leftEyeOuter];const rightEyePoints=[cp.rightEyeCenter,cp.rightEyeTop,cp.rightEyeBottom,cp.rightEyeInner,cp.rightEyeOuter];for(const point of leftEyePoints){if(distanceToPoint(point.x,point.y)<40){return{type:'leftEye',eyeX:cp.leftEyeCenter.x,eyeY:cp.leftEyeCenter.y};}}for(const point of rightEyePoints){if(distanceToPoint(point.x,point.y)<40){return{type:'rightEye',eyeX:cp.rightEyeCenter.x,eyeY:cp.rightEyeCenter.y};}}// Check for mouth (near any of the 8 mouth points)\nconst mouthPoints=[cp.mouthLeftCorner,cp.mouthRightCorner,cp.mouthTopLeft,cp.mouthTopCenter,cp.mouthTopRight,cp.mouthBottomLeft,cp.mouthBottomCenter,cp.mouthBottomRight];// Calculate mouth center from all points\nconst mouthCenterX=mouthPoints.reduce((sum,p)=>sum+p.x,0)/mouthPoints.length;const mouthCenterY=mouthPoints.reduce((sum,p)=>sum+p.y,0)/mouthPoints.length;for(const point of mouthPoints){if(distanceToPoint(point.x,point.y)<60){return{type:'mouth',centerX:pathCenterX,centerY:pathCenterY};}}// Check for eyebrows (near any of the 3 eyebrow points)\nconst leftBrowPoints=[cp.leftEyebrowInner,cp.leftEyebrowMiddle,cp.leftEyebrowOuter];const rightBrowPoints=[cp.rightEyebrowInner,cp.rightEyebrowMiddle,cp.rightEyebrowOuter];for(const point of leftBrowPoints){if(distanceToPoint(point.x,point.y)<40){return{type:'eyebrow'};}}for(const point of rightBrowPoints){if(distanceToPoint(point.x,point.y)<40){return{type:'eyebrow'};}}return null;};const renderPath=(path,index)=>{const animInfo=getPathAnimationType(path);// Calculate animated properties directly\nlet animatedPath=_objectSpread({},path);let isAnimated=false;if(animInfo&&isAnimating&&(mouthOpenAmount>0||blinkAmount>0||pupilOffsetX!==0||pupilOffsetY!==0)){isAnimated=true;if(animInfo.type==='mouth'){// For mouth animation, scale the shape\nconst scaleY=1+mouthOpenAmount*0.8;if(path.type==='circle'){const newR=path.r*scaleY;animatedPath=_objectSpread(_objectSpread({},path),{},{r:newR});}else if(path.type==='rect'){const newHeight=path.height*scaleY;const heightDiff=newHeight-path.height;animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y-heightDiff/2,height:newHeight});}else if(path.type==='path'){const centerY=animInfo.centerY;const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3]);const scaledY=centerY+(y-centerY)*scaleY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(scaledY,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='eyebrow'){const translateY=-5*mouthOpenAmount;if(path.type==='circle'){animatedPath=_objectSpread(_objectSpread({},path),{},{cy:path.cy+translateY});}else if(path.type==='rect'){animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y+translateY});}else if(path.type==='path'){const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3])+translateY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(y,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='leftEye'||animInfo.type==='rightEye'){// Blink animation - squash eye vertically\nconst scaleY=1-blinkAmount*0.9;// Almost close completely\nif(path.type==='circle'){const centerY=path.cy;const newCy=centerY;const newR=path.r*scaleY;animatedPath=_objectSpread(_objectSpread({},path),{},{cy:newCy,r:newR});}else if(path.type==='rect'){const newHeight=path.height*scaleY;const heightDiff=path.height-newHeight;animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y+heightDiff/2,height:newHeight});}else if(path.type==='path'){const centerY=animInfo.eyeY;const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3]);const scaledY=centerY+(y-centerY)*scaleY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(scaledY,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='leftPupil'||animInfo.type==='rightPupil'){// Pupil movement\nif(path.type==='circle'){animatedPath=_objectSpread(_objectSpread({},path),{},{cx:path.cx+pupilOffsetX,cy:path.cy+pupilOffsetY});}else if(path.type==='rect'){animatedPath=_objectSpread(_objectSpread({},path),{},{x:path.x+pupilOffsetX,y:path.y+pupilOffsetY});}else if(path.type==='path'){const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2])+pupilOffsetX;const y=parseFloat(match[3])+pupilOffsetY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(y,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}}// Add highlight for shapes that are being animated (debug)\nconst debugHighlight=animInfo&&mode==='animate'?{filter:isAnimated?'drop-shadow(0 0 8px rgba(255, 0, 0, 0.8))':'drop-shadow(0 0 4px rgba(0, 255, 0, 0.5))'}:{};const transitionStyle=_objectSpread({transition:'all 0.1s ease-out'},debugHighlight);if(animatedPath.type==='path'){const strokeDasharray=animatedPath.brushStyle?getBrushStyle(animatedPath.brushStyle):'none';return/*#__PURE__*/_jsx(\"path\",{d:animatedPath.d,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,strokeDasharray:strokeDasharray,strokeLinecap:\"round\",strokeLinejoin:\"round\",style:transitionStyle},index);}else if(animatedPath.type==='rect'){return/*#__PURE__*/_jsx(\"rect\",{x:animatedPath.x,y:animatedPath.y,width:animatedPath.width,height:animatedPath.height,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,style:transitionStyle},index);}else if(animatedPath.type==='circle'){return/*#__PURE__*/_jsx(\"circle\",{cx:animatedPath.cx,cy:animatedPath.cy,r:animatedPath.r,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,style:transitionStyle},index);}};const renderControlPoint=(key,point,color,label)=>{return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"circle\",{cx:point.x,cy:point.y,r:\"12\",fill:\"white\",stroke:color,strokeWidth:\"3\",style:{cursor:mode==='rig'?'grab':'default',filter:'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'}}),/*#__PURE__*/_jsx(\"circle\",{cx:point.x,cy:point.y,r:\"6\",fill:color,opacity:\"0.8\"}),/*#__PURE__*/_jsx(\"text\",{x:point.x,y:point.y-20,textAnchor:\"middle\",fill:color,fontSize:\"11\",fontWeight:\"bold\",style:{pointerEvents:'none'},children:label})]},key);};const renderSkeleton=()=>{if(mode!=='rig')return null;const cp=controlPoints;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsxs(\"g\",{stroke:\"#64748b\",strokeWidth:\"2\",strokeDasharray:\"5,5\",opacity:\"0.5\",children:[/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyeCenter.x,y1:cp.leftEyeCenter.y,x2:cp.leftEyeTop.x,y2:cp.leftEyeTop.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyeCenter.x,y1:cp.leftEyeCenter.y,x2:cp.leftEyeBottom.x,y2:cp.leftEyeBottom.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyeCenter.x,y1:cp.leftEyeCenter.y,x2:cp.leftEyeInner.x,y2:cp.leftEyeInner.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyeCenter.x,y1:cp.leftEyeCenter.y,x2:cp.leftEyeOuter.x,y2:cp.leftEyeOuter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyeCenter.x,y1:cp.rightEyeCenter.y,x2:cp.rightEyeTop.x,y2:cp.rightEyeTop.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyeCenter.x,y1:cp.rightEyeCenter.y,x2:cp.rightEyeBottom.x,y2:cp.rightEyeBottom.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyeCenter.x,y1:cp.rightEyeCenter.y,x2:cp.rightEyeInner.x,y2:cp.rightEyeInner.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyeCenter.x,y1:cp.rightEyeCenter.y,x2:cp.rightEyeOuter.x,y2:cp.rightEyeOuter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyebrowInner.x,y1:cp.leftEyebrowInner.y,x2:cp.leftEyebrowMiddle.x,y2:cp.leftEyebrowMiddle.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyebrowMiddle.x,y1:cp.leftEyebrowMiddle.y,x2:cp.leftEyebrowOuter.x,y2:cp.leftEyebrowOuter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyebrowInner.x,y1:cp.rightEyebrowInner.y,x2:cp.rightEyebrowMiddle.x,y2:cp.rightEyebrowMiddle.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyebrowMiddle.x,y1:cp.rightEyebrowMiddle.y,x2:cp.rightEyebrowOuter.x,y2:cp.rightEyebrowOuter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyebrowMiddle.x,y1:cp.leftEyebrowMiddle.y,x2:cp.leftEyeCenter.x,y2:cp.leftEyeCenter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyebrowMiddle.x,y1:cp.rightEyebrowMiddle.y,x2:cp.rightEyeCenter.x,y2:cp.rightEyeCenter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthLeftCorner.x,y1:cp.mouthLeftCorner.y,x2:cp.mouthTopLeft.x,y2:cp.mouthTopLeft.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthTopLeft.x,y1:cp.mouthTopLeft.y,x2:cp.mouthTopCenter.x,y2:cp.mouthTopCenter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthTopCenter.x,y1:cp.mouthTopCenter.y,x2:cp.mouthTopRight.x,y2:cp.mouthTopRight.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthTopRight.x,y1:cp.mouthTopRight.y,x2:cp.mouthRightCorner.x,y2:cp.mouthRightCorner.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthRightCorner.x,y1:cp.mouthRightCorner.y,x2:cp.mouthBottomRight.x,y2:cp.mouthBottomRight.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthBottomRight.x,y1:cp.mouthBottomRight.y,x2:cp.mouthBottomCenter.x,y2:cp.mouthBottomCenter.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthBottomCenter.x,y1:cp.mouthBottomCenter.y,x2:cp.mouthBottomLeft.x,y2:cp.mouthBottomLeft.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthBottomLeft.x,y1:cp.mouthBottomLeft.y,x2:cp.mouthLeftCorner.x,y2:cp.mouthLeftCorner.y}),/*#__PURE__*/_jsx(\"line\",{x1:(cp.leftEyeCenter.x+cp.rightEyeCenter.x)/2,y1:cp.leftEyeCenter.y,x2:(cp.mouthTopCenter.x+cp.mouthBottomCenter.x)/2,y2:(cp.mouthTopCenter.y+cp.mouthBottomCenter.y)/2})]}),renderControlPoint('leftEyeCenter',cp.leftEyeCenter,'#3b82f6','LE C'),renderControlPoint('leftEyeTop',cp.leftEyeTop,'#60a5fa','LE T'),renderControlPoint('leftEyeBottom',cp.leftEyeBottom,'#60a5fa','LE B'),renderControlPoint('leftEyeInner',cp.leftEyeInner,'#60a5fa','LE I'),renderControlPoint('leftEyeOuter',cp.leftEyeOuter,'#60a5fa','LE O'),renderControlPoint('rightEyeCenter',cp.rightEyeCenter,'#3b82f6','RE C'),renderControlPoint('rightEyeTop',cp.rightEyeTop,'#60a5fa','RE T'),renderControlPoint('rightEyeBottom',cp.rightEyeBottom,'#60a5fa','RE B'),renderControlPoint('rightEyeInner',cp.rightEyeInner,'#60a5fa','RE I'),renderControlPoint('rightEyeOuter',cp.rightEyeOuter,'#60a5fa','RE O'),renderControlPoint('leftEyebrowInner',cp.leftEyebrowInner,'#8b5cf6','LB I'),renderControlPoint('leftEyebrowMiddle',cp.leftEyebrowMiddle,'#8b5cf6','LB M'),renderControlPoint('leftEyebrowOuter',cp.leftEyebrowOuter,'#8b5cf6','LB O'),renderControlPoint('rightEyebrowInner',cp.rightEyebrowInner,'#8b5cf6','RB I'),renderControlPoint('rightEyebrowMiddle',cp.rightEyebrowMiddle,'#8b5cf6','RB M'),renderControlPoint('rightEyebrowOuter',cp.rightEyebrowOuter,'#8b5cf6','RB O'),renderControlPoint('mouthLeftCorner',cp.mouthLeftCorner,'#ec4899','M LC'),renderControlPoint('mouthRightCorner',cp.mouthRightCorner,'#ec4899','M RC'),renderControlPoint('mouthTopLeft',cp.mouthTopLeft,'#f472b6','M TL'),renderControlPoint('mouthTopCenter',cp.mouthTopCenter,'#ec4899','M TC'),renderControlPoint('mouthTopRight',cp.mouthTopRight,'#f472b6','M TR'),renderControlPoint('mouthBottomLeft',cp.mouthBottomLeft,'#f472b6','M BL'),renderControlPoint('mouthBottomCenter',cp.mouthBottomCenter,'#ec4899','M BC'),renderControlPoint('mouthBottomRight',cp.mouthBottomRight,'#f472b6','M BR')]});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-800 mb-2\",children:\"Face Rigging Studio\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Draw, rig with control points, and animate with speech\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setMode('draw');setDraggingPoint(null);},className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='draw'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Pen,{className:\"inline mr-2\",size:18}),\"Draw\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMode('rig'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='rig'?'bg-blue-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Move,{className:\"inline mr-2\",size:18}),\"Rig Points\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMode('animate'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='animate'?'bg-green-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Play,{className:\"inline mr-2\",size:18}),\"Animate\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-50 rounded-lg text-sm\",children:[mode==='draw'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Draw Mode:\"}),\" Use the tools below to draw your face\"]}),mode==='rig'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rig Mode:\"}),\" Drag the control points to position them on your drawing\"]}),mode==='animate'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Animate Mode:\"}),\" Enter text and click \\\"Animate with Speech\\\"!\"]})]}),mode==='draw'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('pen'),className:\"p-3 rounded-lg transition-all \".concat(tool==='pen'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Pen,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('eraser'),className:\"p-3 rounded-lg transition-all \".concat(tool==='eraser'?'bg-red-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),title:\"Eraser Tool\",children:/*#__PURE__*/_jsx(Trash2,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('rect'),className:\"p-3 rounded-lg transition-all \".concat(tool==='rect'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Square,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('circle'),className:\"p-3 rounded-lg transition-all \".concat(tool==='circle'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Circle,{size:20})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color,onChange:e=>setColor(e.target.value),className:\"w-12 h-12 rounded cursor-pointer border-2 border-gray-300\"}),/*#__PURE__*/_jsx(\"button\",{onClick:undo,disabled:pathHistory.length===0,className:\"p-3 rounded-lg transition-all \".concat(pathHistory.length===0?'bg-gray-200 text-gray-400 cursor-not-allowed':'bg-blue-100 text-blue-600 hover:bg-blue-200'),title:\"Undo\",children:/*#__PURE__*/_jsx(Undo,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCanvas,className:\"p-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all\",title:\"Clear All\",children:/*#__PURE__*/_jsx(Trash2,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6 flex-wrap bg-gray-50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Size:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"20\",value:penSize,onChange:e=>setPenSize(parseInt(e.target.value)),className:\"w-32\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-600 w-8\",children:[penSize,\"px\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-medium text-gray-700\",children:\"Brush:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBrushStyle('solid'),className:\"px-3 py-1.5 text-xs rounded transition-all \".concat(brushStyle==='solid'?'bg-purple-600 text-white':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'),children:\"Solid\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBrushStyle('dashed'),className:\"px-3 py-1.5 text-xs rounded transition-all \".concat(brushStyle==='dashed'?'bg-purple-600 text-white':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'),children:\"Dashed\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBrushStyle('dotted'),className:\"px-3 py-1.5 text-xs rounded transition-all \".concat(brushStyle==='dotted'?'bg-purple-600 text-white':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'),children:\"Dotted\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setBrushStyle('sketch'),className:\"px-3 py-1.5 text-xs rounded transition-all \".concat(brushStyle==='sketch'?'bg-purple-600 text-white':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'),children:\"Sketch\"})]})]})]}),mode==='rig'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-4 flex-wrap\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:autoDetectLandmarks,className:\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium\",children:\"Auto Detect Landmarks\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetControlPoints,className:\"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-all\",children:\"Reset Points\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-4 border-gray-300 rounded-lg overflow-hidden bg-white relative\",children:[mode==='rig'&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-lg z-10\",children:\"Adjust by dragging the points\"}),/*#__PURE__*/_jsxs(\"svg\",{ref:svgRef,width:\"800\",height:\"600\",viewBox:\"0 0 800 600\",className:\"w-full h-auto \".concat(mode==='draw'?tool==='eraser'?'cursor-not-allowed':'cursor-crosshair':mode==='rig'?'cursor-grab':'cursor-default'),onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onTouchStart:handleMouseDown,onTouchMove:handleMouseMove,onTouchEnd:handleMouseUp,style:{touchAction:'none'},children:[/*#__PURE__*/_jsx(\"rect\",{width:\"800\",height:\"600\",fill:\"white\"}),paths.map((path,index)=>renderPath(path,index)),currentPath&&renderPath(currentPath,-1),renderSkeleton()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:exportSVG,className:\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all\",children:[/*#__PURE__*/_jsx(Download,{size:18}),\"Export SVG\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportJSON,className:\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\"Save Rigging\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportAnimationHTML,className:\"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all\",children:[/*#__PURE__*/_jsx(Download,{size:18}),\"Export Animation\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Speech Animation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Speech Text\"}),/*#__PURE__*/_jsx(\"textarea\",{value:text,onChange:e=>setText(e.target.value),placeholder:\"Enter text to speak...\",className:\"w-full h-32 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:animateWithTTS,disabled:isAnimating,className:\"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all \".concat(isAnimating?'bg-gray-300 text-gray-500 cursor-not-allowed':'bg-purple-600 text-white hover:bg-purple-700 shadow-md hover:shadow-lg'),children:isAnimating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin\"}),\"Speaking...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Play,{size:20}),\"Animate with Speech\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-purple-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:\"How to use:\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"text-sm text-gray-600 space-y-2 list-decimal list-inside\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Draw:\"}),\" Create your face\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rig:\"}),\" Drag mouth points to your drawn mouth area\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Animate:\"}),\" Click animate and watch!\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800 font-medium\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug Info:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Mouth open: \",(mouthOpenAmount*100).toFixed(0),\"%\",/*#__PURE__*/_jsx(\"br\",{}),\"Blink: \",(blinkAmount*100).toFixed(0),\"%\",/*#__PURE__*/_jsx(\"br\",{}),\"Animating: \",isAnimating?'YES':'NO',/*#__PURE__*/_jsx(\"br\",{}),\"Total shapes: \",paths.length,/*#__PURE__*/_jsx(\"br\",{}),\"Mouth: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&info.type==='mouth';}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Eyes: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&(info.type==='leftEye'||info.type==='rightEye');}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Pupils: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&(info.type==='leftPupil'||info.type==='rightPupil');}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Eyebrows: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&info.type==='eyebrow';}).length]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-yellow-700 mt-2\",children:\"Green glow = detected, Red glow = animating\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700 mb-2 text-sm\",children:\"Animation Zones:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-pink-600\",children:\"Mouth:\"}),\" 120px from center\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-600\",children:\"Eyebrows:\"}),\" 60px radius\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"Eyes:\"}),\" 40px from eye points\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-600\",children:\"Pupils:\"}),\" 15px from eye center\"]})]})]})]})]})]})});}","map":{"version":3,"names":["React","useState","useRef","useEffect","Download","Play","Trash2","Square","Circle","Pen","Move","Save","Undo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VectorDrawTTS","tool","setTool","mode","setMode","color","setColor","penSize","setPenSize","brushStyle","setBrushStyle","paths","setPaths","pathHistory","setPathHistory","currentPath","setCurrentPath","isDrawing","setIsDrawing","text","setText","isAnimating","setIsAnimating","mouthOpenAmount","setMouthOpenAmount","blinkAmount","setBlinkAmount","pupilOffsetX","setPupilOffsetX","pupilOffsetY","setPupilOffsetY","svgRef","controlPoints","setControlPoints","leftEyeCenter","x","y","leftEyeTop","leftEyeBottom","leftEyeInner","leftEyeOuter","rightEyeCenter","rightEyeTop","rightEyeBottom","rightEyeInner","rightEyeOuter","leftEyebrowInner","leftEyebrowMiddle","leftEyebrowOuter","rightEyebrowInner","rightEyebrowMiddle","rightEyebrowOuter","mouthLeftCorner","mouthRightCorner","mouthTopLeft","mouthTopCenter","mouthTopRight","mouthBottomLeft","mouthBottomCenter","mouthBottomRight","draggingPoint","setDraggingPoint","getMousePos","e","rect","current","getBoundingClientRect","scaleX","width","scaleY","height","clientX","clientY","touches","length","changedTouches","left","top","handleMouseDown","preventDefault","pos","key","point","Object","entries","dx","dy","dist","Math","sqrt","handleEraser","type","d","concat","fill","stroke","strokeWidth","startX","startY","cx","cy","r","handleMouseMove","prev","_objectSpread","abs","radius","handleMouseUp","newPaths","exportSVG","svg","serializer","XMLSerializer","svgString","serializeToString","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","exportJSON","data","json","JSON","stringify","exportAnimationHTML","htmlContent","animateMouth","amplitude","random","setTimeout","animateBlink","animatePupils","maxOffset","animateWithTTS","trim","alert","utterance","SpeechSynthesisUtterance","rate","pitch","mouthIntervalId","blinkIntervalId","pupilIntervalId","onstart","setInterval","onend","clearInterval","window","speechSynthesis","speak","clearCanvas","undo","previousState","slice","clickRadius","i","path","shouldDelete","commands","match","cmd","px","parseFloat","py","splice","resetControlPoints","autoDetectLandmarks","pathData","map","minX","Infinity","maxX","minY","maxY","points","forEach","push","min","max","centerX","centerY","allMinX","p","allMaxX","allMinY","allMaxY","faceWidth","faceHeight","faceCenterX","faceCenterY","topThird","middleThird","potentialEyes","filter","sort","b","potentialEyebrows","potentialMouths","newControlPoints","leftEye","rightEye","eye","leftBrow","rightBrow","brow","mouth","mouthThirdWidth","getBrushStyle","getPathAnimationType","cp","pathCenterX","pathCenterY","distanceToPoint","distToLeftEyeCenter","distToRightEyeCenter","eyeX","eyeY","leftEyePoints","rightEyePoints","mouthPoints","mouthCenterX","reduce","sum","mouthCenterY","leftBrowPoints","rightBrowPoints","renderPath","index","animInfo","animatedPath","isAnimated","newR","newHeight","heightDiff","newD","command","scaledY","translateY","newCy","debugHighlight","transitionStyle","transition","strokeDasharray","strokeLinecap","strokeLinejoin","style","renderControlPoint","label","children","cursor","opacity","textAnchor","fontSize","fontWeight","pointerEvents","renderSkeleton","x1","y1","x2","y2","className","onClick","size","title","value","onChange","target","disabled","parseInt","ref","viewBox","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","touchAction","placeholder","toFixed","info"],"sources":["/Users/denielleoliva/Downloads/fcp_unr/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Download, Play, Trash2, Square, Circle, Pen, Move, Save, Undo } from 'lucide-react';\n\nexport default function VectorDrawTTS() {\n  const [tool, setTool] = useState('pen');\n  const [mode, setMode] = useState('draw');\n  const [color, setColor] = useState('#000000');\n  const [penSize, setPenSize] = useState(3);\n  const [brushStyle, setBrushStyle] = useState('solid'); // 'solid', 'dashed', 'dotted', 'sketch'\n  const [paths, setPaths] = useState([]);\n  const [pathHistory, setPathHistory] = useState([]); // For undo functionality\n  const [currentPath, setCurrentPath] = useState(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [text, setText] = useState('');\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [mouthOpenAmount, setMouthOpenAmount] = useState(0);\n  const [blinkAmount, setBlinkAmount] = useState(0); // 0 = open, 1 = closed\n  const [pupilOffsetX, setPupilOffsetX] = useState(0);\n  const [pupilOffsetY, setPupilOffsetY] = useState(0);\n  const svgRef = useRef(null);\n\n  const [controlPoints, setControlPoints] = useState({\n    // Eyes (5 points each - center + 4 corners for detailed eye shape)\n    leftEyeCenter: { x: 250, y: 200 },\n    leftEyeTop: { x: 250, y: 185 },\n    leftEyeBottom: { x: 250, y: 215 },\n    leftEyeInner: { x: 235, y: 200 },\n    leftEyeOuter: { x: 265, y: 200 },\n    \n    rightEyeCenter: { x: 550, y: 200 },\n    rightEyeTop: { x: 550, y: 185 },\n    rightEyeBottom: { x: 550, y: 215 },\n    rightEyeInner: { x: 535, y: 200 },\n    rightEyeOuter: { x: 565, y: 200 },\n    \n    // Eyebrows (3 points each for curved brows)\n    leftEyebrowInner: { x: 235, y: 150 },\n    leftEyebrowMiddle: { x: 250, y: 145 },\n    leftEyebrowOuter: { x: 265, y: 150 },\n    \n    rightEyebrowInner: { x: 535, y: 150 },\n    rightEyebrowMiddle: { x: 550, y: 145 },\n    rightEyebrowOuter: { x: 565, y: 150 },\n    \n    // Mouth (8 points for detailed mouth control)\n    mouthLeftCorner: { x: 330, y: 360 },\n    mouthRightCorner: { x: 470, y: 360 },\n    mouthTopLeft: { x: 360, y: 340 },\n    mouthTopCenter: { x: 400, y: 335 },\n    mouthTopRight: { x: 440, y: 340 },\n    mouthBottomLeft: { x: 360, y: 380 },\n    mouthBottomCenter: { x: 400, y: 385 },\n    mouthBottomRight: { x: 440, y: 380 }\n  });\n\n  const [draggingPoint, setDraggingPoint] = useState(null);\n\n  // Force re-render when mouthOpenAmount changes\n  useEffect(() => {\n    if (isAnimating) {\n      // Force component update\n    }\n  }, [mouthOpenAmount, isAnimating]);\n\n  const getMousePos = (e) => {\n    const rect = svgRef.current.getBoundingClientRect();\n    const scaleX = 800 / rect.width;\n    const scaleY = 600 / rect.height;\n    \n    // Handle touch events\n    let clientX, clientY;\n    if (e.touches && e.touches.length > 0) {\n      clientX = e.touches[0].clientX;\n      clientY = e.touches[0].clientY;\n    } else if (e.changedTouches && e.changedTouches.length > 0) {\n      clientX = e.changedTouches[0].clientX;\n      clientY = e.changedTouches[0].clientY;\n    } else {\n      clientX = e.clientX;\n      clientY = e.clientY;\n    }\n    \n    return {\n      x: (clientX - rect.left) * scaleX,\n      y: (clientY - rect.top) * scaleY\n    };\n  };\n\n  const handleMouseDown = (e) => {\n    // Prevent default touch behavior (scrolling)\n    if (e.touches) {\n      e.preventDefault();\n    }\n    \n    const pos = getMousePos(e);\n\n    if (mode === 'rig') {\n      for (const [key, point] of Object.entries(controlPoints)) {\n        const dx = pos.x - point.x;\n        const dy = pos.y - point.y;\n        const dist = Math.sqrt(dx * dx + dy * dy);\n        if (dist < 15) {\n          setDraggingPoint(key);\n          return;\n        }\n      }\n    }\n\n    if (mode !== 'draw') return;\n\n    // Handle eraser\n    if (tool === 'eraser') {\n      handleEraser(pos);\n      return;\n    }\n\n    setIsDrawing(true);\n    \n    if (tool === 'pen') {\n      setCurrentPath({\n        type: 'path',\n        d: `M ${pos.x} ${pos.y}`,\n        color: color,\n        fill: 'none',\n        stroke: color,\n        strokeWidth: penSize,\n        brushStyle: brushStyle\n      });\n    } else if (tool === 'rect') {\n      setCurrentPath({\n        type: 'rect',\n        x: pos.x,\n        y: pos.y,\n        startX: pos.x,\n        startY: pos.y,\n        width: 0,\n        height: 0,\n        color: color,\n        fill: color,\n        stroke: color,\n        strokeWidth: penSize\n      });\n    } else if (tool === 'circle') {\n      setCurrentPath({\n        type: 'circle',\n        cx: pos.x,\n        cy: pos.y,\n        startX: pos.x,\n        startY: pos.y,\n        r: 0,\n        color: color,\n        fill: color,\n        stroke: color,\n        strokeWidth: penSize\n      });\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    // Prevent default touch behavior (scrolling)\n    if (e.touches) {\n      e.preventDefault();\n    }\n    \n    const pos = getMousePos(e);\n\n    if (draggingPoint) {\n      setControlPoints(prev => ({\n        ...prev,\n        [draggingPoint]: { x: pos.x, y: pos.y }\n      }));\n      return;\n    }\n\n    if (!isDrawing || !currentPath || mode !== 'draw') return;\n\n    if (tool === 'pen') {\n      setCurrentPath(prev => ({\n        ...prev,\n        d: `${prev.d} L ${pos.x} ${pos.y}`\n      }));\n    } else if (tool === 'rect') {\n      const width = pos.x - currentPath.startX;\n      const height = pos.y - currentPath.startY;\n      setCurrentPath(prev => ({\n        ...prev,\n        x: width < 0 ? pos.x : prev.startX,\n        y: height < 0 ? pos.y : prev.startY,\n        width: Math.abs(width),\n        height: Math.abs(height)\n      }));\n    } else if (tool === 'circle') {\n      const dx = pos.x - currentPath.startX;\n      const dy = pos.y - currentPath.startY;\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      setCurrentPath(prev => ({\n        ...prev,\n        r: radius\n      }));\n    }\n  };\n\n  const handleMouseUp = () => {\n    if (currentPath) {\n      const newPaths = [...paths, currentPath];\n      setPaths(newPaths);\n      setPathHistory([...pathHistory, paths]); // Save current state before adding\n      setCurrentPath(null);\n    }\n    setIsDrawing(false);\n    setDraggingPoint(null);\n  };\n\n  const exportSVG = () => {\n    const svg = svgRef.current;\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], { type: 'image/svg+xml' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'drawing.svg';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const exportJSON = () => {\n    const data = {\n      paths: paths,\n      controlPoints: controlPoints\n    };\n    const json = JSON.stringify(data, null, 2);\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'face-rigging.json';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const exportAnimationHTML = () => {\n    // Create standalone HTML file with animation\n    const htmlContent = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Animated Face</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        body {\n            background: #f0f0f0;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            min-height: 100vh;\n            font-family: Arial, sans-serif;\n        }\n        #container {\n            background: white;\n            border-radius: 12px;\n            box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n            padding: 20px;\n        }\n        svg {\n            display: block;\n            max-width: 100%;\n            height: auto;\n        }\n        #controls {\n            margin-top: 20px;\n            text-align: center;\n        }\n        textarea {\n            width: 100%;\n            max-width: 600px;\n            padding: 10px;\n            border: 2px solid #ddd;\n            border-radius: 8px;\n            font-size: 16px;\n            resize: vertical;\n        }\n        button {\n            margin-top: 10px;\n            padding: 12px 24px;\n            background: #8b5cf6;\n            color: white;\n            border: none;\n            border-radius: 8px;\n            font-size: 16px;\n            cursor: pointer;\n            font-weight: bold;\n        }\n        button:hover {\n            background: #7c3aed;\n        }\n        button:disabled {\n            background: #ccc;\n            cursor: not-allowed;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"container\">\n        <svg id=\"faceSVG\" width=\"800\" height=\"600\" viewBox=\"0 0 800 600\">\n            <rect width=\"800\" height=\"600\" fill=\"white\" />\n        </svg>\n        <div id=\"controls\">\n            <textarea id=\"textInput\" rows=\"3\" placeholder=\"Enter text to speak...\">Hello! I am an animated face.</textarea>\n            <br>\n            <button id=\"animateBtn\">Animate with Speech</button>\n        </div>\n    </div>\n\n    <script>\n        // Face data\n        const paths = ${JSON.stringify(paths)};\n        const controlPoints = ${JSON.stringify(controlPoints)};\n        \n        // Animation state\n        let isAnimating = false;\n        let mouthOpenAmount = 0;\n        let blinkAmount = 0;\n        let pupilOffsetX = 0;\n        let pupilOffsetY = 0;\n\n        // Get path animation type\n        function getPathAnimationType(path) {\n            const cp = controlPoints;\n            let pathCenterX, pathCenterY;\n            \n            if (path.type === 'circle') {\n                pathCenterX = path.cx;\n                pathCenterY = path.cy;\n            } else if (path.type === 'rect') {\n                pathCenterX = path.x + path.width / 2;\n                pathCenterY = path.y + path.height / 2;\n            } else if (path.type === 'path') {\n                const points = [];\n                const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\n                if (commands) {\n                    commands.forEach(cmd => {\n                        const match = cmd.match(/([\\\\d.]+)\\\\s+([\\\\d.]+)/);\n                        if (match) {\n                            points.push({ x: parseFloat(match[1]), y: parseFloat(match[2]) });\n                        }\n                    });\n                }\n                if (points.length === 0) return null;\n                const minX = Math.min(...points.map(p => p.x));\n                const maxX = Math.max(...points.map(p => p.x));\n                const minY = Math.min(...points.map(p => p.y));\n                const maxY = Math.max(...points.map(p => p.y));\n                pathCenterX = (minX + maxX) / 2;\n                pathCenterY = (minY + maxY) / 2;\n            } else {\n                return null;\n            }\n\n            const distanceToPoint = (px, py) => {\n                const dx = pathCenterX - px;\n                const dy = pathCenterY - py;\n                return Math.sqrt(dx * dx + dy * dy);\n            };\n\n            const distToLeftEye = distanceToPoint(cp.leftEye.x, cp.leftEye.y);\n            const distToRightEye = distanceToPoint(cp.rightEye.x, cp.rightEye.y);\n            \n            if (distToLeftEye < 15) return { type: 'leftPupil', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\n            if (distToRightEye < 15) return { type: 'rightPupil', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\n            if (distToLeftEye < 40) return { type: 'leftEye', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\n            if (distToRightEye < 40) return { type: 'rightEye', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\n\n            const mouthCenterX = (cp.mouthLeft.x + cp.mouthRight.x) / 2;\n            const mouthCenterY = (cp.mouthTop.y + cp.mouthBottom.y) / 2;\n            const distToMouth = distanceToPoint(mouthCenterX, mouthCenterY);\n            \n            if (distToMouth < 120) return { type: 'mouth', centerX: pathCenterX, centerY: pathCenterY };\n\n            const distToLeftBrow = distanceToPoint(cp.leftEyebrow.x, cp.leftEyebrow.y);\n            const distToRightBrow = distanceToPoint(cp.rightEyebrow.x, cp.rightEyebrow.y);\n            \n            if (distToLeftBrow < 60 || distToRightBrow < 60) return { type: 'eyebrow' };\n\n            return null;\n        }\n\n        // Render animated path\n        function renderAnimatedPath(path, svg) {\n            const animInfo = getPathAnimationType(path);\n            let animatedPath = { ...path };\n            \n            if (animInfo && isAnimating) {\n                if (animInfo.type === 'mouth' && mouthOpenAmount > 0) {\n                    const scaleY = 1 + (mouthOpenAmount * 0.8);\n                    if (path.type === 'circle') {\n                        animatedPath.r = path.r * scaleY;\n                    } else if (path.type === 'rect') {\n                        const newHeight = path.height * scaleY;\n                        const heightDiff = newHeight - path.height;\n                        animatedPath.y = path.y - heightDiff / 2;\n                        animatedPath.height = newHeight;\n                    } else if (path.type === 'path') {\n                        const centerY = animInfo.centerY;\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\n                        if (commands) {\n                            let newD = '';\n                            commands.forEach(cmd => {\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\n                                if (match) {\n                                    const command = match[1];\n                                    const x = parseFloat(match[2]);\n                                    const y = parseFloat(match[3]);\n                                    const scaledY = centerY + (y - centerY) * scaleY;\n                                    newD += command + ' ' + x + ' ' + scaledY + ' ';\n                                }\n                            });\n                            animatedPath.d = newD.trim();\n                        }\n                    }\n                } else if (animInfo.type === 'eyebrow' && mouthOpenAmount > 0) {\n                    const translateY = -5 * mouthOpenAmount;\n                    if (path.type === 'circle') {\n                        animatedPath.cy = path.cy + translateY;\n                    } else if (path.type === 'rect') {\n                        animatedPath.y = path.y + translateY;\n                    } else if (path.type === 'path') {\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\n                        if (commands) {\n                            let newD = '';\n                            commands.forEach(cmd => {\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\n                                if (match) {\n                                    const command = match[1];\n                                    const x = parseFloat(match[2]);\n                                    const y = parseFloat(match[3]) + translateY;\n                                    newD += command + ' ' + x + ' ' + y + ' ';\n                                }\n                            });\n                            animatedPath.d = newD.trim();\n                        }\n                    }\n                } else if ((animInfo.type === 'leftEye' || animInfo.type === 'rightEye') && blinkAmount > 0) {\n                    const scaleY = 1 - (blinkAmount * 0.9);\n                    if (path.type === 'circle') {\n                        animatedPath.r = path.r * scaleY;\n                    } else if (path.type === 'rect') {\n                        const newHeight = path.height * scaleY;\n                        const heightDiff = path.height - newHeight;\n                        animatedPath.y = path.y + heightDiff / 2;\n                        animatedPath.height = newHeight;\n                    } else if (path.type === 'path') {\n                        const centerY = animInfo.eyeY;\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\n                        if (commands) {\n                            let newD = '';\n                            commands.forEach(cmd => {\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\n                                if (match) {\n                                    const command = match[1];\n                                    const x = parseFloat(match[2]);\n                                    const y = parseFloat(match[3]);\n                                    const scaledY = centerY + (y - centerY) * scaleY;\n                                    newD += command + ' ' + x + ' ' + scaledY + ' ';\n                                }\n                            });\n                            animatedPath.d = newD.trim();\n                        }\n                    }\n                } else if ((animInfo.type === 'leftPupil' || animInfo.type === 'rightPupil') && (pupilOffsetX !== 0 || pupilOffsetY !== 0)) {\n                    if (path.type === 'circle') {\n                        animatedPath.cx = path.cx + pupilOffsetX;\n                        animatedPath.cy = path.cy + pupilOffsetY;\n                    } else if (path.type === 'rect') {\n                        animatedPath.x = path.x + pupilOffsetX;\n                        animatedPath.y = path.y + pupilOffsetY;\n                    } else if (path.type === 'path') {\n                        const commands = path.d.match(/[ML]\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/g);\n                        if (commands) {\n                            let newD = '';\n                            commands.forEach(cmd => {\n                                const match = cmd.match(/([ML])\\\\s*([\\\\d.]+)\\\\s+([\\\\d.]+)/);\n                                if (match) {\n                                    const command = match[1];\n                                    const x = parseFloat(match[2]) + pupilOffsetX;\n                                    const y = parseFloat(match[3]) + pupilOffsetY;\n                                    newD += command + ' ' + x + ' ' + y + ' ';\n                                }\n                            });\n                            animatedPath.d = newD.trim();\n                        }\n                    }\n                }\n            }\n\n            let element;\n            if (animatedPath.type === 'path') {\n                element = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                element.setAttribute('d', animatedPath.d);\n                element.setAttribute('fill', animatedPath.fill);\n                element.setAttribute('stroke', animatedPath.stroke);\n                element.setAttribute('stroke-width', animatedPath.strokeWidth);\n                element.setAttribute('stroke-linecap', 'round');\n                element.setAttribute('stroke-linejoin', 'round');\n            } else if (animatedPath.type === 'rect') {\n                element = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n                element.setAttribute('x', animatedPath.x);\n                element.setAttribute('y', animatedPath.y);\n                element.setAttribute('width', animatedPath.width);\n                element.setAttribute('height', animatedPath.height);\n                element.setAttribute('fill', animatedPath.fill);\n                element.setAttribute('stroke', animatedPath.stroke);\n                element.setAttribute('stroke-width', animatedPath.strokeWidth);\n            } else if (animatedPath.type === 'circle') {\n                element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n                element.setAttribute('cx', animatedPath.cx);\n                element.setAttribute('cy', animatedPath.cy);\n                element.setAttribute('r', animatedPath.r);\n                element.setAttribute('fill', animatedPath.fill);\n                element.setAttribute('stroke', animatedPath.stroke);\n                element.setAttribute('stroke-width', animatedPath.strokeWidth);\n            }\n            \n            element.style.transition = 'all 0.1s ease-out';\n            return element;\n        }\n\n        // Render all paths\n        function render() {\n            const svg = document.getElementById('faceSVG');\n            // Clear previous paths (keep background rect)\n            while (svg.children.length > 1) {\n                svg.removeChild(svg.lastChild);\n            }\n            \n            paths.forEach(path => {\n                const element = renderAnimatedPath(path, svg);\n                svg.appendChild(element);\n            });\n        }\n\n        // Animation functions\n        function animateMouth() {\n            const amplitude = 0.5 + Math.random() * 0.5;\n            mouthOpenAmount = amplitude;\n            render();\n            setTimeout(() => {\n                mouthOpenAmount = 0;\n                render();\n            }, 80 + Math.random() * 120);\n        }\n\n        function animateBlink() {\n            blinkAmount = 1;\n            render();\n            setTimeout(() => {\n                blinkAmount = 0;\n                render();\n            }, 150);\n        }\n\n        function animatePupils() {\n            const maxOffset = 3;\n            pupilOffsetX = (Math.random() - 0.5) * maxOffset;\n            pupilOffsetY = (Math.random() - 0.5) * maxOffset;\n            render();\n        }\n\n        // Animate with TTS\n        function animateWithTTS() {\n            const text = document.getElementById('textInput').value;\n            if (!text.trim()) {\n                alert('Please enter text to speak');\n                return;\n            }\n\n            isAnimating = true;\n            mouthOpenAmount = 0;\n            blinkAmount = 0;\n            pupilOffsetX = 0;\n            pupilOffsetY = 0;\n            \n            const btn = document.getElementById('animateBtn');\n            btn.disabled = true;\n            btn.textContent = 'Speaking...';\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.rate = 0.9;\n            utterance.pitch = 1;\n\n            let mouthInterval, blinkInterval, pupilInterval;\n            \n            utterance.onstart = () => {\n                mouthInterval = setInterval(animateMouth, 150);\n                blinkInterval = setInterval(animateBlink, 2000 + Math.random() * 2000);\n                pupilInterval = setInterval(animatePupils, 1000 + Math.random() * 1000);\n            };\n\n            utterance.onend = () => {\n                clearInterval(mouthInterval);\n                clearInterval(blinkInterval);\n                clearInterval(pupilInterval);\n                isAnimating = false;\n                mouthOpenAmount = 0;\n                blinkAmount = 0;\n                pupilOffsetX = 0;\n                pupilOffsetY = 0;\n                render();\n                btn.disabled = false;\n                btn.textContent = 'Animate with Speech';\n            };\n\n            window.speechSynthesis.speak(utterance);\n        }\n\n        // Initial render\n        render();\n\n        // Event listener\n        document.getElementById('animateBtn').addEventListener('click', animateWithTTS);\n    </script>\n</body>\n</html>`;\n\n    const blob = new Blob([htmlContent], { type: 'text/html' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'animated-face.html';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const animateMouth = () => {\n    const amplitude = 0.5 + Math.random() * 0.5;\n    setMouthOpenAmount(amplitude);\n    \n    setTimeout(() => {\n      setMouthOpenAmount(0);\n    }, 80 + Math.random() * 120);\n  };\n\n  const animateBlink = () => {\n    // Quick blink\n    setBlinkAmount(1);\n    setTimeout(() => {\n      setBlinkAmount(0);\n    }, 150);\n  };\n\n  const animatePupils = () => {\n    // Random subtle eye movement\n    const maxOffset = 3; // pixels\n    setPupilOffsetX((Math.random() - 0.5) * maxOffset);\n    setPupilOffsetY((Math.random() - 0.5) * maxOffset);\n  };\n\n  const animateWithTTS = async () => {\n    if (!text.trim()) {\n      alert('Please enter text to speak');\n      return;\n    }\n\n    setIsAnimating(true);\n    setMouthOpenAmount(0);\n    setBlinkAmount(0);\n    setPupilOffsetX(0);\n    setPupilOffsetY(0);\n    setMode('animate');\n\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.rate = 0.9;\n    utterance.pitch = 1;\n\n    let mouthIntervalId, blinkIntervalId, pupilIntervalId;\n    \n    utterance.onstart = () => {\n      // Mouth animation\n      mouthIntervalId = setInterval(() => {\n        animateMouth();\n      }, 150);\n      \n      // Random blinking (every 2-4 seconds)\n      blinkIntervalId = setInterval(() => {\n        animateBlink();\n      }, 2000 + Math.random() * 2000);\n      \n      // Pupil movement (every 1-2 seconds)\n      pupilIntervalId = setInterval(() => {\n        animatePupils();\n      }, 1000 + Math.random() * 1000);\n    };\n\n    utterance.onend = () => {\n      clearInterval(mouthIntervalId);\n      clearInterval(blinkIntervalId);\n      clearInterval(pupilIntervalId);\n      setIsAnimating(false);\n      setMouthOpenAmount(0);\n      setBlinkAmount(0);\n      setPupilOffsetX(0);\n      setPupilOffsetY(0);\n    };\n\n    window.speechSynthesis.speak(utterance);\n  };\n\n  const clearCanvas = () => {\n    setPathHistory([...pathHistory, paths]); // Save before clearing\n    setPaths([]);\n    setCurrentPath(null);\n  };\n\n  const undo = () => {\n    if (pathHistory.length > 0) {\n      const previousState = pathHistory[pathHistory.length - 1];\n      setPaths(previousState);\n      setPathHistory(pathHistory.slice(0, -1));\n    }\n  };\n\n  const handleEraser = (pos) => {\n    // Find and remove path at position\n    const clickRadius = 20; // Detection radius for eraser\n    \n    for (let i = paths.length - 1; i >= 0; i--) {\n      const path = paths[i];\n      let shouldDelete = false;\n      \n      if (path.type === 'circle') {\n        const dx = pos.x - path.cx;\n        const dy = pos.y - path.cy;\n        const dist = Math.sqrt(dx * dx + dy * dy);\n        if (dist <= path.r + clickRadius) shouldDelete = true;\n      } else if (path.type === 'rect') {\n        if (pos.x >= path.x - clickRadius && \n            pos.x <= path.x + path.width + clickRadius &&\n            pos.y >= path.y - clickRadius && \n            pos.y <= path.y + path.height + clickRadius) {\n          shouldDelete = true;\n        }\n      } else if (path.type === 'path') {\n        // For paths, check if click is near any point\n        const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n        if (commands) {\n          for (const cmd of commands) {\n            const match = cmd.match(/([\\d.]+)\\s+([\\d.]+)/);\n            if (match) {\n              const px = parseFloat(match[1]);\n              const py = parseFloat(match[2]);\n              const dx = pos.x - px;\n              const dy = pos.y - py;\n              const dist = Math.sqrt(dx * dx + dy * dy);\n              if (dist <= clickRadius) {\n                shouldDelete = true;\n                break;\n              }\n            }\n          }\n        }\n      }\n      \n      if (shouldDelete) {\n        setPathHistory([...pathHistory, paths]); // Save before erasing\n        const newPaths = [...paths];\n        newPaths.splice(i, 1);\n        setPaths(newPaths);\n        break; // Only erase one path at a time\n      }\n    }\n  };\n\n  const resetControlPoints = () => {\n    setControlPoints({\n      // Eyes (5 points each)\n      leftEyeCenter: { x: 250, y: 200 },\n      leftEyeTop: { x: 250, y: 185 },\n      leftEyeBottom: { x: 250, y: 215 },\n      leftEyeInner: { x: 235, y: 200 },\n      leftEyeOuter: { x: 265, y: 200 },\n      \n      rightEyeCenter: { x: 550, y: 200 },\n      rightEyeTop: { x: 550, y: 185 },\n      rightEyeBottom: { x: 550, y: 215 },\n      rightEyeInner: { x: 535, y: 200 },\n      rightEyeOuter: { x: 565, y: 200 },\n      \n      // Eyebrows (3 points each)\n      leftEyebrowInner: { x: 235, y: 150 },\n      leftEyebrowMiddle: { x: 250, y: 145 },\n      leftEyebrowOuter: { x: 265, y: 150 },\n      \n      rightEyebrowInner: { x: 535, y: 150 },\n      rightEyebrowMiddle: { x: 550, y: 145 },\n      rightEyebrowOuter: { x: 565, y: 150 },\n      \n      // Mouth (8 points)\n      mouthLeftCorner: { x: 330, y: 360 },\n      mouthRightCorner: { x: 470, y: 360 },\n      mouthTopLeft: { x: 360, y: 340 },\n      mouthTopCenter: { x: 400, y: 335 },\n      mouthTopRight: { x: 440, y: 340 },\n      mouthBottomLeft: { x: 360, y: 380 },\n      mouthBottomCenter: { x: 400, y: 385 },\n      mouthBottomRight: { x: 440, y: 380 }\n    });\n  };\n\n  const autoDetectLandmarks = () => {\n    if (paths.length === 0) {\n      alert('Please draw something first!');\n      return;\n    }\n\n    // Analyze all paths to find bounding boxes and centroids\n    const pathData = paths.map(path => {\n      let minX = Infinity, maxX = -Infinity;\n      let minY = Infinity, maxY = -Infinity;\n      let points = [];\n\n      if (path.type === 'circle') {\n        minX = path.cx - path.r;\n        maxX = path.cx + path.r;\n        minY = path.cy - path.r;\n        maxY = path.cy + path.r;\n        points = [{ x: path.cx, y: path.cy }];\n      } else if (path.type === 'rect') {\n        minX = path.x;\n        maxX = path.x + path.width;\n        minY = path.y;\n        maxY = path.y + path.height;\n        points = [{ x: path.x + path.width / 2, y: path.y + path.height / 2 }];\n      } else if (path.type === 'path') {\n        const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n        if (commands) {\n          commands.forEach(cmd => {\n            const match = cmd.match(/([\\d.]+)\\s+([\\d.]+)/);\n            if (match) {\n              const x = parseFloat(match[1]);\n              const y = parseFloat(match[2]);\n              points.push({ x, y });\n              minX = Math.min(minX, x);\n              maxX = Math.max(maxX, x);\n              minY = Math.min(minY, y);\n              maxY = Math.max(maxY, y);\n            }\n          });\n        }\n      }\n\n      const centerX = (minX + maxX) / 2;\n      const centerY = (minY + maxY) / 2;\n      const width = maxX - minX;\n      const height = maxY - minY;\n\n      return {\n        path,\n        centerX,\n        centerY,\n        minX,\n        maxX,\n        minY,\n        maxY,\n        width,\n        height,\n        points\n      };\n    });\n\n    // Find overall bounding box\n    const allMinX = Math.min(...pathData.map(p => p.minX));\n    const allMaxX = Math.max(...pathData.map(p => p.maxX));\n    const allMinY = Math.min(...pathData.map(p => p.minY));\n    const allMaxY = Math.max(...pathData.map(p => p.maxY));\n    \n    const faceWidth = allMaxX - allMinX;\n    const faceHeight = allMaxY - allMinY;\n    const faceCenterX = (allMinX + allMaxX) / 2;\n    const faceCenterY = (allMinY + allMaxY) / 2;\n\n    // Divide face into regions\n    const topThird = allMinY + faceHeight * 0.33;\n    const middleThird = allMinY + faceHeight * 0.66;\n\n    // Find potential eyes (upper half, circular/oval shapes)\n    const potentialEyes = pathData.filter(p => \n      p.centerY < topThird + faceHeight * 0.2 &&\n      p.centerY > allMinY &&\n      (p.path.type === 'circle' || (p.width > 10 && p.height > 10))\n    ).sort((a, b) => a.centerX - b.centerX);\n\n    // Find potential eyebrows (above eyes, horizontal shapes)\n    const potentialEyebrows = pathData.filter(p =>\n      p.centerY < topThird &&\n      p.centerY > allMinY - 50 &&\n      p.width > p.height\n    ).sort((a, b) => a.centerX - b.centerX);\n\n    // Find potential mouth (lower third, larger horizontal shape)\n    const potentialMouths = pathData.filter(p =>\n      p.centerY > middleThird &&\n      p.width > 30\n    ).sort((a, b) => b.width - a.width);\n\n    const newControlPoints = { ...controlPoints };\n\n    // Set eyes\n    if (potentialEyes.length >= 2) {\n      const leftEye = potentialEyes[0];\n      const rightEye = potentialEyes[potentialEyes.length >= 2 ? 1 : 0];\n      \n      // Left eye\n      newControlPoints.leftEyeCenter = { x: leftEye.centerX, y: leftEye.centerY };\n      newControlPoints.leftEyeTop = { x: leftEye.centerX, y: leftEye.minY };\n      newControlPoints.leftEyeBottom = { x: leftEye.centerX, y: leftEye.maxY };\n      newControlPoints.leftEyeInner = { x: leftEye.minX, y: leftEye.centerY };\n      newControlPoints.leftEyeOuter = { x: leftEye.maxX, y: leftEye.centerY };\n      \n      // Right eye\n      newControlPoints.rightEyeCenter = { x: rightEye.centerX, y: rightEye.centerY };\n      newControlPoints.rightEyeTop = { x: rightEye.centerX, y: rightEye.minY };\n      newControlPoints.rightEyeBottom = { x: rightEye.centerX, y: rightEye.maxY };\n      newControlPoints.rightEyeInner = { x: rightEye.minX, y: rightEye.centerY };\n      newControlPoints.rightEyeOuter = { x: rightEye.maxX, y: rightEye.centerY };\n    } else if (potentialEyes.length === 1) {\n      // Only one eye found - use it as reference\n      const eye = potentialEyes[0];\n      if (eye.centerX < faceCenterX) {\n        // It's the left eye\n        newControlPoints.leftEyeCenter = { x: eye.centerX, y: eye.centerY };\n        newControlPoints.leftEyeTop = { x: eye.centerX, y: eye.minY };\n        newControlPoints.leftEyeBottom = { x: eye.centerX, y: eye.maxY };\n        newControlPoints.leftEyeInner = { x: eye.minX, y: eye.centerY };\n        newControlPoints.leftEyeOuter = { x: eye.maxX, y: eye.centerY };\n      } else {\n        // It's the right eye\n        newControlPoints.rightEyeCenter = { x: eye.centerX, y: eye.centerY };\n        newControlPoints.rightEyeTop = { x: eye.centerX, y: eye.minY };\n        newControlPoints.rightEyeBottom = { x: eye.centerX, y: eye.maxY };\n        newControlPoints.rightEyeInner = { x: eye.minX, y: eye.centerY };\n        newControlPoints.rightEyeOuter = { x: eye.maxX, y: eye.centerY };\n      }\n    }\n\n    // Set eyebrows\n    if (potentialEyebrows.length >= 2) {\n      const leftBrow = potentialEyebrows[0];\n      const rightBrow = potentialEyebrows[1];\n      \n      // Left eyebrow\n      newControlPoints.leftEyebrowInner = { x: leftBrow.minX, y: leftBrow.centerY };\n      newControlPoints.leftEyebrowMiddle = { x: leftBrow.centerX, y: leftBrow.minY };\n      newControlPoints.leftEyebrowOuter = { x: leftBrow.maxX, y: leftBrow.centerY };\n      \n      // Right eyebrow\n      newControlPoints.rightEyebrowInner = { x: rightBrow.minX, y: rightBrow.centerY };\n      newControlPoints.rightEyebrowMiddle = { x: rightBrow.centerX, y: rightBrow.minY };\n      newControlPoints.rightEyebrowOuter = { x: rightBrow.maxX, y: rightBrow.centerY };\n    } else if (potentialEyebrows.length === 1) {\n      const brow = potentialEyebrows[0];\n      if (brow.centerX < faceCenterX) {\n        // Left eyebrow\n        newControlPoints.leftEyebrowInner = { x: brow.minX, y: brow.centerY };\n        newControlPoints.leftEyebrowMiddle = { x: brow.centerX, y: brow.minY };\n        newControlPoints.leftEyebrowOuter = { x: brow.maxX, y: brow.centerY };\n      } else {\n        // Right eyebrow\n        newControlPoints.rightEyebrowInner = { x: brow.minX, y: brow.centerY };\n        newControlPoints.rightEyebrowMiddle = { x: brow.centerX, y: brow.minY };\n        newControlPoints.rightEyebrowOuter = { x: brow.maxX, y: brow.centerY };\n      }\n    }\n\n    // Set mouth\n    if (potentialMouths.length > 0) {\n      const mouth = potentialMouths[0];\n      \n      newControlPoints.mouthLeftCorner = { x: mouth.minX, y: mouth.centerY };\n      newControlPoints.mouthRightCorner = { x: mouth.maxX, y: mouth.centerY };\n      \n      const mouthThirdWidth = mouth.width / 3;\n      newControlPoints.mouthTopLeft = { x: mouth.minX + mouthThirdWidth, y: mouth.minY };\n      newControlPoints.mouthTopCenter = { x: mouth.centerX, y: mouth.minY };\n      newControlPoints.mouthTopRight = { x: mouth.maxX - mouthThirdWidth, y: mouth.minY };\n      \n      newControlPoints.mouthBottomLeft = { x: mouth.minX + mouthThirdWidth, y: mouth.maxY };\n      newControlPoints.mouthBottomCenter = { x: mouth.centerX, y: mouth.maxY };\n      newControlPoints.mouthBottomRight = { x: mouth.maxX - mouthThirdWidth, y: mouth.maxY };\n    }\n\n    setControlPoints(newControlPoints);\n    setMode('rig'); // Switch to rig mode to show results\n    alert('Landmarks detected! Switch to Rig Points mode to adjust if needed.');\n  };\n\n  const getBrushStyle = (brushStyle) => {\n    switch(brushStyle) {\n      case 'dashed':\n        return '10,5';\n      case 'dotted':\n        return '2,4';\n      case 'sketch':\n        return '8,3,2,3';\n      default:\n        return 'none';\n    }\n  };\n\n  const getPathAnimationType = (path) => {\n    const cp = controlPoints;\n    \n    let pathCenterX, pathCenterY;\n    if (path.type === 'circle') {\n      pathCenterX = path.cx;\n      pathCenterY = path.cy;\n    } else if (path.type === 'rect') {\n      pathCenterX = path.x + path.width / 2;\n      pathCenterY = path.y + path.height / 2;\n    } else if (path.type === 'path') {\n      const points = [];\n      const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n      \n      if (commands) {\n        commands.forEach(cmd => {\n          const match = cmd.match(/([\\d.]+)\\s+([\\d.]+)/);\n          if (match) {\n            points.push({\n              x: parseFloat(match[1]),\n              y: parseFloat(match[2])\n            });\n          }\n        });\n      }\n      \n      if (points.length === 0) return null;\n      \n      const minX = Math.min(...points.map(p => p.x));\n      const maxX = Math.max(...points.map(p => p.x));\n      const minY = Math.min(...points.map(p => p.y));\n      const maxY = Math.max(...points.map(p => p.y));\n      \n      pathCenterX = (minX + maxX) / 2;\n      pathCenterY = (minY + maxY) / 2;\n    } else {\n      return null;\n    }\n\n    const distanceToPoint = (px, py) => {\n      const dx = pathCenterX - px;\n      const dy = pathCenterY - py;\n      return Math.sqrt(dx * dx + dy * dy);\n    };\n\n    // Check for pupils (very close to eye center)\n    const distToLeftEyeCenter = distanceToPoint(cp.leftEyeCenter.x, cp.leftEyeCenter.y);\n    const distToRightEyeCenter = distanceToPoint(cp.rightEyeCenter.x, cp.rightEyeCenter.y);\n    \n    if (distToLeftEyeCenter < 15) {\n      return { type: 'leftPupil', eyeX: cp.leftEyeCenter.x, eyeY: cp.leftEyeCenter.y };\n    }\n    if (distToRightEyeCenter < 15) {\n      return { type: 'rightPupil', eyeX: cp.rightEyeCenter.x, eyeY: cp.rightEyeCenter.y };\n    }\n\n    // Check for eye shapes (near any of the 5 eye points)\n    const leftEyePoints = [cp.leftEyeCenter, cp.leftEyeTop, cp.leftEyeBottom, cp.leftEyeInner, cp.leftEyeOuter];\n    const rightEyePoints = [cp.rightEyeCenter, cp.rightEyeTop, cp.rightEyeBottom, cp.rightEyeInner, cp.rightEyeOuter];\n    \n    for (const point of leftEyePoints) {\n      if (distanceToPoint(point.x, point.y) < 40) {\n        return { type: 'leftEye', eyeX: cp.leftEyeCenter.x, eyeY: cp.leftEyeCenter.y };\n      }\n    }\n    \n    for (const point of rightEyePoints) {\n      if (distanceToPoint(point.x, point.y) < 40) {\n        return { type: 'rightEye', eyeX: cp.rightEyeCenter.x, eyeY: cp.rightEyeCenter.y };\n      }\n    }\n\n    // Check for mouth (near any of the 8 mouth points)\n    const mouthPoints = [\n      cp.mouthLeftCorner, cp.mouthRightCorner,\n      cp.mouthTopLeft, cp.mouthTopCenter, cp.mouthTopRight,\n      cp.mouthBottomLeft, cp.mouthBottomCenter, cp.mouthBottomRight\n    ];\n    \n    // Calculate mouth center from all points\n    const mouthCenterX = mouthPoints.reduce((sum, p) => sum + p.x, 0) / mouthPoints.length;\n    const mouthCenterY = mouthPoints.reduce((sum, p) => sum + p.y, 0) / mouthPoints.length;\n    \n    for (const point of mouthPoints) {\n      if (distanceToPoint(point.x, point.y) < 60) {\n        return { type: 'mouth', centerX: pathCenterX, centerY: pathCenterY };\n      }\n    }\n\n    // Check for eyebrows (near any of the 3 eyebrow points)\n    const leftBrowPoints = [cp.leftEyebrowInner, cp.leftEyebrowMiddle, cp.leftEyebrowOuter];\n    const rightBrowPoints = [cp.rightEyebrowInner, cp.rightEyebrowMiddle, cp.rightEyebrowOuter];\n    \n    for (const point of leftBrowPoints) {\n      if (distanceToPoint(point.x, point.y) < 40) {\n        return { type: 'eyebrow' };\n      }\n    }\n    \n    for (const point of rightBrowPoints) {\n      if (distanceToPoint(point.x, point.y) < 40) {\n        return { type: 'eyebrow' };\n      }\n    }\n\n    return null;\n  };\n\n  const renderPath = (path, index) => {\n    const animInfo = getPathAnimationType(path);\n    \n    // Calculate animated properties directly\n    let animatedPath = { ...path };\n    let isAnimated = false;\n    \n    if (animInfo && isAnimating && (mouthOpenAmount > 0 || blinkAmount > 0 || pupilOffsetX !== 0 || pupilOffsetY !== 0)) {\n      isAnimated = true;\n      \n      if (animInfo.type === 'mouth') {\n        // For mouth animation, scale the shape\n        const scaleY = 1 + (mouthOpenAmount * 0.8);\n        \n        if (path.type === 'circle') {\n          const newR = path.r * scaleY;\n          animatedPath = { ...path, r: newR };\n        } else if (path.type === 'rect') {\n          const newHeight = path.height * scaleY;\n          const heightDiff = newHeight - path.height;\n          animatedPath = { ...path, y: path.y - heightDiff / 2, height: newHeight };\n        } else if (path.type === 'path') {\n          const centerY = animInfo.centerY;\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]);\n                const scaledY = centerY + (y - centerY) * scaleY;\n                newD += `${command} ${x} ${scaledY} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'eyebrow') {\n        const translateY = -5 * mouthOpenAmount;\n        \n        if (path.type === 'circle') {\n          animatedPath = { ...path, cy: path.cy + translateY };\n        } else if (path.type === 'rect') {\n          animatedPath = { ...path, y: path.y + translateY };\n        } else if (path.type === 'path') {\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]) + translateY;\n                newD += `${command} ${x} ${y} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'leftEye' || animInfo.type === 'rightEye') {\n        // Blink animation - squash eye vertically\n        const scaleY = 1 - (blinkAmount * 0.9); // Almost close completely\n        \n        if (path.type === 'circle') {\n          const centerY = path.cy;\n          const newCy = centerY;\n          const newR = path.r * scaleY;\n          animatedPath = { ...path, cy: newCy, r: newR };\n        } else if (path.type === 'rect') {\n          const newHeight = path.height * scaleY;\n          const heightDiff = path.height - newHeight;\n          animatedPath = { ...path, y: path.y + heightDiff / 2, height: newHeight };\n        } else if (path.type === 'path') {\n          const centerY = animInfo.eyeY;\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]);\n                const scaledY = centerY + (y - centerY) * scaleY;\n                newD += `${command} ${x} ${scaledY} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'leftPupil' || animInfo.type === 'rightPupil') {\n        // Pupil movement\n        if (path.type === 'circle') {\n          animatedPath = { \n            ...path, \n            cx: path.cx + pupilOffsetX,\n            cy: path.cy + pupilOffsetY\n          };\n        } else if (path.type === 'rect') {\n          animatedPath = { \n            ...path, \n            x: path.x + pupilOffsetX,\n            y: path.y + pupilOffsetY\n          };\n        } else if (path.type === 'path') {\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]) + pupilOffsetX;\n                const y = parseFloat(match[3]) + pupilOffsetY;\n                newD += `${command} ${x} ${y} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      }\n    }\n\n    // Add highlight for shapes that are being animated (debug)\n    const debugHighlight = animInfo && mode === 'animate' ? {\n      filter: isAnimated ? 'drop-shadow(0 0 8px rgba(255, 0, 0, 0.8))' : 'drop-shadow(0 0 4px rgba(0, 255, 0, 0.5))'\n    } : {};\n\n    const transitionStyle = {\n      transition: 'all 0.1s ease-out',\n      ...debugHighlight\n    };\n\n    if (animatedPath.type === 'path') {\n      const strokeDasharray = animatedPath.brushStyle ? getBrushStyle(animatedPath.brushStyle) : 'none';\n      return (\n        <path\n          key={index}\n          d={animatedPath.d}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          strokeDasharray={strokeDasharray}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          style={transitionStyle}\n        />\n      );\n    } else if (animatedPath.type === 'rect') {\n      return (\n        <rect\n          key={index}\n          x={animatedPath.x}\n          y={animatedPath.y}\n          width={animatedPath.width}\n          height={animatedPath.height}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          style={transitionStyle}\n        />\n      );\n    } else if (animatedPath.type === 'circle') {\n      return (\n        <circle\n          key={index}\n          cx={animatedPath.cx}\n          cy={animatedPath.cy}\n          r={animatedPath.r}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          style={transitionStyle}\n        />\n      );\n    }\n  };\n\n  const renderControlPoint = (key, point, color, label) => {\n    return (\n      <g key={key}>\n        <circle\n          cx={point.x}\n          cy={point.y}\n          r=\"12\"\n          fill=\"white\"\n          stroke={color}\n          strokeWidth=\"3\"\n          style={{\n            cursor: mode === 'rig' ? 'grab' : 'default',\n            filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'\n          }}\n        />\n        <circle\n          cx={point.x}\n          cy={point.y}\n          r=\"6\"\n          fill={color}\n          opacity=\"0.8\"\n        />\n        <text\n          x={point.x}\n          y={point.y - 20}\n          textAnchor=\"middle\"\n          fill={color}\n          fontSize=\"11\"\n          fontWeight=\"bold\"\n          style={{ pointerEvents: 'none' }}\n        >\n          {label}\n        </text>\n      </g>\n    );\n  };\n\n  const renderSkeleton = () => {\n    if (mode !== 'rig') return null;\n\n    const cp = controlPoints;\n    \n    return (\n      <g>\n        {/* Connection lines */}\n        <g stroke=\"#64748b\" strokeWidth=\"2\" strokeDasharray=\"5,5\" opacity=\"0.5\">\n          {/* Left eye shape */}\n          <line x1={cp.leftEyeCenter.x} y1={cp.leftEyeCenter.y} x2={cp.leftEyeTop.x} y2={cp.leftEyeTop.y} />\n          <line x1={cp.leftEyeCenter.x} y1={cp.leftEyeCenter.y} x2={cp.leftEyeBottom.x} y2={cp.leftEyeBottom.y} />\n          <line x1={cp.leftEyeCenter.x} y1={cp.leftEyeCenter.y} x2={cp.leftEyeInner.x} y2={cp.leftEyeInner.y} />\n          <line x1={cp.leftEyeCenter.x} y1={cp.leftEyeCenter.y} x2={cp.leftEyeOuter.x} y2={cp.leftEyeOuter.y} />\n          \n          {/* Right eye shape */}\n          <line x1={cp.rightEyeCenter.x} y1={cp.rightEyeCenter.y} x2={cp.rightEyeTop.x} y2={cp.rightEyeTop.y} />\n          <line x1={cp.rightEyeCenter.x} y1={cp.rightEyeCenter.y} x2={cp.rightEyeBottom.x} y2={cp.rightEyeBottom.y} />\n          <line x1={cp.rightEyeCenter.x} y1={cp.rightEyeCenter.y} x2={cp.rightEyeInner.x} y2={cp.rightEyeInner.y} />\n          <line x1={cp.rightEyeCenter.x} y1={cp.rightEyeCenter.y} x2={cp.rightEyeOuter.x} y2={cp.rightEyeOuter.y} />\n          \n          {/* Left eyebrow curve */}\n          <line x1={cp.leftEyebrowInner.x} y1={cp.leftEyebrowInner.y} x2={cp.leftEyebrowMiddle.x} y2={cp.leftEyebrowMiddle.y} />\n          <line x1={cp.leftEyebrowMiddle.x} y1={cp.leftEyebrowMiddle.y} x2={cp.leftEyebrowOuter.x} y2={cp.leftEyebrowOuter.y} />\n          \n          {/* Right eyebrow curve */}\n          <line x1={cp.rightEyebrowInner.x} y1={cp.rightEyebrowInner.y} x2={cp.rightEyebrowMiddle.x} y2={cp.rightEyebrowMiddle.y} />\n          <line x1={cp.rightEyebrowMiddle.x} y1={cp.rightEyebrowMiddle.y} x2={cp.rightEyebrowOuter.x} y2={cp.rightEyebrowOuter.y} />\n          \n          {/* Eyebrow to eye connections */}\n          <line x1={cp.leftEyebrowMiddle.x} y1={cp.leftEyebrowMiddle.y} x2={cp.leftEyeCenter.x} y2={cp.leftEyeCenter.y} />\n          <line x1={cp.rightEyebrowMiddle.x} y1={cp.rightEyebrowMiddle.y} x2={cp.rightEyeCenter.x} y2={cp.rightEyeCenter.y} />\n          \n          {/* Mouth outline */}\n          <line x1={cp.mouthLeftCorner.x} y1={cp.mouthLeftCorner.y} x2={cp.mouthTopLeft.x} y2={cp.mouthTopLeft.y} />\n          <line x1={cp.mouthTopLeft.x} y1={cp.mouthTopLeft.y} x2={cp.mouthTopCenter.x} y2={cp.mouthTopCenter.y} />\n          <line x1={cp.mouthTopCenter.x} y1={cp.mouthTopCenter.y} x2={cp.mouthTopRight.x} y2={cp.mouthTopRight.y} />\n          <line x1={cp.mouthTopRight.x} y1={cp.mouthTopRight.y} x2={cp.mouthRightCorner.x} y2={cp.mouthRightCorner.y} />\n          <line x1={cp.mouthRightCorner.x} y1={cp.mouthRightCorner.y} x2={cp.mouthBottomRight.x} y2={cp.mouthBottomRight.y} />\n          <line x1={cp.mouthBottomRight.x} y1={cp.mouthBottomRight.y} x2={cp.mouthBottomCenter.x} y2={cp.mouthBottomCenter.y} />\n          <line x1={cp.mouthBottomCenter.x} y1={cp.mouthBottomCenter.y} x2={cp.mouthBottomLeft.x} y2={cp.mouthBottomLeft.y} />\n          <line x1={cp.mouthBottomLeft.x} y1={cp.mouthBottomLeft.y} x2={cp.mouthLeftCorner.x} y2={cp.mouthLeftCorner.y} />\n          \n          {/* Face midline */}\n          <line x1={(cp.leftEyeCenter.x + cp.rightEyeCenter.x) / 2} y1={cp.leftEyeCenter.y} \n                x2={(cp.mouthTopCenter.x + cp.mouthBottomCenter.x) / 2} y2={(cp.mouthTopCenter.y + cp.mouthBottomCenter.y) / 2} />\n        </g>\n\n        {/* Left Eye Control Points */}\n        {renderControlPoint('leftEyeCenter', cp.leftEyeCenter, '#3b82f6', 'LE C')}\n        {renderControlPoint('leftEyeTop', cp.leftEyeTop, '#60a5fa', 'LE T')}\n        {renderControlPoint('leftEyeBottom', cp.leftEyeBottom, '#60a5fa', 'LE B')}\n        {renderControlPoint('leftEyeInner', cp.leftEyeInner, '#60a5fa', 'LE I')}\n        {renderControlPoint('leftEyeOuter', cp.leftEyeOuter, '#60a5fa', 'LE O')}\n        \n        {/* Right Eye Control Points */}\n        {renderControlPoint('rightEyeCenter', cp.rightEyeCenter, '#3b82f6', 'RE C')}\n        {renderControlPoint('rightEyeTop', cp.rightEyeTop, '#60a5fa', 'RE T')}\n        {renderControlPoint('rightEyeBottom', cp.rightEyeBottom, '#60a5fa', 'RE B')}\n        {renderControlPoint('rightEyeInner', cp.rightEyeInner, '#60a5fa', 'RE I')}\n        {renderControlPoint('rightEyeOuter', cp.rightEyeOuter, '#60a5fa', 'RE O')}\n        \n        {/* Left Eyebrow Control Points */}\n        {renderControlPoint('leftEyebrowInner', cp.leftEyebrowInner, '#8b5cf6', 'LB I')}\n        {renderControlPoint('leftEyebrowMiddle', cp.leftEyebrowMiddle, '#8b5cf6', 'LB M')}\n        {renderControlPoint('leftEyebrowOuter', cp.leftEyebrowOuter, '#8b5cf6', 'LB O')}\n        \n        {/* Right Eyebrow Control Points */}\n        {renderControlPoint('rightEyebrowInner', cp.rightEyebrowInner, '#8b5cf6', 'RB I')}\n        {renderControlPoint('rightEyebrowMiddle', cp.rightEyebrowMiddle, '#8b5cf6', 'RB M')}\n        {renderControlPoint('rightEyebrowOuter', cp.rightEyebrowOuter, '#8b5cf6', 'RB O')}\n        \n        {/* Mouth Control Points */}\n        {renderControlPoint('mouthLeftCorner', cp.mouthLeftCorner, '#ec4899', 'M LC')}\n        {renderControlPoint('mouthRightCorner', cp.mouthRightCorner, '#ec4899', 'M RC')}\n        {renderControlPoint('mouthTopLeft', cp.mouthTopLeft, '#f472b6', 'M TL')}\n        {renderControlPoint('mouthTopCenter', cp.mouthTopCenter, '#ec4899', 'M TC')}\n        {renderControlPoint('mouthTopRight', cp.mouthTopRight, '#f472b6', 'M TR')}\n        {renderControlPoint('mouthBottomLeft', cp.mouthBottomLeft, '#f472b6', 'M BL')}\n        {renderControlPoint('mouthBottomCenter', cp.mouthBottomCenter, '#ec4899', 'M BC')}\n        {renderControlPoint('mouthBottomRight', cp.mouthBottomRight, '#f472b6', 'M BR')}\n      </g>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">Face Rigging Studio</h1>\n        <p className=\"text-gray-600 mb-6\">Draw, rig with control points, and animate with speech</p>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex gap-2 mb-4\">\n              <button\n                onClick={() => {\n                  setMode('draw');\n                  setDraggingPoint(null);\n                }}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'draw'\n                    ? 'bg-purple-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Pen className=\"inline mr-2\" size={18} />\n                Draw\n              </button>\n              <button\n                onClick={() => setMode('rig')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'rig'\n                    ? 'bg-blue-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Move className=\"inline mr-2\" size={18} />\n                Rig Points\n              </button>\n              <button\n                onClick={() => setMode('animate')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'animate'\n                    ? 'bg-green-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Play className=\"inline mr-2\" size={18} />\n                Animate\n              </button>\n            </div>\n\n            <div className=\"mb-4 p-3 bg-blue-50 rounded-lg text-sm\">\n              {mode === 'draw' && (\n                <p className=\"text-blue-800\"><strong>Draw Mode:</strong> Use the tools below to draw your face</p>\n              )}\n              {mode === 'rig' && (\n                <p className=\"text-blue-800\"><strong>Rig Mode:</strong> Drag the control points to position them on your drawing</p>\n              )}\n              {mode === 'animate' && (\n                <p className=\"text-blue-800\"><strong>Animate Mode:</strong> Enter text and click \"Animate with Speech\"!</p>\n              )}\n            </div>\n\n            {mode === 'draw' && (\n              <div className=\"space-y-3 mb-4\">\n                {/* Tool Selection */}\n                <div className=\"flex items-center gap-4 flex-wrap\">\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => setTool('pen')}\n                      className={`p-3 rounded-lg transition-all ${\n                        tool === 'pen' \n                          ? 'bg-purple-600 text-white shadow-md' \n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                      }`}\n                    >\n                      <Pen size={20} />\n                    </button>\n                    <button\n                      onClick={() => setTool('eraser')}\n                      className={`p-3 rounded-lg transition-all ${\n                        tool === 'eraser' \n                          ? 'bg-red-600 text-white shadow-md' \n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                      }`}\n                      title=\"Eraser Tool\"\n                    >\n                      <Trash2 size={20} />\n                    </button>\n                    <button\n                      onClick={() => setTool('rect')}\n                      className={`p-3 rounded-lg transition-all ${\n                        tool === 'rect' \n                          ? 'bg-purple-600 text-white shadow-md' \n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                      }`}\n                    >\n                      <Square size={20} />\n                    </button>\n                    <button\n                      onClick={() => setTool('circle')}\n                      className={`p-3 rounded-lg transition-all ${\n                        tool === 'circle' \n                          ? 'bg-purple-600 text-white shadow-md' \n                          : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                      }`}\n                    >\n                      <Circle size={20} />\n                    </button>\n                  </div>\n\n                  <input\n                    type=\"color\"\n                    value={color}\n                    onChange={(e) => setColor(e.target.value)}\n                    className=\"w-12 h-12 rounded cursor-pointer border-2 border-gray-300\"\n                  />\n\n                  <button\n                    onClick={undo}\n                    disabled={pathHistory.length === 0}\n                    className={`p-3 rounded-lg transition-all ${\n                      pathHistory.length === 0\n                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                        : 'bg-blue-100 text-blue-600 hover:bg-blue-200'\n                    }`}\n                    title=\"Undo\"\n                  >\n                    <Undo size={20} />\n                  </button>\n\n                  <button\n                    onClick={clearCanvas}\n                    className=\"p-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all\"\n                    title=\"Clear All\"\n                  >\n                    <Trash2 size={20} />\n                  </button>\n                </div>\n\n                {/* Pen Size and Brush Style */}\n                <div className=\"flex items-center gap-6 flex-wrap bg-gray-50 p-3 rounded-lg\">\n                  {/* Pen Size */}\n                  <div className=\"flex items-center gap-3\">\n                    <label className=\"text-sm font-medium text-gray-700\">Size:</label>\n                    <input\n                      type=\"range\"\n                      min=\"1\"\n                      max=\"20\"\n                      value={penSize}\n                      onChange={(e) => setPenSize(parseInt(e.target.value))}\n                      className=\"w-32\"\n                    />\n                    <span className=\"text-sm font-medium text-gray-600 w-8\">{penSize}px</span>\n                  </div>\n\n                  {/* Brush Style */}\n                  <div className=\"flex items-center gap-2\">\n                    <label className=\"text-sm font-medium text-gray-700\">Brush:</label>\n                    <button\n                      onClick={() => setBrushStyle('solid')}\n                      className={`px-3 py-1.5 text-xs rounded transition-all ${\n                        brushStyle === 'solid'\n                          ? 'bg-purple-600 text-white'\n                          : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'\n                      }`}\n                    >\n                      Solid\n                    </button>\n                    <button\n                      onClick={() => setBrushStyle('dashed')}\n                      className={`px-3 py-1.5 text-xs rounded transition-all ${\n                        brushStyle === 'dashed'\n                          ? 'bg-purple-600 text-white'\n                          : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'\n                      }`}\n                    >\n                      Dashed\n                    </button>\n                    <button\n                      onClick={() => setBrushStyle('dotted')}\n                      className={`px-3 py-1.5 text-xs rounded transition-all ${\n                        brushStyle === 'dotted'\n                          ? 'bg-purple-600 text-white'\n                          : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'\n                      }`}\n                    >\n                      Dotted\n                    </button>\n                    <button\n                      onClick={() => setBrushStyle('sketch')}\n                      className={`px-3 py-1.5 text-xs rounded transition-all ${\n                        brushStyle === 'sketch'\n                          ? 'bg-purple-600 text-white'\n                          : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'\n                      }`}\n                    >\n                      Sketch\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {mode === 'rig' && (\n              <div className=\"flex items-center gap-4 mb-4 flex-wrap\">\n                <button\n                  onClick={autoDetectLandmarks}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all font-medium\"\n                >\n                  Auto Detect Landmarks\n                </button>\n                <button\n                  onClick={resetControlPoints}\n                  className=\"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-all\"\n                >\n                  Reset Points\n                </button>\n              </div>\n            )}\n\n            <div className=\"border-4 border-gray-300 rounded-lg overflow-hidden bg-white relative\">\n              {mode === 'rig' && (\n                <div className=\"absolute top-2 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-lg z-10\">\n                  Adjust by dragging the points\n                </div>\n              )}\n              \n              <svg\n                ref={svgRef}\n                width=\"800\"\n                height=\"600\"\n                viewBox=\"0 0 800 600\"\n                className={`w-full h-auto ${\n                  mode === 'draw' ? (tool === 'eraser' ? 'cursor-not-allowed' : 'cursor-crosshair') : \n                  mode === 'rig' ? 'cursor-grab' : \n                  'cursor-default'\n                }`}\n                onMouseDown={handleMouseDown}\n                onMouseMove={handleMouseMove}\n                onMouseUp={handleMouseUp}\n                onMouseLeave={handleMouseUp}\n                onTouchStart={handleMouseDown}\n                onTouchMove={handleMouseMove}\n                onTouchEnd={handleMouseUp}\n                style={{ touchAction: 'none' }}\n              >\n                <rect width=\"800\" height=\"600\" fill=\"white\" />\n                \n                {paths.map((path, index) => renderPath(path, index))}\n                {currentPath && renderPath(currentPath, -1)}\n                \n                {renderSkeleton()}\n              </svg>\n            </div>\n\n            <div className=\"flex gap-3 mt-4\">\n              <button\n                onClick={exportSVG}\n                className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all\"\n              >\n                <Download size={18} />\n                Export SVG\n              </button>\n              <button\n                onClick={exportJSON}\n                className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all\"\n              >\n                <Save size={18} />\n                Save Rigging\n              </button>\n              <button\n                onClick={exportAnimationHTML}\n                className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all\"\n              >\n                <Download size={18} />\n                Export Animation\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Speech Animation</h2>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Speech Text\n              </label>\n              <textarea\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                placeholder=\"Enter text to speak...\"\n                className=\"w-full h-32 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none\"\n              />\n            </div>\n\n            <button\n              onClick={animateWithTTS}\n              disabled={isAnimating}\n              className={`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${\n                isAnimating\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  : 'bg-purple-600 text-white hover:bg-purple-700 shadow-md hover:shadow-lg'\n              }`}\n            >\n              {isAnimating ? (\n                <>\n                  <div className=\"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin\" />\n                  Speaking...\n                </>\n              ) : (\n                <>\n                  <Play size={20} />\n                  Animate with Speech\n                </>\n              )}\n            </button>\n\n            <div className=\"mt-6 p-4 bg-purple-50 rounded-lg\">\n              <h3 className=\"font-semibold text-gray-800 mb-2\">How to use:</h3>\n              <ol className=\"text-sm text-gray-600 space-y-2 list-decimal list-inside\">\n                <li><strong>Draw:</strong> Create your face</li>\n                <li><strong>Rig:</strong> Drag mouth points to your drawn mouth area</li>\n                <li><strong>Animate:</strong> Click animate and watch!</li>\n              </ol>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg\">\n              <p className=\"text-sm text-yellow-800 font-medium\">\n                <strong>Debug Info:</strong><br/>\n                Mouth open: {(mouthOpenAmount * 100).toFixed(0)}%<br/>\n                Blink: {(blinkAmount * 100).toFixed(0)}%<br/>\n                Animating: {isAnimating ? 'YES' : 'NO'}<br/>\n                Total shapes: {paths.length}<br/>\n                Mouth: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && info.type === 'mouth';\n                }).length}<br/>\n                Eyes: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && (info.type === 'leftEye' || info.type === 'rightEye');\n                }).length}<br/>\n                Pupils: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && (info.type === 'leftPupil' || info.type === 'rightPupil');\n                }).length}<br/>\n                Eyebrows: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && info.type === 'eyebrow';\n                }).length}\n              </p>\n              <p className=\"text-xs text-yellow-700 mt-2\">\n                Green glow = detected, Red glow = animating\n              </p>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n              <h4 className=\"font-semibold text-gray-700 mb-2 text-sm\">Animation Zones:</h4>\n              <div className=\"text-xs text-gray-600 space-y-1\">\n                <div> <span className=\"text-pink-600\">Mouth:</span> 120px from center</div>\n                <div> <span className=\"text-purple-600\">Eyebrows:</span> 60px radius</div>\n                <div> <span className=\"text-blue-600\">Eyes:</span> 40px from eye points</div>\n                <div> <span className=\"text-cyan-600\">Pupils:</span> 15px from eye center</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}