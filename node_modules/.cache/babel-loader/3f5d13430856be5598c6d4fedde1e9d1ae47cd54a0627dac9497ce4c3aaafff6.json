{"ast":null,"code":"import _objectSpread from\"/Users/denielleoliva/Downloads/fcp_unr/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{Download,Play,Trash2,Square,Circle,Pen,Move,Save}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function VectorDrawTTS(){const[tool,setTool]=useState('pen');const[mode,setMode]=useState('draw');const[color,setColor]=useState('#000000');const[paths,setPaths]=useState([]);const[currentPath,setCurrentPath]=useState(null);const[isDrawing,setIsDrawing]=useState(false);const[text,setText]=useState('');const[isAnimating,setIsAnimating]=useState(false);const[mouthOpenAmount,setMouthOpenAmount]=useState(0);const[blinkAmount,setBlinkAmount]=useState(0);// 0 = open, 1 = closed\nconst[pupilOffsetX,setPupilOffsetX]=useState(0);const[pupilOffsetY,setPupilOffsetY]=useState(0);const svgRef=useRef(null);const[controlPoints,setControlPoints]=useState({leftEye:{x:300,y:200},rightEye:{x:500,y:200},leftEyebrow:{x:300,y:150},rightEyebrow:{x:500,y:150},mouthLeft:{x:350,y:350},mouthRight:{x:450,y:350},mouthTop:{x:400,y:330},mouthBottom:{x:400,y:370}});const[draggingPoint,setDraggingPoint]=useState(null);// Force re-render when mouthOpenAmount changes\nuseEffect(()=>{if(isAnimating){// Force component update\n}},[mouthOpenAmount,isAnimating]);const getMousePos=e=>{const rect=svgRef.current.getBoundingClientRect();const scaleX=800/rect.width;const scaleY=600/rect.height;// Handle touch events\nlet clientX,clientY;if(e.touches&&e.touches.length>0){clientX=e.touches[0].clientX;clientY=e.touches[0].clientY;}else if(e.changedTouches&&e.changedTouches.length>0){clientX=e.changedTouches[0].clientX;clientY=e.changedTouches[0].clientY;}else{clientX=e.clientX;clientY=e.clientY;}return{x:(clientX-rect.left)*scaleX,y:(clientY-rect.top)*scaleY};};const handleMouseDown=e=>{// Prevent default touch behavior (scrolling)\nif(e.touches){e.preventDefault();}const pos=getMousePos(e);if(mode==='rig'){for(const[key,point]of Object.entries(controlPoints)){const dx=pos.x-point.x;const dy=pos.y-point.y;const dist=Math.sqrt(dx*dx+dy*dy);if(dist<15){setDraggingPoint(key);return;}}}if(mode!=='draw')return;setIsDrawing(true);if(tool==='pen'){setCurrentPath({type:'path',d:\"M \".concat(pos.x,\" \").concat(pos.y),color:color,fill:'none',stroke:color,strokeWidth:3});}else if(tool==='rect'){setCurrentPath({type:'rect',x:pos.x,y:pos.y,startX:pos.x,startY:pos.y,width:0,height:0,color:color,fill:color,stroke:color,strokeWidth:2});}else if(tool==='circle'){setCurrentPath({type:'circle',cx:pos.x,cy:pos.y,startX:pos.x,startY:pos.y,r:0,color:color,fill:color,stroke:color,strokeWidth:2});}};const handleMouseMove=e=>{// Prevent default touch behavior (scrolling)\nif(e.touches){e.preventDefault();}const pos=getMousePos(e);if(draggingPoint){setControlPoints(prev=>_objectSpread(_objectSpread({},prev),{},{[draggingPoint]:{x:pos.x,y:pos.y}}));return;}if(!isDrawing||!currentPath||mode!=='draw')return;if(tool==='pen'){setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{d:\"\".concat(prev.d,\" L \").concat(pos.x,\" \").concat(pos.y)}));}else if(tool==='rect'){const width=pos.x-currentPath.startX;const height=pos.y-currentPath.startY;setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{x:width<0?pos.x:prev.startX,y:height<0?pos.y:prev.startY,width:Math.abs(width),height:Math.abs(height)}));}else if(tool==='circle'){const dx=pos.x-currentPath.startX;const dy=pos.y-currentPath.startY;const radius=Math.sqrt(dx*dx+dy*dy);setCurrentPath(prev=>_objectSpread(_objectSpread({},prev),{},{r:radius}));}};const handleMouseUp=()=>{if(currentPath){setPaths([...paths,currentPath]);setCurrentPath(null);}setIsDrawing(false);setDraggingPoint(null);};const exportSVG=()=>{const svg=svgRef.current;const serializer=new XMLSerializer();const svgString=serializer.serializeToString(svg);const blob=new Blob([svgString],{type:'image/svg+xml'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='drawing.svg';a.click();URL.revokeObjectURL(url);};const exportJSON=()=>{const data={paths:paths,controlPoints:controlPoints};const json=JSON.stringify(data,null,2);const blob=new Blob([json],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='face-rigging.json';a.click();URL.revokeObjectURL(url);};const animateMouth=()=>{const amplitude=0.5+Math.random()*0.5;setMouthOpenAmount(amplitude);setTimeout(()=>{setMouthOpenAmount(0);},80+Math.random()*120);};const animateBlink=()=>{// Quick blink\nsetBlinkAmount(1);setTimeout(()=>{setBlinkAmount(0);},150);};const animatePupils=()=>{// Random subtle eye movement\nconst maxOffset=3;// pixels\nsetPupilOffsetX((Math.random()-0.5)*maxOffset);setPupilOffsetY((Math.random()-0.5)*maxOffset);};const animateWithTTS=async()=>{if(!text.trim()){alert('Please enter text to speak');return;}setIsAnimating(true);setMouthOpenAmount(0);setBlinkAmount(0);setPupilOffsetX(0);setPupilOffsetY(0);setMode('animate');const utterance=new SpeechSynthesisUtterance(text);utterance.rate=0.9;utterance.pitch=1;let mouthIntervalId,blinkIntervalId,pupilIntervalId;utterance.onstart=()=>{// Mouth animation\nmouthIntervalId=setInterval(()=>{animateMouth();},150);// Random blinking (every 2-4 seconds)\nblinkIntervalId=setInterval(()=>{animateBlink();},2000+Math.random()*2000);// Pupil movement (every 1-2 seconds)\npupilIntervalId=setInterval(()=>{animatePupils();},1000+Math.random()*1000);};utterance.onend=()=>{clearInterval(mouthIntervalId);clearInterval(blinkIntervalId);clearInterval(pupilIntervalId);setIsAnimating(false);setMouthOpenAmount(0);setBlinkAmount(0);setPupilOffsetX(0);setPupilOffsetY(0);};window.speechSynthesis.speak(utterance);};const clearCanvas=()=>{setPaths([]);setCurrentPath(null);};const resetControlPoints=()=>{setControlPoints({leftEye:{x:300,y:200},rightEye:{x:500,y:200},leftEyebrow:{x:300,y:150},rightEyebrow:{x:500,y:150},mouthLeft:{x:350,y:350},mouthRight:{x:450,y:350},mouthTop:{x:400,y:330},mouthBottom:{x:400,y:370}});};const getPathAnimationType=path=>{const cp=controlPoints;let pathCenterX,pathCenterY;if(path.type==='circle'){pathCenterX=path.cx;pathCenterY=path.cy;}else if(path.type==='rect'){pathCenterX=path.x+path.width/2;pathCenterY=path.y+path.height/2;}else if(path.type==='path'){// For pen paths, calculate center from all points\nconst points=[];const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){commands.forEach(cmd=>{const match=cmd.match(/([\\d.]+)\\s+([\\d.]+)/);if(match){points.push({x:parseFloat(match[1]),y:parseFloat(match[2])});}});}if(points.length===0)return null;// Calculate bounding box center\nconst minX=Math.min(...points.map(p=>p.x));const maxX=Math.max(...points.map(p=>p.x));const minY=Math.min(...points.map(p=>p.y));const maxY=Math.max(...points.map(p=>p.y));pathCenterX=(minX+maxX)/2;pathCenterY=(minY+maxY)/2;}else{return null;}const distanceToPoint=(px,py)=>{const dx=pathCenterX-px;const dy=pathCenterY-py;return Math.sqrt(dx*dx+dy*dy);};// Check for pupils (inner circle, closer to eye center)\nconst distToLeftEye=distanceToPoint(cp.leftEye.x,cp.leftEye.y);const distToRightEye=distanceToPoint(cp.rightEye.x,cp.rightEye.y);if(distToLeftEye<15){return{type:'leftPupil',eyeX:cp.leftEye.x,eyeY:cp.leftEye.y};}if(distToRightEye<15){return{type:'rightPupil',eyeX:cp.rightEye.x,eyeY:cp.rightEye.y};}// Check for eye shapes (outer circle, near eye but not pupil)\nif(distToLeftEye<40){return{type:'leftEye',eyeX:cp.leftEye.x,eyeY:cp.leftEye.y};}if(distToRightEye<40){return{type:'rightEye',eyeX:cp.rightEye.x,eyeY:cp.rightEye.y};}const mouthCenterX=(cp.mouthLeft.x+cp.mouthRight.x)/2;const mouthCenterY=(cp.mouthTop.y+cp.mouthBottom.y)/2;const distToMouth=distanceToPoint(mouthCenterX,mouthCenterY);if(distToMouth<120){return{type:'mouth',centerX:pathCenterX,centerY:pathCenterY};}const distToLeftBrow=distanceToPoint(cp.leftEyebrow.x,cp.leftEyebrow.y);const distToRightBrow=distanceToPoint(cp.rightEyebrow.x,cp.rightEyebrow.y);if(distToLeftBrow<60||distToRightBrow<60){return{type:'eyebrow'};}return null;};const renderPath=(path,index)=>{const animInfo=getPathAnimationType(path);// Calculate animated properties directly\nlet animatedPath=_objectSpread({},path);let isAnimated=false;if(animInfo&&isAnimating&&(mouthOpenAmount>0||blinkAmount>0||pupilOffsetX!==0||pupilOffsetY!==0)){isAnimated=true;if(animInfo.type==='mouth'){// For mouth animation, scale the shape\nconst scaleY=1+mouthOpenAmount*0.8;if(path.type==='circle'){const newR=path.r*scaleY;animatedPath=_objectSpread(_objectSpread({},path),{},{r:newR});}else if(path.type==='rect'){const newHeight=path.height*scaleY;const heightDiff=newHeight-path.height;animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y-heightDiff/2,height:newHeight});}else if(path.type==='path'){const centerY=animInfo.centerY;const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3]);const scaledY=centerY+(y-centerY)*scaleY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(scaledY,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='eyebrow'){const translateY=-5*mouthOpenAmount;if(path.type==='circle'){animatedPath=_objectSpread(_objectSpread({},path),{},{cy:path.cy+translateY});}else if(path.type==='rect'){animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y+translateY});}else if(path.type==='path'){const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3])+translateY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(y,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='leftEye'||animInfo.type==='rightEye'){// Blink animation - squash eye vertically\nconst scaleY=1-blinkAmount*0.9;// Almost close completely\nif(path.type==='circle'){const centerY=path.cy;const newCy=centerY;const newR=path.r*scaleY;animatedPath=_objectSpread(_objectSpread({},path),{},{cy:newCy,r:newR});}else if(path.type==='rect'){const newHeight=path.height*scaleY;const heightDiff=path.height-newHeight;animatedPath=_objectSpread(_objectSpread({},path),{},{y:path.y+heightDiff/2,height:newHeight});}else if(path.type==='path'){const centerY=animInfo.eyeY;const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2]);const y=parseFloat(match[3]);const scaledY=centerY+(y-centerY)*scaleY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(scaledY,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}else if(animInfo.type==='leftPupil'||animInfo.type==='rightPupil'){// Pupil movement\nif(path.type==='circle'){animatedPath=_objectSpread(_objectSpread({},path),{},{cx:path.cx+pupilOffsetX,cy:path.cy+pupilOffsetY});}else if(path.type==='rect'){animatedPath=_objectSpread(_objectSpread({},path),{},{x:path.x+pupilOffsetX,y:path.y+pupilOffsetY});}else if(path.type==='path'){const commands=path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);if(commands){let newD='';commands.forEach(cmd=>{const match=cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);if(match){const command=match[1];const x=parseFloat(match[2])+pupilOffsetX;const y=parseFloat(match[3])+pupilOffsetY;newD+=\"\".concat(command,\" \").concat(x,\" \").concat(y,\" \");}});animatedPath=_objectSpread(_objectSpread({},path),{},{d:newD.trim()});}}}}// Add highlight for shapes that are being animated (debug)\nconst debugHighlight=animInfo&&mode==='animate'?{filter:isAnimated?'drop-shadow(0 0 8px rgba(255, 0, 0, 0.8))':'drop-shadow(0 0 4px rgba(0, 255, 0, 0.5))'}:{};const transitionStyle=_objectSpread({transition:'all 0.1s ease-out'},debugHighlight);if(animatedPath.type==='path'){return/*#__PURE__*/_jsx(\"path\",{d:animatedPath.d,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,strokeLinecap:\"round\",strokeLinejoin:\"round\",style:transitionStyle},index);}else if(animatedPath.type==='rect'){return/*#__PURE__*/_jsx(\"rect\",{x:animatedPath.x,y:animatedPath.y,width:animatedPath.width,height:animatedPath.height,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,style:transitionStyle},index);}else if(animatedPath.type==='circle'){return/*#__PURE__*/_jsx(\"circle\",{cx:animatedPath.cx,cy:animatedPath.cy,r:animatedPath.r,fill:animatedPath.fill,stroke:animatedPath.stroke,strokeWidth:animatedPath.strokeWidth,style:transitionStyle},index);}};const renderControlPoint=(key,point,color,label)=>{return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"circle\",{cx:point.x,cy:point.y,r:\"12\",fill:\"white\",stroke:color,strokeWidth:\"3\",style:{cursor:mode==='rig'?'grab':'default',filter:'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'}}),/*#__PURE__*/_jsx(\"circle\",{cx:point.x,cy:point.y,r:\"6\",fill:color,opacity:\"0.8\"}),/*#__PURE__*/_jsx(\"text\",{x:point.x,y:point.y-20,textAnchor:\"middle\",fill:color,fontSize:\"11\",fontWeight:\"bold\",style:{pointerEvents:'none'},children:label})]},key);};const renderSkeleton=()=>{if(mode!=='rig')return null;const cp=controlPoints;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsxs(\"g\",{stroke:\"#64748b\",strokeWidth:\"2\",strokeDasharray:\"5,5\",opacity:\"0.5\",children:[/*#__PURE__*/_jsx(\"line\",{x1:cp.leftEyebrow.x,y1:cp.leftEyebrow.y,x2:cp.leftEye.x,y2:cp.leftEye.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.rightEyebrow.x,y1:cp.rightEyebrow.y,x2:cp.rightEye.x,y2:cp.rightEye.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthLeft.x,y1:cp.mouthLeft.y,x2:cp.mouthTop.x,y2:cp.mouthTop.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthTop.x,y1:cp.mouthTop.y,x2:cp.mouthRight.x,y2:cp.mouthRight.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthRight.x,y1:cp.mouthRight.y,x2:cp.mouthBottom.x,y2:cp.mouthBottom.y}),/*#__PURE__*/_jsx(\"line\",{x1:cp.mouthBottom.x,y1:cp.mouthBottom.y,x2:cp.mouthLeft.x,y2:cp.mouthLeft.y}),/*#__PURE__*/_jsx(\"line\",{x1:(cp.leftEye.x+cp.rightEye.x)/2,y1:cp.leftEye.y,x2:(cp.mouthLeft.x+cp.mouthRight.x)/2,y2:cp.mouthTop.y})]}),renderControlPoint('leftEye',cp.leftEye,'#3b82f6','L EYE'),renderControlPoint('rightEye',cp.rightEye,'#3b82f6','R EYE'),renderControlPoint('leftEyebrow',cp.leftEyebrow,'#8b5cf6','L BROW'),renderControlPoint('rightEyebrow',cp.rightEyebrow,'#8b5cf6','R BROW'),renderControlPoint('mouthLeft',cp.mouthLeft,'#ec4899','M LEFT'),renderControlPoint('mouthRight',cp.mouthRight,'#ec4899','M RIGHT'),renderControlPoint('mouthTop',cp.mouthTop,'#ec4899','M TOP'),renderControlPoint('mouthBottom',cp.mouthBottom,'#ec4899','M BOT')]});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-800 mb-2\",children:\"Face Rigging Studio\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Draw, rig with control points, and animate with speech\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setMode('draw');setDraggingPoint(null);},className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='draw'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Pen,{className:\"inline mr-2\",size:18}),\"Draw\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMode('rig'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='rig'?'bg-blue-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Move,{className:\"inline mr-2\",size:18}),\"Rig Points\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMode('animate'),className:\"px-4 py-2 rounded-lg font-medium transition-all \".concat(mode==='animate'?'bg-green-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:[/*#__PURE__*/_jsx(Play,{className:\"inline mr-2\",size:18}),\"Animate\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-blue-50 rounded-lg text-sm\",children:[mode==='draw'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Draw Mode:\"}),\" Use the tools below to draw your face\"]}),mode==='rig'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rig Mode:\"}),\" Drag the control points to position them on your drawing\"]}),mode==='animate'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Animate Mode:\"}),\" Enter text and click \\\"Animate with Speech\\\"!\"]})]}),mode==='draw'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-4 flex-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('pen'),className:\"p-3 rounded-lg transition-all \".concat(tool==='pen'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Pen,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('rect'),className:\"p-3 rounded-lg transition-all \".concat(tool==='rect'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Square,{size:20})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTool('circle'),className:\"p-3 rounded-lg transition-all \".concat(tool==='circle'?'bg-purple-600 text-white shadow-md':'bg-gray-100 text-gray-700 hover:bg-gray-200'),children:/*#__PURE__*/_jsx(Circle,{size:20})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:color,onChange:e=>setColor(e.target.value),className:\"w-12 h-12 rounded cursor-pointer border-2 border-gray-300\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearCanvas,className:\"p-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all\",children:/*#__PURE__*/_jsx(Trash2,{size:20})})]}),mode==='rig'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-4 mb-4 flex-wrap\",children:/*#__PURE__*/_jsx(\"button\",{onClick:resetControlPoints,className:\"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-all\",children:\"Reset Points\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-4 border-gray-300 rounded-lg overflow-hidden bg-white relative\",children:[mode==='rig'&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-lg z-10\",children:\"Adjust by dragging the points\"}),/*#__PURE__*/_jsxs(\"svg\",{ref:svgRef,width:\"800\",height:\"600\",viewBox:\"0 0 800 600\",className:\"w-full h-auto \".concat(mode==='draw'?'cursor-crosshair':mode==='rig'?'cursor-grab':'cursor-default'),onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onTouchStart:handleMouseDown,onTouchMove:handleMouseMove,onTouchEnd:handleMouseUp,style:{touchAction:'none'},children:[/*#__PURE__*/_jsx(\"rect\",{width:\"800\",height:\"600\",fill:\"white\"}),paths.map((path,index)=>renderPath(path,index)),currentPath&&renderPath(currentPath,-1),renderSkeleton()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:exportSVG,className:\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all\",children:[/*#__PURE__*/_jsx(Download,{size:18}),\"Export SVG\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:exportJSON,className:\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all\",children:[/*#__PURE__*/_jsx(Save,{size:18}),\"Save Rigging\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-4\",children:\"Speech Animation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Speech Text\"}),/*#__PURE__*/_jsx(\"textarea\",{value:text,onChange:e=>setText(e.target.value),placeholder:\"Enter text to speak...\",className:\"w-full h-32 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:animateWithTTS,disabled:isAnimating,className:\"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all \".concat(isAnimating?'bg-gray-300 text-gray-500 cursor-not-allowed':'bg-purple-600 text-white hover:bg-purple-700 shadow-md hover:shadow-lg'),children:isAnimating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin\"}),\"Speaking...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Play,{size:20}),\"Animate with Speech\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-purple-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800 mb-2\",children:\"How to use:\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"text-sm text-gray-600 space-y-2 list-decimal list-inside\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Draw:\"}),\" Create your face\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rig:\"}),\" Drag mouth points to your drawn mouth area\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Animate:\"}),\" Click animate and watch!\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800 font-medium\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug Info:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Mouth open: \",(mouthOpenAmount*100).toFixed(0),\"%\",/*#__PURE__*/_jsx(\"br\",{}),\"Blink: \",(blinkAmount*100).toFixed(0),\"%\",/*#__PURE__*/_jsx(\"br\",{}),\"Animating: \",isAnimating?'YES':'NO',/*#__PURE__*/_jsx(\"br\",{}),\"Total shapes: \",paths.length,/*#__PURE__*/_jsx(\"br\",{}),\"Mouth: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&info.type==='mouth';}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Eyes: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&(info.type==='leftEye'||info.type==='rightEye');}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Pupils: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&(info.type==='leftPupil'||info.type==='rightPupil');}).length,/*#__PURE__*/_jsx(\"br\",{}),\"Eyebrows: \",paths.filter(p=>{const info=getPathAnimationType(p);return info&&info.type==='eyebrow';}).length]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-yellow-700 mt-2\",children:\"Green glow = detected, Red glow = animating\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700 mb-2 text-sm\",children:\"Animation Zones:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-pink-600\",children:\"Mouth:\"}),\" 120px from center\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-purple-600\",children:\"Eyebrows:\"}),\" 60px radius\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"Eyes:\"}),\" 40px from eye points\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"span\",{className:\"text-cyan-600\",children:\"Pupils:\"}),\" 15px from eye center\"]})]})]})]})]})]})});}","map":{"version":3,"names":["React","useState","useRef","useEffect","Download","Play","Trash2","Square","Circle","Pen","Move","Save","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VectorDrawTTS","tool","setTool","mode","setMode","color","setColor","paths","setPaths","currentPath","setCurrentPath","isDrawing","setIsDrawing","text","setText","isAnimating","setIsAnimating","mouthOpenAmount","setMouthOpenAmount","blinkAmount","setBlinkAmount","pupilOffsetX","setPupilOffsetX","pupilOffsetY","setPupilOffsetY","svgRef","controlPoints","setControlPoints","leftEye","x","y","rightEye","leftEyebrow","rightEyebrow","mouthLeft","mouthRight","mouthTop","mouthBottom","draggingPoint","setDraggingPoint","getMousePos","e","rect","current","getBoundingClientRect","scaleX","width","scaleY","height","clientX","clientY","touches","length","changedTouches","left","top","handleMouseDown","preventDefault","pos","key","point","Object","entries","dx","dy","dist","Math","sqrt","type","d","concat","fill","stroke","strokeWidth","startX","startY","cx","cy","r","handleMouseMove","prev","_objectSpread","abs","radius","handleMouseUp","exportSVG","svg","serializer","XMLSerializer","svgString","serializeToString","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","exportJSON","data","json","JSON","stringify","animateMouth","amplitude","random","setTimeout","animateBlink","animatePupils","maxOffset","animateWithTTS","trim","alert","utterance","SpeechSynthesisUtterance","rate","pitch","mouthIntervalId","blinkIntervalId","pupilIntervalId","onstart","setInterval","onend","clearInterval","window","speechSynthesis","speak","clearCanvas","resetControlPoints","getPathAnimationType","path","cp","pathCenterX","pathCenterY","points","commands","match","forEach","cmd","push","parseFloat","minX","min","map","p","maxX","max","minY","maxY","distanceToPoint","px","py","distToLeftEye","distToRightEye","eyeX","eyeY","mouthCenterX","mouthCenterY","distToMouth","centerX","centerY","distToLeftBrow","distToRightBrow","renderPath","index","animInfo","animatedPath","isAnimated","newR","newHeight","heightDiff","newD","command","scaledY","translateY","newCy","debugHighlight","filter","transitionStyle","transition","strokeLinecap","strokeLinejoin","style","renderControlPoint","label","children","cursor","opacity","textAnchor","fontSize","fontWeight","pointerEvents","renderSkeleton","strokeDasharray","x1","y1","x2","y2","className","onClick","size","value","onChange","target","ref","viewBox","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","touchAction","placeholder","disabled","toFixed","info"],"sources":["/Users/denielleoliva/Downloads/fcp_unr/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Download, Play, Trash2, Square, Circle, Pen, Move, Save } from 'lucide-react';\n\nexport default function VectorDrawTTS() {\n  const [tool, setTool] = useState('pen');\n  const [mode, setMode] = useState('draw');\n  const [color, setColor] = useState('#000000');\n  const [paths, setPaths] = useState([]);\n  const [currentPath, setCurrentPath] = useState(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [text, setText] = useState('');\n  const [isAnimating, setIsAnimating] = useState(false);\n  const [mouthOpenAmount, setMouthOpenAmount] = useState(0);\n  const [blinkAmount, setBlinkAmount] = useState(0); // 0 = open, 1 = closed\n  const [pupilOffsetX, setPupilOffsetX] = useState(0);\n  const [pupilOffsetY, setPupilOffsetY] = useState(0);\n  const svgRef = useRef(null);\n\n  const [controlPoints, setControlPoints] = useState({\n    leftEye: { x: 300, y: 200 },\n    rightEye: { x: 500, y: 200 },\n    leftEyebrow: { x: 300, y: 150 },\n    rightEyebrow: { x: 500, y: 150 },\n    mouthLeft: { x: 350, y: 350 },\n    mouthRight: { x: 450, y: 350 },\n    mouthTop: { x: 400, y: 330 },\n    mouthBottom: { x: 400, y: 370 }\n  });\n\n  const [draggingPoint, setDraggingPoint] = useState(null);\n\n  // Force re-render when mouthOpenAmount changes\n  useEffect(() => {\n    if (isAnimating) {\n      // Force component update\n    }\n  }, [mouthOpenAmount, isAnimating]);\n\n  const getMousePos = (e) => {\n    const rect = svgRef.current.getBoundingClientRect();\n    const scaleX = 800 / rect.width;\n    const scaleY = 600 / rect.height;\n    \n    // Handle touch events\n    let clientX, clientY;\n    if (e.touches && e.touches.length > 0) {\n      clientX = e.touches[0].clientX;\n      clientY = e.touches[0].clientY;\n    } else if (e.changedTouches && e.changedTouches.length > 0) {\n      clientX = e.changedTouches[0].clientX;\n      clientY = e.changedTouches[0].clientY;\n    } else {\n      clientX = e.clientX;\n      clientY = e.clientY;\n    }\n    \n    return {\n      x: (clientX - rect.left) * scaleX,\n      y: (clientY - rect.top) * scaleY\n    };\n  };\n\n  const handleMouseDown = (e) => {\n    // Prevent default touch behavior (scrolling)\n    if (e.touches) {\n      e.preventDefault();\n    }\n    \n    const pos = getMousePos(e);\n\n    if (mode === 'rig') {\n      for (const [key, point] of Object.entries(controlPoints)) {\n        const dx = pos.x - point.x;\n        const dy = pos.y - point.y;\n        const dist = Math.sqrt(dx * dx + dy * dy);\n        if (dist < 15) {\n          setDraggingPoint(key);\n          return;\n        }\n      }\n    }\n\n    if (mode !== 'draw') return;\n\n    setIsDrawing(true);\n    \n    if (tool === 'pen') {\n      setCurrentPath({\n        type: 'path',\n        d: `M ${pos.x} ${pos.y}`,\n        color: color,\n        fill: 'none',\n        stroke: color,\n        strokeWidth: 3\n      });\n    } else if (tool === 'rect') {\n      setCurrentPath({\n        type: 'rect',\n        x: pos.x,\n        y: pos.y,\n        startX: pos.x,\n        startY: pos.y,\n        width: 0,\n        height: 0,\n        color: color,\n        fill: color,\n        stroke: color,\n        strokeWidth: 2\n      });\n    } else if (tool === 'circle') {\n      setCurrentPath({\n        type: 'circle',\n        cx: pos.x,\n        cy: pos.y,\n        startX: pos.x,\n        startY: pos.y,\n        r: 0,\n        color: color,\n        fill: color,\n        stroke: color,\n        strokeWidth: 2\n      });\n    }\n  };\n\n  const handleMouseMove = (e) => {\n    // Prevent default touch behavior (scrolling)\n    if (e.touches) {\n      e.preventDefault();\n    }\n    \n    const pos = getMousePos(e);\n\n    if (draggingPoint) {\n      setControlPoints(prev => ({\n        ...prev,\n        [draggingPoint]: { x: pos.x, y: pos.y }\n      }));\n      return;\n    }\n\n    if (!isDrawing || !currentPath || mode !== 'draw') return;\n\n    if (tool === 'pen') {\n      setCurrentPath(prev => ({\n        ...prev,\n        d: `${prev.d} L ${pos.x} ${pos.y}`\n      }));\n    } else if (tool === 'rect') {\n      const width = pos.x - currentPath.startX;\n      const height = pos.y - currentPath.startY;\n      setCurrentPath(prev => ({\n        ...prev,\n        x: width < 0 ? pos.x : prev.startX,\n        y: height < 0 ? pos.y : prev.startY,\n        width: Math.abs(width),\n        height: Math.abs(height)\n      }));\n    } else if (tool === 'circle') {\n      const dx = pos.x - currentPath.startX;\n      const dy = pos.y - currentPath.startY;\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      setCurrentPath(prev => ({\n        ...prev,\n        r: radius\n      }));\n    }\n  };\n\n  const handleMouseUp = () => {\n    if (currentPath) {\n      setPaths([...paths, currentPath]);\n      setCurrentPath(null);\n    }\n    setIsDrawing(false);\n    setDraggingPoint(null);\n  };\n\n  const exportSVG = () => {\n    const svg = svgRef.current;\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], { type: 'image/svg+xml' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'drawing.svg';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const exportJSON = () => {\n    const data = {\n      paths: paths,\n      controlPoints: controlPoints\n    };\n    const json = JSON.stringify(data, null, 2);\n    const blob = new Blob([json], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'face-rigging.json';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const animateMouth = () => {\n    const amplitude = 0.5 + Math.random() * 0.5;\n    setMouthOpenAmount(amplitude);\n    \n    setTimeout(() => {\n      setMouthOpenAmount(0);\n    }, 80 + Math.random() * 120);\n  };\n\n  const animateBlink = () => {\n    // Quick blink\n    setBlinkAmount(1);\n    setTimeout(() => {\n      setBlinkAmount(0);\n    }, 150);\n  };\n\n  const animatePupils = () => {\n    // Random subtle eye movement\n    const maxOffset = 3; // pixels\n    setPupilOffsetX((Math.random() - 0.5) * maxOffset);\n    setPupilOffsetY((Math.random() - 0.5) * maxOffset);\n  };\n\n  const animateWithTTS = async () => {\n    if (!text.trim()) {\n      alert('Please enter text to speak');\n      return;\n    }\n\n    setIsAnimating(true);\n    setMouthOpenAmount(0);\n    setBlinkAmount(0);\n    setPupilOffsetX(0);\n    setPupilOffsetY(0);\n    setMode('animate');\n\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.rate = 0.9;\n    utterance.pitch = 1;\n\n    let mouthIntervalId, blinkIntervalId, pupilIntervalId;\n    \n    utterance.onstart = () => {\n      // Mouth animation\n      mouthIntervalId = setInterval(() => {\n        animateMouth();\n      }, 150);\n      \n      // Random blinking (every 2-4 seconds)\n      blinkIntervalId = setInterval(() => {\n        animateBlink();\n      }, 2000 + Math.random() * 2000);\n      \n      // Pupil movement (every 1-2 seconds)\n      pupilIntervalId = setInterval(() => {\n        animatePupils();\n      }, 1000 + Math.random() * 1000);\n    };\n\n    utterance.onend = () => {\n      clearInterval(mouthIntervalId);\n      clearInterval(blinkIntervalId);\n      clearInterval(pupilIntervalId);\n      setIsAnimating(false);\n      setMouthOpenAmount(0);\n      setBlinkAmount(0);\n      setPupilOffsetX(0);\n      setPupilOffsetY(0);\n    };\n\n    window.speechSynthesis.speak(utterance);\n  };\n\n  const clearCanvas = () => {\n    setPaths([]);\n    setCurrentPath(null);\n  };\n\n  const resetControlPoints = () => {\n    setControlPoints({\n      leftEye: { x: 300, y: 200 },\n      rightEye: { x: 500, y: 200 },\n      leftEyebrow: { x: 300, y: 150 },\n      rightEyebrow: { x: 500, y: 150 },\n      mouthLeft: { x: 350, y: 350 },\n      mouthRight: { x: 450, y: 350 },\n      mouthTop: { x: 400, y: 330 },\n      mouthBottom: { x: 400, y: 370 }\n    });\n  };\n\n  const getPathAnimationType = (path) => {\n    const cp = controlPoints;\n    \n    let pathCenterX, pathCenterY;\n    if (path.type === 'circle') {\n      pathCenterX = path.cx;\n      pathCenterY = path.cy;\n    } else if (path.type === 'rect') {\n      pathCenterX = path.x + path.width / 2;\n      pathCenterY = path.y + path.height / 2;\n    } else if (path.type === 'path') {\n      // For pen paths, calculate center from all points\n      const points = [];\n      const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n      \n      if (commands) {\n        commands.forEach(cmd => {\n          const match = cmd.match(/([\\d.]+)\\s+([\\d.]+)/);\n          if (match) {\n            points.push({\n              x: parseFloat(match[1]),\n              y: parseFloat(match[2])\n            });\n          }\n        });\n      }\n      \n      if (points.length === 0) return null;\n      \n      // Calculate bounding box center\n      const minX = Math.min(...points.map(p => p.x));\n      const maxX = Math.max(...points.map(p => p.x));\n      const minY = Math.min(...points.map(p => p.y));\n      const maxY = Math.max(...points.map(p => p.y));\n      \n      pathCenterX = (minX + maxX) / 2;\n      pathCenterY = (minY + maxY) / 2;\n    } else {\n      return null;\n    }\n\n    const distanceToPoint = (px, py) => {\n      const dx = pathCenterX - px;\n      const dy = pathCenterY - py;\n      return Math.sqrt(dx * dx + dy * dy);\n    };\n\n    // Check for pupils (inner circle, closer to eye center)\n    const distToLeftEye = distanceToPoint(cp.leftEye.x, cp.leftEye.y);\n    const distToRightEye = distanceToPoint(cp.rightEye.x, cp.rightEye.y);\n    \n    if (distToLeftEye < 15) {\n      return { type: 'leftPupil', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\n    }\n    if (distToRightEye < 15) {\n      return { type: 'rightPupil', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\n    }\n\n    // Check for eye shapes (outer circle, near eye but not pupil)\n    if (distToLeftEye < 40) {\n      return { type: 'leftEye', eyeX: cp.leftEye.x, eyeY: cp.leftEye.y };\n    }\n    if (distToRightEye < 40) {\n      return { type: 'rightEye', eyeX: cp.rightEye.x, eyeY: cp.rightEye.y };\n    }\n\n    const mouthCenterX = (cp.mouthLeft.x + cp.mouthRight.x) / 2;\n    const mouthCenterY = (cp.mouthTop.y + cp.mouthBottom.y) / 2;\n    const distToMouth = distanceToPoint(mouthCenterX, mouthCenterY);\n    \n    if (distToMouth < 120) {\n      return { type: 'mouth', centerX: pathCenterX, centerY: pathCenterY };\n    }\n\n    const distToLeftBrow = distanceToPoint(cp.leftEyebrow.x, cp.leftEyebrow.y);\n    const distToRightBrow = distanceToPoint(cp.rightEyebrow.x, cp.rightEyebrow.y);\n    \n    if (distToLeftBrow < 60 || distToRightBrow < 60) {\n      return { type: 'eyebrow' };\n    }\n\n    return null;\n  };\n\n  const renderPath = (path, index) => {\n    const animInfo = getPathAnimationType(path);\n    \n    // Calculate animated properties directly\n    let animatedPath = { ...path };\n    let isAnimated = false;\n    \n    if (animInfo && isAnimating && (mouthOpenAmount > 0 || blinkAmount > 0 || pupilOffsetX !== 0 || pupilOffsetY !== 0)) {\n      isAnimated = true;\n      \n      if (animInfo.type === 'mouth') {\n        // For mouth animation, scale the shape\n        const scaleY = 1 + (mouthOpenAmount * 0.8);\n        \n        if (path.type === 'circle') {\n          const newR = path.r * scaleY;\n          animatedPath = { ...path, r: newR };\n        } else if (path.type === 'rect') {\n          const newHeight = path.height * scaleY;\n          const heightDiff = newHeight - path.height;\n          animatedPath = { ...path, y: path.y - heightDiff / 2, height: newHeight };\n        } else if (path.type === 'path') {\n          const centerY = animInfo.centerY;\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]);\n                const scaledY = centerY + (y - centerY) * scaleY;\n                newD += `${command} ${x} ${scaledY} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'eyebrow') {\n        const translateY = -5 * mouthOpenAmount;\n        \n        if (path.type === 'circle') {\n          animatedPath = { ...path, cy: path.cy + translateY };\n        } else if (path.type === 'rect') {\n          animatedPath = { ...path, y: path.y + translateY };\n        } else if (path.type === 'path') {\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]) + translateY;\n                newD += `${command} ${x} ${y} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'leftEye' || animInfo.type === 'rightEye') {\n        // Blink animation - squash eye vertically\n        const scaleY = 1 - (blinkAmount * 0.9); // Almost close completely\n        \n        if (path.type === 'circle') {\n          const centerY = path.cy;\n          const newCy = centerY;\n          const newR = path.r * scaleY;\n          animatedPath = { ...path, cy: newCy, r: newR };\n        } else if (path.type === 'rect') {\n          const newHeight = path.height * scaleY;\n          const heightDiff = path.height - newHeight;\n          animatedPath = { ...path, y: path.y + heightDiff / 2, height: newHeight };\n        } else if (path.type === 'path') {\n          const centerY = animInfo.eyeY;\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]);\n                const y = parseFloat(match[3]);\n                const scaledY = centerY + (y - centerY) * scaleY;\n                newD += `${command} ${x} ${scaledY} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      } else if (animInfo.type === 'leftPupil' || animInfo.type === 'rightPupil') {\n        // Pupil movement\n        if (path.type === 'circle') {\n          animatedPath = { \n            ...path, \n            cx: path.cx + pupilOffsetX,\n            cy: path.cy + pupilOffsetY\n          };\n        } else if (path.type === 'rect') {\n          animatedPath = { \n            ...path, \n            x: path.x + pupilOffsetX,\n            y: path.y + pupilOffsetY\n          };\n        } else if (path.type === 'path') {\n          const commands = path.d.match(/[ML]\\s*([\\d.]+)\\s+([\\d.]+)/g);\n          \n          if (commands) {\n            let newD = '';\n            commands.forEach((cmd) => {\n              const match = cmd.match(/([ML])\\s*([\\d.]+)\\s+([\\d.]+)/);\n              if (match) {\n                const command = match[1];\n                const x = parseFloat(match[2]) + pupilOffsetX;\n                const y = parseFloat(match[3]) + pupilOffsetY;\n                newD += `${command} ${x} ${y} `;\n              }\n            });\n            animatedPath = { ...path, d: newD.trim() };\n          }\n        }\n      }\n    }\n\n    // Add highlight for shapes that are being animated (debug)\n    const debugHighlight = animInfo && mode === 'animate' ? {\n      filter: isAnimated ? 'drop-shadow(0 0 8px rgba(255, 0, 0, 0.8))' : 'drop-shadow(0 0 4px rgba(0, 255, 0, 0.5))'\n    } : {};\n\n    const transitionStyle = {\n      transition: 'all 0.1s ease-out',\n      ...debugHighlight\n    };\n\n    if (animatedPath.type === 'path') {\n      return (\n        <path\n          key={index}\n          d={animatedPath.d}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          style={transitionStyle}\n        />\n      );\n    } else if (animatedPath.type === 'rect') {\n      return (\n        <rect\n          key={index}\n          x={animatedPath.x}\n          y={animatedPath.y}\n          width={animatedPath.width}\n          height={animatedPath.height}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          style={transitionStyle}\n        />\n      );\n    } else if (animatedPath.type === 'circle') {\n      return (\n        <circle\n          key={index}\n          cx={animatedPath.cx}\n          cy={animatedPath.cy}\n          r={animatedPath.r}\n          fill={animatedPath.fill}\n          stroke={animatedPath.stroke}\n          strokeWidth={animatedPath.strokeWidth}\n          style={transitionStyle}\n        />\n      );\n    }\n  };\n\n  const renderControlPoint = (key, point, color, label) => {\n    return (\n      <g key={key}>\n        <circle\n          cx={point.x}\n          cy={point.y}\n          r=\"12\"\n          fill=\"white\"\n          stroke={color}\n          strokeWidth=\"3\"\n          style={{\n            cursor: mode === 'rig' ? 'grab' : 'default',\n            filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'\n          }}\n        />\n        <circle\n          cx={point.x}\n          cy={point.y}\n          r=\"6\"\n          fill={color}\n          opacity=\"0.8\"\n        />\n        <text\n          x={point.x}\n          y={point.y - 20}\n          textAnchor=\"middle\"\n          fill={color}\n          fontSize=\"11\"\n          fontWeight=\"bold\"\n          style={{ pointerEvents: 'none' }}\n        >\n          {label}\n        </text>\n      </g>\n    );\n  };\n\n  const renderSkeleton = () => {\n    if (mode !== 'rig') return null;\n\n    const cp = controlPoints;\n    \n    return (\n      <g>\n        <g stroke=\"#64748b\" strokeWidth=\"2\" strokeDasharray=\"5,5\" opacity=\"0.5\">\n          <line x1={cp.leftEyebrow.x} y1={cp.leftEyebrow.y} x2={cp.leftEye.x} y2={cp.leftEye.y} />\n          <line x1={cp.rightEyebrow.x} y1={cp.rightEyebrow.y} x2={cp.rightEye.x} y2={cp.rightEye.y} />\n          <line x1={cp.mouthLeft.x} y1={cp.mouthLeft.y} x2={cp.mouthTop.x} y2={cp.mouthTop.y} />\n          <line x1={cp.mouthTop.x} y1={cp.mouthTop.y} x2={cp.mouthRight.x} y2={cp.mouthRight.y} />\n          <line x1={cp.mouthRight.x} y1={cp.mouthRight.y} x2={cp.mouthBottom.x} y2={cp.mouthBottom.y} />\n          <line x1={cp.mouthBottom.x} y1={cp.mouthBottom.y} x2={cp.mouthLeft.x} y2={cp.mouthLeft.y} />\n          <line x1={(cp.leftEye.x + cp.rightEye.x) / 2} y1={cp.leftEye.y} \n                x2={(cp.mouthLeft.x + cp.mouthRight.x) / 2} y2={cp.mouthTop.y} />\n        </g>\n\n        {renderControlPoint('leftEye', cp.leftEye, '#3b82f6', 'L EYE')}\n        {renderControlPoint('rightEye', cp.rightEye, '#3b82f6', 'R EYE')}\n        {renderControlPoint('leftEyebrow', cp.leftEyebrow, '#8b5cf6', 'L BROW')}\n        {renderControlPoint('rightEyebrow', cp.rightEyebrow, '#8b5cf6', 'R BROW')}\n        {renderControlPoint('mouthLeft', cp.mouthLeft, '#ec4899', 'M LEFT')}\n        {renderControlPoint('mouthRight', cp.mouthRight, '#ec4899', 'M RIGHT')}\n        {renderControlPoint('mouthTop', cp.mouthTop, '#ec4899', 'M TOP')}\n        {renderControlPoint('mouthBottom', cp.mouthBottom, '#ec4899', 'M BOT')}\n      </g>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">Face Rigging Studio</h1>\n        <p className=\"text-gray-600 mb-6\">Draw, rig with control points, and animate with speech</p>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 bg-white rounded-lg shadow-lg p-6\">\n            <div className=\"flex gap-2 mb-4\">\n              <button\n                onClick={() => {\n                  setMode('draw');\n                  setDraggingPoint(null);\n                }}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'draw'\n                    ? 'bg-purple-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Pen className=\"inline mr-2\" size={18} />\n                Draw\n              </button>\n              <button\n                onClick={() => setMode('rig')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'rig'\n                    ? 'bg-blue-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Move className=\"inline mr-2\" size={18} />\n                Rig Points\n              </button>\n              <button\n                onClick={() => setMode('animate')}\n                className={`px-4 py-2 rounded-lg font-medium transition-all ${\n                  mode === 'animate'\n                    ? 'bg-green-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <Play className=\"inline mr-2\" size={18} />\n                Animate\n              </button>\n            </div>\n\n            <div className=\"mb-4 p-3 bg-blue-50 rounded-lg text-sm\">\n              {mode === 'draw' && (\n                <p className=\"text-blue-800\"><strong>Draw Mode:</strong> Use the tools below to draw your face</p>\n              )}\n              {mode === 'rig' && (\n                <p className=\"text-blue-800\"><strong>Rig Mode:</strong> Drag the control points to position them on your drawing</p>\n              )}\n              {mode === 'animate' && (\n                <p className=\"text-blue-800\"><strong>Animate Mode:</strong> Enter text and click \"Animate with Speech\"!</p>\n              )}\n            </div>\n\n            {mode === 'draw' && (\n              <div className=\"flex items-center gap-4 mb-4 flex-wrap\">\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => setTool('pen')}\n                    className={`p-3 rounded-lg transition-all ${\n                      tool === 'pen' \n                        ? 'bg-purple-600 text-white shadow-md' \n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Pen size={20} />\n                  </button>\n                  <button\n                    onClick={() => setTool('rect')}\n                    className={`p-3 rounded-lg transition-all ${\n                      tool === 'rect' \n                        ? 'bg-purple-600 text-white shadow-md' \n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Square size={20} />\n                  </button>\n                  <button\n                    onClick={() => setTool('circle')}\n                    className={`p-3 rounded-lg transition-all ${\n                      tool === 'circle' \n                        ? 'bg-purple-600 text-white shadow-md' \n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                  >\n                    <Circle size={20} />\n                  </button>\n                </div>\n\n                <input\n                  type=\"color\"\n                  value={color}\n                  onChange={(e) => setColor(e.target.value)}\n                  className=\"w-12 h-12 rounded cursor-pointer border-2 border-gray-300\"\n                />\n\n                <button\n                  onClick={clearCanvas}\n                  className=\"p-3 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all\"\n                >\n                  <Trash2 size={20} />\n                </button>\n              </div>\n            )}\n\n            {mode === 'rig' && (\n              <div className=\"flex items-center gap-4 mb-4 flex-wrap\">\n                <button\n                  onClick={resetControlPoints}\n                  className=\"px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-all\"\n                >\n                  Reset Points\n                </button>\n              </div>\n            )}\n\n            <div className=\"border-4 border-gray-300 rounded-lg overflow-hidden bg-white relative\">\n              {mode === 'rig' && (\n                <div className=\"absolute top-2 left-1/2 transform -translate-x-1/2 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-lg z-10\">\n                  Adjust by dragging the points\n                </div>\n              )}\n              \n              <svg\n                ref={svgRef}\n                width=\"800\"\n                height=\"600\"\n                viewBox=\"0 0 800 600\"\n                className={`w-full h-auto ${\n                  mode === 'draw' ? 'cursor-crosshair' : \n                  mode === 'rig' ? 'cursor-grab' : \n                  'cursor-default'\n                }`}\n                onMouseDown={handleMouseDown}\n                onMouseMove={handleMouseMove}\n                onMouseUp={handleMouseUp}\n                onMouseLeave={handleMouseUp}\n                onTouchStart={handleMouseDown}\n                onTouchMove={handleMouseMove}\n                onTouchEnd={handleMouseUp}\n                style={{ touchAction: 'none' }}\n              >\n                <rect width=\"800\" height=\"600\" fill=\"white\" />\n                \n                {paths.map((path, index) => renderPath(path, index))}\n                {currentPath && renderPath(currentPath, -1)}\n                \n                {renderSkeleton()}\n              </svg>\n            </div>\n\n            <div className=\"flex gap-3 mt-4\">\n              <button\n                onClick={exportSVG}\n                className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all\"\n              >\n                <Download size={18} />\n                Export SVG\n              </button>\n              <button\n                onClick={exportJSON}\n                className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all\"\n              >\n                <Save size={18} />\n                Save Rigging\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Speech Animation</h2>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Speech Text\n              </label>\n              <textarea\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                placeholder=\"Enter text to speak...\"\n                className=\"w-full h-32 px-3 py-2 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none\"\n              />\n            </div>\n\n            <button\n              onClick={animateWithTTS}\n              disabled={isAnimating}\n              className={`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all ${\n                isAnimating\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  : 'bg-purple-600 text-white hover:bg-purple-700 shadow-md hover:shadow-lg'\n              }`}\n            >\n              {isAnimating ? (\n                <>\n                  <div className=\"w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin\" />\n                  Speaking...\n                </>\n              ) : (\n                <>\n                  <Play size={20} />\n                  Animate with Speech\n                </>\n              )}\n            </button>\n\n            <div className=\"mt-6 p-4 bg-purple-50 rounded-lg\">\n              <h3 className=\"font-semibold text-gray-800 mb-2\">How to use:</h3>\n              <ol className=\"text-sm text-gray-600 space-y-2 list-decimal list-inside\">\n                <li><strong>Draw:</strong> Create your face</li>\n                <li><strong>Rig:</strong> Drag mouth points to your drawn mouth area</li>\n                <li><strong>Animate:</strong> Click animate and watch!</li>\n              </ol>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-yellow-50 border-2 border-yellow-200 rounded-lg\">\n              <p className=\"text-sm text-yellow-800 font-medium\">\n                <strong>Debug Info:</strong><br/>\n                Mouth open: {(mouthOpenAmount * 100).toFixed(0)}%<br/>\n                Blink: {(blinkAmount * 100).toFixed(0)}%<br/>\n                Animating: {isAnimating ? 'YES' : 'NO'}<br/>\n                Total shapes: {paths.length}<br/>\n                Mouth: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && info.type === 'mouth';\n                }).length}<br/>\n                Eyes: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && (info.type === 'leftEye' || info.type === 'rightEye');\n                }).length}<br/>\n                Pupils: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && (info.type === 'leftPupil' || info.type === 'rightPupil');\n                }).length}<br/>\n                Eyebrows: {paths.filter(p => {\n                  const info = getPathAnimationType(p);\n                  return info && info.type === 'eyebrow';\n                }).length}\n              </p>\n              <p className=\"text-xs text-yellow-700 mt-2\">\n                Green glow = detected, Red glow = animating\n              </p>\n            </div>\n\n            <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n              <h4 className=\"font-semibold text-gray-700 mb-2 text-sm\">Animation Zones:</h4>\n              <div className=\"text-xs text-gray-600 space-y-1\">\n                <div> <span className=\"text-pink-600\">Mouth:</span> 120px from center</div>\n                <div> <span className=\"text-purple-600\">Eyebrows:</span> 60px radius</div>\n                <div> <span className=\"text-blue-600\">Eyes:</span> 40px from eye points</div>\n                <div> <span className=\"text-cyan-600\">Pupils:</span> 15px from eye center</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}